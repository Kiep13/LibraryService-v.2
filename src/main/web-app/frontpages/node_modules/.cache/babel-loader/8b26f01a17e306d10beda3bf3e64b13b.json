{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\genres-page\\\\genres-page.js\";\nimport React, { Component } from 'react';\nimport './genres-page.css';\nimport Header from '../header';\nimport Spinner from '../spinner';\nimport { Redirect } from 'react-router-dom';\nimport { compose } from \"../../utils\";\nimport { connect } from \"react-redux\";\nimport withLibraryService from \"../../hoc\";\nimport { genresRequested, genresLoaded, genreShowAddWindow, genreShowEditWindow, genreUpdateAddField, genreUpdateEditField, genreUpdateSelectedItem } from \"../../actions/genres-actions\";\n\nclass GenresPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      formError: {\n        addGenre: \"\",\n        editGenre: \"\"\n      },\n      isAddGenreError: false,\n      isEditGenreError: false\n    };\n    this.regExpEng = new RegExp('^[A-Z][a-z]+$');\n    this.regExpRus = new RegExp('^[А-Я][а-я]+$');\n    this.errorGenreMessage = \"The genre must start with a capital letter and not contain numbers or punctuation marks. Example: romance.\";\n    this.errorExistsMessage = \"This genre already exists.\";\n\n    this.getAllGenres = async () => {\n      const {\n        libraryService\n      } = this.props;\n      const genres = await libraryService.getAllGenres();\n      this.props.onLoaded(genres);\n    };\n\n    this.validateGenre = (genre, messageField, isErrorField, errorMess) => {\n      const isErrorEng = !this.regExpEng.test(genre);\n      const isErrorRus = !this.regExpRus.test(genre);\n      const isError = isErrorEng && isErrorRus;\n      const message = isError ? errorMess : \"\";\n      this.changeErrorState(messageField, isErrorField, message, isError);\n    };\n\n    this.iSGenreExists = (genre, messageField, isErrorField) => {\n      const genres = this.props.genres.find(el => el.name.localeCompare(genre) === 0);\n      console.log(genres);\n      const isError = genres.length() !== 0;\n      const message = isError ? this.errorExistsMessage : \"\";\n      this.changeErrorState(messageField, isErrorField, message, isError);\n    };\n\n    this.changeErrorState = (messageField, isErrorField, message, value) => {\n      this.setState({\n        formError: {\n          [messageField]: message\n        },\n        [isErrorField]: value\n      });\n    };\n\n    this.changeAddGenre = event => {\n      event.preventDefault();\n      this.validateGenre(event.target.value, \"addGenre\", \"isAddGenreError\", this.errorGenreMessage);\n      this.props.onAddFieldChange(event.target.value);\n    };\n\n    this.changeEditGenre = event => {\n      event.preventDefault();\n      this.validateGenre(event.target.value, \"editGenre\", \"isEditGenreError\", this.errorGenreMessage);\n      this.props.onEditFieldChange(event.target.value);\n    };\n\n    this.onAddButtonClick = async event => {\n      event.preventDefault();\n\n      if (!this.props.isEditWindow) {\n        const value = this.props.isAddWindow;\n\n        if (value) {\n          this.changeErrorState(\"addGenre\", \"isAddGenreError\", \"\", false);\n          this.props.onAddFieldChange(\"\");\n        }\n\n        this.props.changeAddWindow(!value);\n      } else {\n        alert(\"You have opened edit window\");\n      }\n    };\n\n    this.onEditButtonClick = async event => {\n      event.preventDefault();\n\n      if (!this.props.isAddWindow) {\n        if (this.props.selectedItem != null) {\n          const value = this.props.isEditWindow;\n          this.props.changeEditWindow(!value);\n        } else {\n          alert(\"You did not choose genre!\");\n        }\n      } else {\n        alert(\"You have opened add window\");\n      }\n    };\n\n    this.onDeleteButtonClick = async event => {\n      event.preventDefault();\n\n      if (this.props.selectedItem != null) {\n        await this.props.libraryService.deleteGenre(this.props.selectedItem);\n        this.props.onRequest();\n        this.getAllGenres();\n      } else {\n        alert(\"You did not choose genre!\");\n      }\n    };\n\n    this.addGenre = async event => {\n      event.preventDefault();\n      const genre = this.props.addGenreField;\n      await this.validateGenre(genre, \"addGenre\", \"isAddGenreError\", this.errorGenreMessage);\n      await this.iSGenreExists(genre, \"addGenre\", \"isAddGenreError\");\n\n      if (!this.state.isAddGenreError) {\n        const genre = {\n          name: this.props.addGenreField\n        };\n        await this.props.libraryService.addGenre(genre);\n        this.props.onRequest();\n        this.getAllGenres();\n      }\n    };\n\n    this.editGenre = async event => {\n      event.preventDefault();\n\n      if (!this.state.isEditGenreError) {\n        if (this.props.selectedItem != null) {\n          const genre = {\n            id: this.props.selectedItem,\n            name: this.props.editGenreField\n          };\n          await this.props.libraryService.editGenre(genre);\n          this.props.onRequest();\n          this.getAllGenres();\n        } else {\n          alert(\"You did not choose genre!\");\n        }\n      }\n    };\n\n    this.selectedRow = (id, text) => {\n      this.props.onItemChange({\n        id,\n        text\n      });\n      this.changeErrorState(\"editGenre\", \"isEditGenreError\", \"\", false);\n    };\n  }\n\n  componentDidMount() {\n    this.props.onRequest();\n    this.getAllGenres();\n  }\n\n  render() {\n    if (!this.props.isLoggedIn) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/authorization\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 20\n        }\n      });\n    }\n\n    if (this.props.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 20\n        }\n      });\n    }\n\n    const rows = this.props.genres.map(({\n      id,\n      name\n    }) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"object_id\",\n        className: \"\",\n        value: id,\n        onClick: () => {\n          this.selectedRow(id, name);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }\n      }, name));\n    });\n    const styleAddBlock = this.state.isAddGenreError ? \"form-control d-inline-block form-label red-box\" : \"form-control d-inline-block form-label\";\n    const addWindow = !this.props.isAddWindow ? null : /*#__PURE__*/React.createElement(\"div\", {\n      id: \"add-genre-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.addGenre,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new genre here...\",\n      className: styleAddBlock,\n      onChange: this.changeAddGenre,\n      value: this.props.addGenreField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info form-button mt-0 ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 29\n      }\n    }, \"Add\")), this.state.isAddGenreError ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"red-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 55\n      }\n    }, this.state.formError.addGenre) : null)));\n    const styleEditBlock = this.state.isEditGenreError ? \"form-control d-inline-block form-label red-box\" : \"form-control d-inline-block form-label\";\n    const editWindow = !this.props.isEditWindow ? null : /*#__PURE__*/React.createElement(\"div\", {\n      id: \"edit-genre-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.editGenre,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new genre here...\",\n      className: styleEditBlock,\n      onChange: this.changeEditGenre,\n      value: this.props.editGenreField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info form-button mt-0 ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 29\n      }\n    }, \"Update\")), this.state.isEditGenreError ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"red-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 56\n      }\n    }, this.state.formError.editGenre) : null)));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container genres-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 25\n      }\n    }, \"Genres\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genres-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger float-right my-1 item-control\",\n      onClick: this.onDeleteButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-warning float-right my-1 item-control\",\n      onClick: this.onEditButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-pencil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-success float-right my-1 item-control\",\n      onClick: this.onAddButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 25\n      }\n    }), addWindow, editWindow, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 33\n      }\n    }, \"Name\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 29\n      }\n    }, rows)))));\n  }\n\n}\n\nconst mapStateToProps = ({\n  genresList,\n  authorizationBlock\n}) => {\n  return {\n    isLoggedIn: authorizationBlock.isLoggedIn,\n    genres: genresList.genres,\n    loading: genresList.loading,\n    error: genresList.error,\n    isAddWindow: genresList.isAddWindow,\n    isEditWindow: genresList.isEditWindow,\n    addGenreField: genresList.addGenreField,\n    editGenreField: genresList.editGenreField,\n    selectedItem: genresList.selectedItem\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onRequest: () => {\n      dispatch(genresRequested());\n    },\n    onLoaded: newGenres => {\n      dispatch(genresLoaded(newGenres));\n    },\n    changeAddWindow: value => {\n      dispatch(genreShowAddWindow(value));\n    },\n    changeEditWindow: value => {\n      dispatch(genreShowEditWindow(value));\n    },\n    onAddFieldChange: value => {\n      dispatch(genreUpdateAddField(value));\n    },\n    onEditFieldChange: value => {\n      dispatch(genreUpdateEditField(value));\n    },\n    onItemChange: item => {\n      dispatch(genreUpdateSelectedItem(item));\n    }\n  };\n};\n\nexport default compose(withLibraryService(), connect(mapStateToProps, mapDispatchToProps))(GenresPage);","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/genres-page/genres-page.js"],"names":["React","Component","Header","Spinner","Redirect","compose","connect","withLibraryService","genresRequested","genresLoaded","genreShowAddWindow","genreShowEditWindow","genreUpdateAddField","genreUpdateEditField","genreUpdateSelectedItem","GenresPage","state","formError","addGenre","editGenre","isAddGenreError","isEditGenreError","regExpEng","RegExp","regExpRus","errorGenreMessage","errorExistsMessage","getAllGenres","libraryService","props","genres","onLoaded","validateGenre","genre","messageField","isErrorField","errorMess","isErrorEng","test","isErrorRus","isError","message","changeErrorState","iSGenreExists","find","el","name","localeCompare","console","log","length","value","setState","changeAddGenre","event","preventDefault","target","onAddFieldChange","changeEditGenre","onEditFieldChange","onAddButtonClick","isEditWindow","isAddWindow","changeAddWindow","alert","onEditButtonClick","selectedItem","changeEditWindow","onDeleteButtonClick","deleteGenre","onRequest","addGenreField","id","editGenreField","selectedRow","text","onItemChange","componentDidMount","render","isLoggedIn","loading","rows","map","styleAddBlock","addWindow","styleEditBlock","editWindow","mapStateToProps","genresList","authorizationBlock","error","mapDispatchToProps","dispatch","newGenres","item"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport './genres-page.css';\r\n\r\nimport Header from '../header';\r\nimport Spinner from '../spinner';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {compose} from \"../../utils\";\r\nimport {connect} from \"react-redux\";\r\nimport withLibraryService from \"../../hoc\";\r\nimport {genresRequested,\r\n        genresLoaded,\r\n        genreShowAddWindow,\r\n        genreShowEditWindow,\r\n        genreUpdateAddField,\r\n        genreUpdateEditField,\r\n        genreUpdateSelectedItem} from \"../../actions/genres-actions\";\r\n\r\nclass GenresPage extends Component{\r\n\r\n    // necessary for error handling and pointless, in my opinion, for rendering to the global state\r\n    state = {\r\n        formError : {\r\n            addGenre : \"\",\r\n            editGenre : \"\",\r\n        },\r\n        isAddGenreError : false,\r\n        isEditGenreError : false\r\n    };\r\n\r\n    //regular expressions for checking entered data\r\n    regExpEng = new RegExp('^[A-Z][a-z]+$');\r\n    regExpRus = new RegExp('^[А-Я][а-я]+$');\r\n\r\n    //error message\r\n    errorGenreMessage = \"The genre must start with a capital letter and not contain numbers or punctuation marks. Example: romance.\";\r\n    errorExistsMessage = \"This genre already exists.\";\r\n\r\n    componentDidMount() {\r\n        this.props.onRequest();\r\n        this.getAllGenres();\r\n    }\r\n\r\n    getAllGenres  = async () => {\r\n        const {libraryService} = this.props;\r\n        const genres = await libraryService.getAllGenres();\r\n        this.props.onLoaded(genres);\r\n    };\r\n\r\n    validateGenre = (genre, messageField, isErrorField, errorMess) => {\r\n        const isErrorEng = !this.regExpEng.test(genre);\r\n        const isErrorRus = !this.regExpRus.test(genre);\r\n        const isError = isErrorEng && isErrorRus;\r\n        const message = isError ? errorMess : \"\";\r\n        this.changeErrorState(messageField, isErrorField, message, isError);\r\n    };\r\n\r\n    iSGenreExists = (genre, messageField, isErrorField) => {\r\n        const genres = this.props.genres.find((el) => el.name.localeCompare(genre) === 0);\r\n        console.log(genres);\r\n        const isError = genres.length() !== 0;\r\n        const message = isError ? this.errorExistsMessage : \"\";\r\n        this.changeErrorState(messageField, isErrorField, message, isError);\r\n    };\r\n\r\n    changeErrorState = (messageField, isErrorField, message, value) => {\r\n        this.setState({\r\n            formError : {\r\n                [messageField] : message\r\n            },\r\n            [isErrorField] : value\r\n        })\r\n    };\r\n\r\n    changeAddGenre = event => {\r\n        event.preventDefault();\r\n        this.validateGenre(event.target.value, \"addGenre\", \"isAddGenreError\", this.errorGenreMessage);\r\n        this.props.onAddFieldChange(event.target.value);\r\n    };\r\n\r\n    changeEditGenre = event => {\r\n        event.preventDefault();\r\n        this.validateGenre(event.target.value, \"editGenre\", \"isEditGenreError\", this.errorGenreMessage);\r\n        this.props.onEditFieldChange(event.target.value);\r\n    };\r\n\r\n    onAddButtonClick = async event => {\r\n        event.preventDefault();\r\n        if(!this.props.isEditWindow) {\r\n            const value = this.props.isAddWindow;\r\n            if(value) {\r\n                this.changeErrorState(\"addGenre\", \"isAddGenreError\", \"\", false);\r\n                this.props.onAddFieldChange(\"\");\r\n            }\r\n            this.props.changeAddWindow(!value);\r\n        } else {\r\n            alert(\"You have opened edit window\");\r\n        }\r\n    };\r\n\r\n    onEditButtonClick = async event => {\r\n        event.preventDefault();\r\n        if(!this.props.isAddWindow) {\r\n            if (this.props.selectedItem != null) {\r\n                const value = this.props.isEditWindow;\r\n                this.props.changeEditWindow(!value);\r\n            } else {\r\n                alert(\"You did not choose genre!\");\r\n            }\r\n        } else {\r\n            alert(\"You have opened add window\");\r\n        }\r\n    };\r\n\r\n    onDeleteButtonClick = async event => {\r\n        event.preventDefault();\r\n\r\n        if (this.props.selectedItem != null) {\r\n            await this.props.libraryService.deleteGenre(this.props.selectedItem);\r\n            this.props.onRequest();\r\n            this.getAllGenres();\r\n        } else {\r\n            alert(\"You did not choose genre!\");\r\n        }\r\n    };\r\n\r\n    addGenre = async event => {\r\n        event.preventDefault();\r\n\r\n        const genre = this.props.addGenreField;\r\n        await this.validateGenre(genre, \"addGenre\", \"isAddGenreError\", this.errorGenreMessage);\r\n        await this.iSGenreExists(genre, \"addGenre\", \"isAddGenreError\");\r\n        if(!this.state.isAddGenreError) {\r\n            const genre = {\r\n                name : this.props.addGenreField\r\n            };\r\n\r\n            await this.props.libraryService.addGenre(genre);\r\n            this.props.onRequest();\r\n            this.getAllGenres();\r\n        }\r\n    };\r\n\r\n   editGenre = async event => {\r\n        event.preventDefault();\r\n\r\n        if(!this.state.isEditGenreError) {\r\n            if (this.props.selectedItem != null) {\r\n                const genre = {\r\n                    id: this.props.selectedItem,\r\n                    name: this.props.editGenreField\r\n                };\r\n\r\n                await this.props.libraryService.editGenre(genre);\r\n                this.props.onRequest();\r\n                this.getAllGenres();\r\n            } else {\r\n                alert(\"You did not choose genre!\");\r\n            }\r\n        }\r\n    };\r\n\r\n    selectedRow = (id, text) => {\r\n        this.props.onItemChange({id, text});\r\n        this.changeErrorState(\"editGenre\", \"isEditGenreError\", \"\", false);\r\n    };\r\n\r\n    render () {\r\n\r\n        if(!this.props.isLoggedIn) {\r\n            return <Redirect to='/authorization'/>\r\n        }\r\n\r\n        if(this.props.loading) {\r\n            return <Spinner/>\r\n        }\r\n\r\n        const rows = this.props.genres.map(({id, name}) => {\r\n            return (\r\n                <tr key={id}>\r\n                    <td><input type=\"radio\" name=\"object_id\" className=\"\" value={id} onClick={() => {this.selectedRow(id, name)}}/></td>\r\n                    <td>{name}</td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        const styleAddBlock = this.state.isAddGenreError ? \"form-control d-inline-block form-label red-box\" : \"form-control d-inline-block form-label\";\r\n        const addWindow  = !this.props.isAddWindow ? null :\r\n            <div id=\"add-genre-block\">\r\n                <div className=\"card card-body mb-2\">\r\n                    <form onSubmit={this.addGenre}>\r\n                        <div className=\"genre-form d-flex\">\r\n                            <input type=\"text\" placeholder=\"Write new genre here...\" className={styleAddBlock} onChange={this.changeAddGenre} value={this.props.addGenreField}/>\r\n                            <button type=\"submit\" className=\"btn btn-info form-button mt-0 ml-2\">Add</button>\r\n                        </div>\r\n                        {this.state.isAddGenreError ? <div className=\"red-text\">{this.state.formError.addGenre}</div> : null}\r\n                    </form>\r\n                </div>\r\n            </div>;\r\n\r\n        const styleEditBlock = this.state.isEditGenreError ? \"form-control d-inline-block form-label red-box\" : \"form-control d-inline-block form-label\";\r\n        const editWindow = !this.props.isEditWindow ? null :\r\n            <div id=\"edit-genre-block\">\r\n                <div className=\"card card-body\">\r\n                    <form onSubmit={this.editGenre}>\r\n                        <div className=\"genre-form d-flex\">\r\n                            <input type=\"text\" placeholder=\"Write new genre here...\" className={styleEditBlock} onChange={this.changeEditGenre} value={this.props.editGenreField}/>\r\n                            <button type=\"submit\" className=\"btn btn-info form-button mt-0 ml-2\">Update</button>\r\n                        </div>\r\n                        {this.state.isEditGenreError ? <div className=\"red-text\">{this.state.formError.editGenre}</div> : null}\r\n                    </form>\r\n                </div>\r\n            </div>;\r\n\r\n        return (\r\n            <div>\r\n                <Header/>\r\n\r\n                <main role=\"main\">\r\n\r\n                    <div className=\"container genres-page\">\r\n                        <h1>Genres</h1>\r\n\r\n                        <div className=\"genres-tools\">\r\n                            <button className=\"btn btn-outline-danger float-right my-1 item-control\" onClick={this.onDeleteButtonClick}>\r\n                                <i className=\"fa fa-trash-o\"/>\r\n                            </button>\r\n\r\n                            <button className=\"btn btn-outline-warning float-right my-1 item-control\" onClick={this.onEditButtonClick}>\r\n                                <i className=\"fa fa-pencil\"/>\r\n                            </button>\r\n\r\n                            <button className=\"btn btn-outline-success float-right my-1 item-control\" onClick={this.onAddButtonClick}>\r\n                                <i className=\"fa fa-plus\"/>\r\n                            </button>\r\n                        </div>\r\n\r\n                        <br/>\r\n                        <br/>\r\n\r\n                        {addWindow}\r\n\r\n                        {editWindow}\r\n\r\n                        <table className=\"table mt-2\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Name</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {rows}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </main>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = ({genresList, authorizationBlock}) => {\r\n    return {\r\n        isLoggedIn : authorizationBlock.isLoggedIn,\r\n        genres : genresList.genres,\r\n        loading : genresList.loading,\r\n        error : genresList.error,\r\n        isAddWindow :genresList.isAddWindow,\r\n        isEditWindow : genresList.isEditWindow,\r\n        addGenreField : genresList.addGenreField,\r\n        editGenreField: genresList.editGenreField,\r\n        selectedItem: genresList.selectedItem\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onRequest : () => {dispatch(genresRequested())},\r\n        onLoaded : (newGenres) => {dispatch(genresLoaded(newGenres))},\r\n        changeAddWindow : (value) => {dispatch(genreShowAddWindow(value))},\r\n        changeEditWindow : (value) => {dispatch(genreShowEditWindow(value))},\r\n        onAddFieldChange : (value) => {dispatch(genreUpdateAddField(value))},\r\n        onEditFieldChange : (value) => {dispatch(genreUpdateEditField(value))},\r\n        onItemChange : (item) => {dispatch(genreUpdateSelectedItem(item))}\r\n    }\r\n};\r\n\r\nexport default compose(\r\n    withLibraryService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n    )(GenresPage);"]},"metadata":{},"sourceType":"module"}