{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\bookfund-page\\\\bookfund-page.js\";\nimport React, { Component } from \"react\";\nimport \"./bookfund-page.css\";\nimport Spinner from \"../spinner\";\nimport Header from \"../header\";\nimport axios from \"axios\";\n\nclass BookFundPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      book_fund: [],\n      books: [],\n      libraries: [],\n      loading: true,\n      error: false,\n      addBookFund: {\n        addBook: {},\n        addLibrary: {},\n        addAmount: \"\"\n      },\n      editBookFund: {\n        editBook: {},\n        editLibrary: {},\n        editAmount: \"\"\n      },\n      selectedItem: null\n    };\n\n    this.getAllBooks = async () => {\n      await axios.get(\"http://localhost:8080/books\").then(response => {\n        if (response.data != null) {\n          this.setState({ ...this.state,\n            books: response.data,\n            addBookFund: { ...this.state.addBookFund,\n              addBook: response.data[0]\n            }\n          });\n        }\n      });\n    };\n\n    this.getAllLibraries = async () => {\n      await axios.get(\"http://localhost:8080/libraries\").then(response => {\n        if (response.data != null) {\n          this.setState({ ...this.state,\n            libraries: response.data,\n            addBookFund: { ...this.state.addBookFund,\n              addLibrary: response.data[0]\n            }\n          });\n        }\n      });\n    };\n\n    this.getBookFund = async () => {\n      await axios.get(\"http://localhost:8080/bookfund\").then(response => {\n        if (response.data != null) {\n          this.setState({ ...this.state,\n            book_fund: response.data,\n            loading: false\n          });\n        }\n      });\n    };\n\n    this.findBook = id => {\n      return this.state.books.find(el => el.id === +id);\n    };\n\n    this.findLibrary = id => {\n      return this.state.libraries.find(el => el.id === +id);\n    };\n\n    this.onAddBook = event => {\n      console.log(this.findBook(event.target.value));\n      this.setState({ ...this.state,\n        addBookFund: { ...this.state.addBookFund,\n          addBook: this.findBook(event.target.value)\n        }\n      });\n    };\n\n    this.onAddLibrary = event => {\n      this.setState({ ...this.state,\n        addBookFund: { ...this.state.addBookFund,\n          addLibrary: this.findLibrary(event.target.value)\n        }\n      });\n    };\n\n    this.onAddAmount = event => {\n      this.setState({ ...this.state,\n        addBookFund: { ...this.state.addBookFund,\n          addAmount: event.target.value\n        }\n      });\n    };\n\n    this.onEditBook = event => {\n      console.log(this.findBook(event.target.value));\n      this.setState({ ...this.state,\n        editBookFund: { ...this.state.editBookFund,\n          editBook: this.findBook(event.target.value)\n        }\n      });\n    };\n\n    this.onEditLibrary = event => {\n      this.setState({ ...this.state,\n        editBookFund: { ...this.state.editBookFund,\n          editLibrary: this.findLibrary(event.target.value)\n        }\n      });\n    };\n\n    this.onEditAmount = event => {\n      this.setState({ ...this.state,\n        editBookFund: { ...this.state.editBookFund,\n          editAmount: event.target.value\n        }\n      });\n    };\n\n    this.onAddBookFund = async event => {\n      event.preventDefault();\n      const bookFund = {\n        book: this.state.addBookFund.addBook,\n        library: this.state.addBookFund.addLibrary,\n        amount: +this.state.addBookFund.addAmount\n      };\n      await axios.post(\"http://localhost:8080/bookfund-add\", bookFund).then(response => {\n        if (response.data != null) {\n          this.setState({ ...this.state,\n            addBookFund: {\n              addBook: this.state.books[0],\n              addLibrary: this.state.libraries[0],\n              addAmount: \"\"\n            }\n          });\n        }\n      });\n      this.getBookFund();\n    };\n\n    this.onEditBookFund = async event => {\n      event.preventDefault();\n\n      if (this.state.selectedItem != null) {\n        const {\n          editBook,\n          editLibrary,\n          editAmount\n        } = this.state.editBookFund;\n        const bookFund = {\n          id: this.state.selectedItem,\n          book: editBook,\n          library: editLibrary,\n          amount: +editAmount\n        };\n        await axios.put(\"http://localhost:8080/bookfund-edit\", bookFund).then(response => {\n          if (response.data != null) {\n            this.setState({ ...this.state,\n              editBookFund: {\n                editBook: {},\n                editLibrary: {},\n                editAmount: \"\"\n              },\n              selectedItem: null\n            });\n          }\n        });\n        this.getBookFund();\n      }\n    };\n\n    this.onDeleteBookFund = async event => {\n      event.preventDefault();\n\n      if (this.state.selectedItem != null) {\n        await axios.delete(`http://localhost:8080/bookfund-delete/${this.state.selectedItem}`).then(response => {\n          if (response.data != null) {\n            this.setState({ ...this.state,\n              editBookFund: {\n                editBook: {},\n                editLibrary: {},\n                editAmount: \"\"\n              },\n              selectedItem: null\n            });\n          }\n        });\n        this.getBookFund();\n      }\n    };\n\n    this.selectedRow = ({\n      id,\n      book,\n      library,\n      amount\n    }) => {\n      this.setState({ ...this.state,\n        editBookFund: {\n          editBook: book,\n          editLibrary: library,\n          editAmount: amount\n        },\n        selectedItem: id\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getAllBooks();\n    this.getAllLibraries();\n    this.getBookFund();\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 20\n        }\n      });\n    }\n\n    console.log(this.state.addBookFund);\n    const books = this.state.books.map(({\n      id,\n      title,\n      year\n    }) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: id,\n        value: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 17\n        }\n      }, title, \" (\", year, \")\");\n    });\n    const libraries = this.state.libraries.map(({\n      id,\n      name\n    }) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: id,\n        value: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 17\n        }\n      }, name);\n    });\n    const rows = this.state.book_fund.map(el => {\n      const {\n        id,\n        book,\n        library\n      } = el;\n      const {\n        title,\n        author,\n        genre,\n        year,\n        publisher,\n        amount_pages\n      } = book;\n      const {\n        name,\n        address,\n        telephone\n      } = library;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"object_id\",\n        value: id,\n        onClick: () => {\n          this.selectedRow(el);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 21\n        }\n      }, title), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 21\n        }\n      }, author.surname, \" \", author.name, \" \", author.patronymic), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 21\n        }\n      }, genre.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 21\n        }\n      }, year), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 21\n        }\n      }, publisher.publisher), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }\n      }, amount_pages), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 21\n        }\n      }, name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 21\n        }\n      }, address), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }\n      }, telephone));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container genres-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 25\n      }\n    }, \"BookFund\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genres-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger float-right my-1 item-control\",\n      onClick: this.onDeleteBookFund,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-warning float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#edit-book-fund-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-pencil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-success float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#add-book-fund-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"add-book-fund-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onAddBookFund,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-ldropdown mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"add-books-list\",\n      onChange: this.onAddBook,\n      value: this.state.addBookFund.addBook.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 45\n      }\n    }, books)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-ldropdown mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"add-libraries-list\",\n      onChange: this.onAddLibrary,\n      value: this.state.addBookFund.addLibrary.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 45\n      }\n    }, libraries)), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write year of new book here...\",\n      className: \"form-control mb-2\",\n      onChange: this.onAddAmount,\n      value: this.state.addBookFund.addAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 41\n      }\n    }, \"Add\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"edit-book-fund-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onEditBookFund,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-ldropdown mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"edit-books-list\",\n      onChange: this.onEditBook,\n      value: this.state.editBookFund.editBook.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 45\n      }\n    }, books)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-ldropdown mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"edit-libraries-list\",\n      onChange: this.onEditLibrary,\n      value: this.state.editBookFund.editLibrary.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 45\n      }\n    }, libraries)), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write year of new book here...\",\n      className: \"form-control mb-2\",\n      onChange: this.onEditAmount,\n      value: this.state.editBookFund.editAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 41\n      }\n    }, \"Add\"))))), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 33\n      }\n    }, \"Title\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 33\n      }\n    }, \"Author\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 33\n      }\n    }, \"Genre\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 33\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 33\n      }\n    }, \"Publisher\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 33\n      }\n    }, \"Amount of pages\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 33\n      }\n    }, \"Library\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 33\n      }\n    }, \"Address\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 33\n      }\n    }, \"Telephone\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 29\n      }\n    }, rows)))));\n  }\n\n}\n\nexport default BookFundPage;","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/bookfund-page/bookfund-page.js"],"names":["React","Component","Spinner","Header","axios","BookFundPage","state","book_fund","books","libraries","loading","error","addBookFund","addBook","addLibrary","addAmount","editBookFund","editBook","editLibrary","editAmount","selectedItem","getAllBooks","get","then","response","data","setState","getAllLibraries","getBookFund","findBook","id","find","el","findLibrary","onAddBook","event","console","log","target","value","onAddLibrary","onAddAmount","onEditBook","onEditLibrary","onEditAmount","onAddBookFund","preventDefault","bookFund","book","library","amount","post","onEditBookFund","put","onDeleteBookFund","delete","selectedRow","componentDidMount","render","map","title","year","name","rows","author","genre","publisher","amount_pages","address","telephone","surname","patronymic"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport \"./bookfund-page.css\";\r\nimport Spinner from \"../spinner\";\r\nimport Header from \"../header\";\r\nimport axios from \"axios\";\r\n\r\nclass BookFundPage extends Component {\r\n\r\n    state = {\r\n        book_fund : [],\r\n        books : [],\r\n        libraries : [],\r\n        loading : true,\r\n        error : false,\r\n        addBookFund : {\r\n            addBook : {},\r\n            addLibrary : {},\r\n            addAmount : \"\"\r\n        },\r\n        editBookFund : {\r\n            editBook : {},\r\n            editLibrary : {},\r\n            editAmount : \"\"\r\n        },\r\n        selectedItem : null\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.getAllBooks();\r\n        this.getAllLibraries();\r\n        this.getBookFund();\r\n    }\r\n\r\n    getAllBooks = async () => {\r\n        await axios.get(\"http://localhost:8080/books\")\r\n            .then(response => {\r\n                if(response.data != null){\r\n                    this.setState({\r\n                        ...this.state,\r\n                        books : response.data,\r\n                        addBookFund : {\r\n                            ...this.state.addBookFund,\r\n                            addBook: response.data[0]\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n    };\r\n\r\n    getAllLibraries = async () => {\r\n        await axios.get(\"http://localhost:8080/libraries\")\r\n            .then(response => {\r\n                if(response.data != null) {\r\n                    this.setState({\r\n                        ...this.state,\r\n                        libraries : response.data,\r\n                        addBookFund : {\r\n                            ...this.state.addBookFund,\r\n                            addLibrary : response.data[0]\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n    };\r\n\r\n    getBookFund = async () => {\r\n        await axios.get(\"http://localhost:8080/bookfund\")\r\n            .then(response => {\r\n                if(response.data != null) {\r\n                    this.setState({\r\n                        ...this.state,\r\n                        book_fund : response.data,\r\n                        loading : false\r\n                    })\r\n                }\r\n            })\r\n    };\r\n\r\n    findBook = (id) => {\r\n        return this.state.books.find((el) => el.id === +id);\r\n    };\r\n\r\n    findLibrary = (id) => {\r\n        return this.state.libraries.find((el) => el.id === +id);\r\n    };\r\n\r\n    onAddBook= event => {\r\n        console.log(this.findBook(event.target.value));\r\n        this.setState({\r\n            ...this.state,\r\n            addBookFund : {\r\n                ...this.state.addBookFund,\r\n                addBook : this.findBook(event.target.value)\r\n            }\r\n        });\r\n    };\r\n\r\n    onAddLibrary = event => {\r\n        this.setState({\r\n            ...this.state,\r\n            addBookFund : {\r\n                ...this.state.addBookFund,\r\n                addLibrary : this.findLibrary(event.target.value)\r\n            }\r\n        });\r\n    };\r\n\r\n    onAddAmount = event => {\r\n        this.setState({\r\n            ...this.state,\r\n            addBookFund : {\r\n                ...this.state.addBookFund,\r\n                addAmount : event.target.value\r\n            }\r\n        })\r\n    };\r\n\r\n    onEditBook= event => {\r\n        console.log(this.findBook(event.target.value));\r\n        this.setState({\r\n            ...this.state,\r\n            editBookFund : {\r\n                ...this.state.editBookFund,\r\n                editBook : this.findBook(event.target.value)\r\n            }\r\n        });\r\n    };\r\n\r\n    onEditLibrary = event => {\r\n        this.setState({\r\n            ...this.state,\r\n            editBookFund : {\r\n                ...this.state.editBookFund,\r\n                editLibrary : this.findLibrary(event.target.value)\r\n            }\r\n        });\r\n    };\r\n\r\n    onEditAmount = event => {\r\n        this.setState({\r\n            ...this.state,\r\n            editBookFund : {\r\n                ...this.state.editBookFund,\r\n                editAmount : event.target.value\r\n            }\r\n        })\r\n    };\r\n\r\n    onAddBookFund = async event => {\r\n        event.preventDefault();\r\n\r\n        const bookFund = {\r\n            book : this.state.addBookFund.addBook,\r\n            library : this.state.addBookFund.addLibrary,\r\n            amount : +this.state.addBookFund.addAmount\r\n        };\r\n\r\n        await axios.post(\"http://localhost:8080/bookfund-add\", bookFund)\r\n            .then(response => {\r\n                if(response.data != null){\r\n                    this.setState({\r\n                        ...this.state,\r\n                        addBookFund : {\r\n                            addBook : this.state.books[0],\r\n                            addLibrary : this.state.libraries[0],\r\n                            addAmount: \"\"\r\n                        }\r\n                    })\r\n                }\r\n            });\r\n\r\n        this.getBookFund();\r\n    };\r\n\r\n    onEditBookFund = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.state.selectedItem != null) {\r\n            const { editBook, editLibrary, editAmount } = this.state.editBookFund;\r\n\r\n            const bookFund = {\r\n                id : this.state.selectedItem,\r\n                book : editBook,\r\n                library: editLibrary,\r\n                amount : +editAmount\r\n            };\r\n\r\n            await axios.put(\"http://localhost:8080/bookfund-edit\", bookFund)\r\n                .then(response => {\r\n                    if(response.data != null) {\r\n                        this.setState({\r\n                            ...this.state,\r\n                            editBookFund : {\r\n                                editBook : {},\r\n                                editLibrary : {},\r\n                                editAmount : \"\"\r\n                            },\r\n                            selectedItem : null\r\n                        })\r\n                    }\r\n                });\r\n\r\n            this.getBookFund();\r\n        }\r\n\r\n    };\r\n\r\n    onDeleteBookFund = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.state.selectedItem != null) {\r\n            await axios.delete(`http://localhost:8080/bookfund-delete/${this.state.selectedItem}`)\r\n                .then(response => {\r\n                    if(response.data != null) {\r\n                        this.setState({\r\n                            ...this.state,\r\n                            editBookFund : {\r\n                                editBook : {},\r\n                                editLibrary : {},\r\n                                editAmount : \"\"\r\n                            },\r\n                            selectedItem : null\r\n                        })\r\n                    }\r\n                });\r\n\r\n            this.getBookFund();\r\n        }\r\n\r\n    };\r\n\r\n    selectedRow = ({id, book, library, amount}) => {\r\n        this.setState({\r\n            ...this.state,\r\n            editBookFund : {\r\n                editBook : book,\r\n                editLibrary: library,\r\n                editAmount: amount\r\n            },\r\n            selectedItem : id\r\n        })\r\n    };\r\n\r\n    render() {\r\n        if(this.state.loading){\r\n            return <Spinner/>\r\n        }\r\n\r\n        console.log(this.state.addBookFund);\r\n\r\n        const books = this.state.books.map(({id, title, year} )=> {\r\n            return (\r\n                <option key={id} value={id}>{title} ({year})</option>\r\n            )\r\n        });\r\n\r\n        const libraries = this.state.libraries.map(({id, name}) => {\r\n            return (\r\n                <option key={id} value={id}>{name}</option>\r\n            )\r\n        });\r\n\r\n        const rows = this.state.book_fund.map((el) => {\r\n\r\n            const {id, book, library} = el;\r\n            const {title, author, genre, year, publisher, amount_pages } = book;\r\n            const {name, address, telephone} = library;\r\n\r\n            return (\r\n                <tr key={id}>\r\n                    <td><input type=\"radio\" name=\"object_id\" value={id} onClick={() => {this.selectedRow(el)}}/></td>\r\n                    <td>{title}</td>\r\n                    <td>{author.surname} {author.name} {author.patronymic}</td>\r\n                    <td>{genre.name}</td>\r\n                    <td>{year}</td>\r\n                    <td>{publisher.publisher}</td>\r\n                    <td>{amount_pages}</td>\r\n                    <td>{name}</td>\r\n                    <td>{address}</td>\r\n                    <td>{telephone}</td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <Header/>\r\n\r\n                <main role=\"main\">\r\n\r\n                    <div className=\"container genres-page\">\r\n                        <h1>BookFund</h1>\r\n\r\n                        <div className=\"genres-tools\">\r\n                            <button className=\"btn btn-outline-danger float-right my-1 item-control\" onClick={this.onDeleteBookFund}>\r\n                                <i className=\"fa fa-trash-o\"/>\r\n                            </button>\r\n\r\n                            <a className=\"btn btn-outline-warning float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#edit-book-fund-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-pencil\"/>\r\n                            </a>\r\n\r\n                            <a className=\"btn btn-outline-success float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#add-book-fund-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-plus\"/>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <br/>\r\n                        <br/>\r\n\r\n                        <div className=\"collapse\" id=\"add-book-fund-block\">\r\n                            <div className=\"card card-body mb-2\">\r\n                                <form onSubmit={this.onAddBookFund}>\r\n                                    <div className=\"genre-form\">\r\n                                        <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">\r\n                                            <select id=\"add-books-list\" onChange={this.onAddBook} value={this.state.addBookFund.addBook.id}>\r\n                                                {books}\r\n                                            </select>\r\n                                        </div>\r\n                                        <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">\r\n                                            <select id=\"add-libraries-list\" onChange={this.onAddLibrary} value={this.state.addBookFund.addLibrary.id}>\r\n                                                {libraries}\r\n                                            </select>\r\n                                        </div>\r\n                                        <input type=\"text\" placeholder=\"Write year of new book here...\" className=\"form-control mb-2\" onChange={this.onAddAmount} value={this.state.addBookFund.addAmount}/>\r\n                                        <button type=\"submit\" className=\"btn btn-info auth-button\">Add</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"collapse\" id=\"edit-book-fund-block\">\r\n                            <div className=\"card card-body mb-2\">\r\n                                <form onSubmit={this.onEditBookFund}>\r\n                                    <div className=\"genre-form\">\r\n                                        <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">\r\n                                            <select id=\"edit-books-list\" onChange={this.onEditBook} value={this.state.editBookFund.editBook.id}>\r\n                                                {books}\r\n                                            </select>\r\n                                        </div>\r\n                                        <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">\r\n                                            <select id=\"edit-libraries-list\" onChange={this.onEditLibrary} value={this.state.editBookFund.editLibrary.id}>\r\n                                                {libraries}\r\n                                            </select>\r\n                                        </div>\r\n                                        <input type=\"text\" placeholder=\"Write year of new book here...\" className=\"form-control mb-2\" onChange={this.onEditAmount} value={this.state.editBookFund.editAmount}/>\r\n                                        <button type=\"submit\" className=\"btn btn-info auth-button\">Add</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Title</th>\r\n                                <th>Author</th>\r\n                                <th>Genre</th>\r\n                                <th>Year</th>\r\n                                <th>Publisher</th>\r\n                                <th>Amount of pages</th>\r\n                                <th>Library</th>\r\n                                <th>Address</th>\r\n                                <th>Telephone</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {rows}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </main>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BookFundPage;"]},"metadata":{},"sourceType":"module"}