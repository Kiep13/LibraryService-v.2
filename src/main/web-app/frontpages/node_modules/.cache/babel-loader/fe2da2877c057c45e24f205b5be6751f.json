{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\libraries-page\\\\libraries-page.js\";\nimport React, { Component } from \"react\";\nimport \"./libraries-page.css\";\nimport Header from \"../header\";\nimport Spinner from \"../spinner\";\nimport { compose } from \"../../utils\";\nimport { connect } from \"react-redux\";\nimport withLibraryService from \"../../hoc\";\nimport { librariesRequested, librariesLoaded, librariesError, librariesUpdateAddNameField, librariesUpdateAddAddressField, librariesUpdateAddTelephoneField, librariesUpdateEditNameField, librariesUpdateEditAddressField, librariesUpdateEditTelephoneField, librariesUpdateSelectedItem } from \"../../actions/libraries-actions\";\n\nclass LibrariesPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.getAllLibraries = async () => {\n      const libraries = await this.props.libraryService.getAllLibraries();\n      this.props.onLoaded(libraries);\n    };\n\n    this.changeAddName = event => {\n      event.preventDefault();\n      this.props.changeAddName(event.target.value);\n    };\n\n    this.changeAddAddress = event => {\n      event.preventDefault();\n      this.props.changeAddAddress(event.target.value);\n    };\n\n    this.changeAddTelephone = event => {\n      event.preventDefault();\n      this.props.changeAddTelephone(event.target.value);\n    };\n\n    this.changeEditName = event => {\n      event.preventDefault();\n      this.props.changeEditName(event.target.value);\n    };\n\n    this.changeEditAddress = event => {\n      event.preventDefault();\n      this.props.changeEditAddress(event.target.value);\n    };\n\n    this.changeEditTelephone = event => {\n      event.preventDefault();\n      this.props.changeEditTelephone(event.target.value);\n    };\n\n    this.onAddLibrary = async event => {\n      event.preventDefault();\n      const library = {\n        name: this.props.addLibrary.addName,\n        address: this.props.addLibrary.addAddress,\n        telephone: this.props.addLibrary.addTelephone\n      };\n      await this.props.libraryService.addLibrary(library);\n      this.props.onRequest();\n      this.getAllLibraries();\n    };\n\n    this.onEditLibrary = async event => {\n      event.preventDefault();\n\n      if (this.props.selectedItem) {\n        const library = {\n          id: this.props.selectedItem,\n          name: this.props.editLibrary.editName,\n          address: this.props.editLibrary.editAddress,\n          telephone: this.props.editLibrary.editTelephone\n        };\n        await this.props.libraryService.editLibrary(library);\n        this.props.onRequest();\n        this.getAllLibraries();\n      }\n    };\n\n    this.onDeleteLibrary = async event => {\n      event.preventDefault();\n\n      if (this.props.selectedItem != null) {\n        await this.props.libraryService.deleteLibrary(this.props.selectedItem);\n        this.props.onRequest();\n        this.getAllLibraries();\n      }\n    };\n\n    this.selectedRow = (id, name, address, telephone) => {\n      const item = {\n        editName: name,\n        editAddress: address,\n        editTelephone: telephone\n      };\n      this.props.changeItem({\n        id,\n        item\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.onRequest();\n    this.getAllLibraries();\n  }\n\n  render() {\n    if (this.props.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 20\n        }\n      });\n    }\n\n    const rows = this.props.libraries.map(({\n      id,\n      name,\n      address,\n      telephone\n    }) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"object_id\",\n        value: id,\n        onClick: () => {\n          this.selectedRow(id, name, address, telephone);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }\n      }, name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }\n      }, address), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      }, telephone));\n    });\n    const {\n      addName,\n      addAddress,\n      addTelephone\n    } = this.props.addLibrary;\n    const {\n      editName,\n      editAddress,\n      editTelephone\n    } = this.props.editLibrary;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container genres-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }\n    }, \"Libraries\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genres-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger float-right my-1 item-control\",\n      onClick: this.onDeleteLibrary,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-warning float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#edit-library-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-pencil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-success float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#add-library-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"add-library-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onAddLibrary,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write name of new library here...\",\n      className: \"form-control mb-2\",\n      onChange: this.changeAddName,\n      value: addName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write address of new library here...\",\n      className: \"form-control mb-2\",\n      onChange: this.changeAddAddress,\n      value: addAddress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write telephone of new library here...\",\n      className: \"form-control mb-2\",\n      onChange: this.changeAddTelephone,\n      value: addTelephone,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 41\n      }\n    }, \"Add\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"edit-library-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onEditLibrary,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new name of library here...\",\n      className: \"form-control mb-2\",\n      onChange: this.changeEditName,\n      value: editName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new address of library here...\",\n      className: \"form-control mb-2\",\n      onChange: this.changeEditAddress,\n      value: editAddress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new telephone of library here...\",\n      className: \"form-control mb-2\",\n      onChange: this.changeEditTelephone,\n      value: editTelephone,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 37\n      }\n    }, \"Update\")))), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 33\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 33\n      }\n    }, \"Address\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 33\n      }\n    }, \"Telephone\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 29\n      }\n    }, rows)))));\n  }\n\n}\n\nconst mapStateToProps = ({\n  librariesList\n}) => {\n  return {\n    libraries: librariesList.libraries,\n    loading: librariesList.loading,\n    error: librariesList.error,\n    addLibrary: librariesList.addLibrary,\n    editLibrary: librariesList.editLibrary,\n    selectedItem: librariesList.selectedItem\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onRequest: () => {\n      dispatch(librariesRequested());\n    },\n    onLoaded: newLibraries => {\n      dispatch(librariesLoaded(newLibraries));\n    },\n    onError: error => {\n      dispatch(librariesError(error));\n    },\n    changeAddName: value => {\n      dispatch(librariesUpdateAddNameField(value));\n    },\n    changeAddAddress: value => {\n      dispatch(librariesUpdateAddAddressField(value));\n    },\n    changeAddTelephone: value => {\n      dispatch(librariesUpdateAddTelephoneField(value));\n    },\n    changeEditName: value => {\n      dispatch(librariesUpdateEditNameField(value));\n    },\n    changeEditAddress: value => {\n      dispatch(librariesUpdateEditAddressField(value));\n    },\n    changeEditTelephone: value => {\n      dispatch(librariesUpdateEditTelephoneField(value));\n    },\n    changeItem: item => {\n      dispatch(librariesUpdateSelectedItem(item));\n    }\n  };\n};\n\nexport default compose(withLibraryService(), connect(mapStateToProps, mapDispatchToProps))(LibrariesPage);","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/libraries-page/libraries-page.js"],"names":["React","Component","Header","Spinner","compose","connect","withLibraryService","librariesRequested","librariesLoaded","librariesError","librariesUpdateAddNameField","librariesUpdateAddAddressField","librariesUpdateAddTelephoneField","librariesUpdateEditNameField","librariesUpdateEditAddressField","librariesUpdateEditTelephoneField","librariesUpdateSelectedItem","LibrariesPage","getAllLibraries","libraries","props","libraryService","onLoaded","changeAddName","event","preventDefault","target","value","changeAddAddress","changeAddTelephone","changeEditName","changeEditAddress","changeEditTelephone","onAddLibrary","library","name","addLibrary","addName","address","addAddress","telephone","addTelephone","onRequest","onEditLibrary","selectedItem","id","editLibrary","editName","editAddress","editTelephone","onDeleteLibrary","deleteLibrary","selectedRow","item","changeItem","componentDidMount","render","loading","rows","map","mapStateToProps","librariesList","error","mapDispatchToProps","dispatch","newLibraries","onError"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport \"./libraries-page.css\";\r\nimport Header from \"../header\";\r\nimport Spinner from \"../spinner\";\r\nimport {compose} from \"../../utils\";\r\nimport {connect} from \"react-redux\";\r\nimport withLibraryService from \"../../hoc\";\r\nimport {\r\n    librariesRequested,\r\n    librariesLoaded,\r\n    librariesError,\r\n    librariesUpdateAddNameField,\r\n    librariesUpdateAddAddressField,\r\n    librariesUpdateAddTelephoneField,\r\n    librariesUpdateEditNameField,\r\n    librariesUpdateEditAddressField,\r\n    librariesUpdateEditTelephoneField,\r\n    librariesUpdateSelectedItem\r\n} from \"../../actions/libraries-actions\"\r\n\r\nclass LibrariesPage extends Component {\r\n\r\n    componentDidMount() {\r\n        this.props.onRequest();\r\n        this.getAllLibraries();\r\n    }\r\n\r\n    getAllLibraries = async () => {\r\n        const libraries = await this.props.libraryService.getAllLibraries();\r\n        this.props.onLoaded(libraries);\r\n    };\r\n\r\n    changeAddName = event => {\r\n        event.preventDefault();\r\n        this.props.changeAddName(event.target.value)\r\n    };\r\n\r\n    changeAddAddress = event => {\r\n        event.preventDefault();\r\n        this.props.changeAddAddress(event.target.value)\r\n    };\r\n\r\n    changeAddTelephone = event => {\r\n        event.preventDefault();\r\n        this.props.changeAddTelephone(event.target.value)\r\n    };\r\n\r\n    changeEditName = event => {\r\n        event.preventDefault();\r\n        this.props.changeEditName(event.target.value)\r\n    };\r\n\r\n    changeEditAddress = event => {\r\n        event.preventDefault();\r\n        this.props.changeEditAddress(event.target.value)\r\n    };\r\n\r\n    changeEditTelephone = event => {\r\n        event.preventDefault();\r\n        this.props.changeEditTelephone(event.target.value)\r\n    };\r\n\r\n    onAddLibrary = async event => {\r\n        event.preventDefault();\r\n\r\n        const library = {\r\n            name : this.props.addLibrary.addName,\r\n            address : this.props.addLibrary.addAddress,\r\n            telephone : this.props.addLibrary.addTelephone\r\n        };\r\n\r\n        await this.props.libraryService.addLibrary(library);\r\n        this.props.onRequest();\r\n        this.getAllLibraries();\r\n    };\r\n\r\n\r\n    onEditLibrary = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.props.selectedItem) {\r\n            const library = {\r\n                id : this.props.selectedItem,\r\n                name : this.props.editLibrary.editName,\r\n                address : this.props.editLibrary.editAddress,\r\n                telephone : this.props.editLibrary.editTelephone\r\n            };\r\n\r\n            await this.props.libraryService.editLibrary(library);\r\n            this.props.onRequest();\r\n            this.getAllLibraries();\r\n        }\r\n    };\r\n\r\n    onDeleteLibrary = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.props.selectedItem != null) {\r\n            await this.props.libraryService.deleteLibrary(this.props.selectedItem);\r\n            this.props.onRequest();\r\n            this.getAllLibraries();\r\n        }\r\n    };\r\n\r\n    selectedRow = (id, name, address, telephone) => {\r\n        const item = {\r\n            editName : name,\r\n            editAddress : address,\r\n            editTelephone : telephone\r\n        };\r\n        this.props.changeItem({id, item});\r\n    };\r\n\r\n    render () {\r\n\r\n        if(this.props.loading) {\r\n            return <Spinner/>\r\n        }\r\n\r\n        const rows = this.props.libraries.map(({id, name, address, telephone})=>{\r\n            return(\r\n                <tr key={id}>\r\n                    <td><input type=\"radio\" name=\"object_id\" value={id} onClick={() => {this.selectedRow(id, name, address, telephone)}}/></td>\r\n                    <td>{name}</td>\r\n                    <td>{address}</td>\r\n                    <td>{telephone}</td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        const {addName, addAddress, addTelephone} = this.props.addLibrary;\r\n        const {editName, editAddress, editTelephone} = this.props.editLibrary;\r\n\r\n        return (\r\n            <div>\r\n                <Header/>\r\n\r\n                <main role=\"main\">\r\n\r\n                    <div className=\"container genres-page\">\r\n                        <h1>Libraries</h1>\r\n\r\n                        <div className=\"genres-tools\">\r\n                            <button className=\"btn btn-outline-danger float-right my-1 item-control\" onClick={this.onDeleteLibrary}>\r\n                                <i className=\"fa fa-trash-o\"/>\r\n                            </button>\r\n\r\n                            <a className=\"btn btn-outline-warning float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#edit-library-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-pencil\"/>\r\n                            </a>\r\n\r\n                            <a className=\"btn btn-outline-success float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#add-library-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-plus\"/>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <br/>\r\n                        <br/>\r\n\r\n                        <div className=\"collapse\" id=\"add-library-block\">\r\n                            <div className=\"card card-body mb-2\">\r\n                                <form onSubmit={this.onAddLibrary}>\r\n                                    <div className=\"genre-form\">\r\n                                        <input type=\"text\" placeholder=\"Write name of new library here...\" className=\"form-control mb-2\" onChange={this.changeAddName} value={addName}/>\r\n                                        <input type=\"text\" placeholder=\"Write address of new library here...\" className=\"form-control mb-2\" onChange={this.changeAddAddress} value={addAddress}/>\r\n                                        <input type=\"text\" placeholder=\"Write telephone of new library here...\" className=\"form-control mb-2\" onChange={this.changeAddTelephone} value={addTelephone}/>\r\n                                        <button type=\"submit\" className=\"btn btn-info auth-button\">Add</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"collapse\" id=\"edit-library-block\">\r\n                            <div className=\"card card-body\">\r\n                                <form onSubmit={this.onEditLibrary}>\r\n                                    <input type=\"text\" placeholder=\"Write new name of library here...\" className=\"form-control mb-2\" onChange={this.changeEditName} value={editName}/>\r\n                                    <input type=\"text\" placeholder=\"Write new address of library here...\" className=\"form-control mb-2\" onChange={this.changeEditAddress} value={editAddress}/>\r\n                                    <input type=\"text\" placeholder=\"Write new telephone of library here...\" className=\"form-control mb-2\" onChange={this.changeEditTelephone} value={editTelephone}/>\r\n                                    <button type=\"submit\" className=\"btn btn-info auth-button\">Update</button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Name</th>\r\n                                <th>Address</th>\r\n                                <th>Telephone</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {rows}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </main>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\nconst mapStateToProps = ({librariesList}) => {\r\n    return {\r\n        libraries : librariesList.libraries,\r\n        loading : librariesList.loading,\r\n        error : librariesList.error,\r\n        addLibrary : librariesList.addLibrary,\r\n        editLibrary : librariesList.editLibrary,\r\n        selectedItem : librariesList.selectedItem\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onRequest : () => {dispatch(librariesRequested())},\r\n        onLoaded : (newLibraries) => {dispatch(librariesLoaded(newLibraries))},\r\n        onError : (error) => {dispatch(librariesError(error))},\r\n        changeAddName : (value) => {dispatch(librariesUpdateAddNameField(value))},\r\n        changeAddAddress : (value) => {dispatch(librariesUpdateAddAddressField(value))},\r\n        changeAddTelephone : (value) => {dispatch(librariesUpdateAddTelephoneField(value))},\r\n        changeEditName : (value) => {dispatch(librariesUpdateEditNameField(value))},\r\n        changeEditAddress : (value) => {dispatch(librariesUpdateEditAddressField(value))},\r\n        changeEditTelephone : (value) => {dispatch(librariesUpdateEditTelephoneField(value))},\r\n        changeItem : (item) => {dispatch(librariesUpdateSelectedItem(item))}\r\n    }\r\n};\r\n\r\nexport default compose(\r\n    withLibraryService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n    )(LibrariesPage);"]},"metadata":{},"sourceType":"module"}