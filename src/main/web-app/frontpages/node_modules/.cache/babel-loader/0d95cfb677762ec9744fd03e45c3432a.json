{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\publishers-page\\\\publishers-page.js\";\nimport React, { Component } from \"react\";\nimport \"./publisher-page.css\";\nimport Header from \"../header\";\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport Spinner from '../spinner';\nimport { publishersRequested, publishersLoaded, publishersError, publishersUpdateAddField, publishersUpdateEditField, publishersUpdateSelectedItem } from \"../../actions/publishers-action\";\n\nclass PublishersPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.getAllPublishers = () => {\n      axios.get(\"http://localhost:8080/publishers\").then(response => {\n        if (response.data != null) {\n          this.props.onLoaded(response.data);\n        }\n      });\n    };\n\n    this.changeAddPublisher = event => {\n      event.preventDefault();\n      this.props.changeAddField(event.target.value);\n    };\n\n    this.changeEditPublisher = event => {\n      event.preventDefault();\n      this.props.changeEditField(event.target.value);\n    };\n\n    this.onAddPublisher = async event => {\n      event.preventDefault();\n      const publisher = {\n        publisher: this.props.addPublisher\n      };\n      await axios.post(\"http://localhost:8080/publisher-add\", publisher).then(response => {\n        if (response.data != null) {\n          this.props.onRequest();\n          this.getAllPublishers();\n        }\n      });\n    };\n\n    this.onEditPublisher = async event => {\n      event.preventDefault();\n\n      if (this.props.selectedItem != null) {\n        const publisher = {\n          id: this.props.selectedItem,\n          publisher: this.props.editPublisher\n        };\n        await axios.put(\"http://localhost:8080/publisher-edit\", publisher).then(response => {\n          if (response.data != null) {\n            this.props.onRequest();\n            this.getAllPublishers();\n          }\n        });\n      }\n    };\n\n    this.onDeletePublisher = async event => {\n      event.preventDefault();\n\n      if (this.props.selectedItem != null) {\n        await axios.delete(`http://localhost:8080/publisher-delete/${this.props.selectedItem}`).then(responce => {\n          if (responce.data != null) {\n            this.props.onRequest();\n            this.getAllPublishers();\n          }\n        });\n      }\n    };\n\n    this.selectedRow = (id, text) => {\n      this.props.changeItem({\n        id,\n        text\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.onRequest();\n    this.getAllPublishers();\n  }\n\n  render() {\n    if (this.props.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 20\n        }\n      });\n    } // const rows = this.props.publishers.map(({id, publisher}) => {\n    //     return (\n    //         <tr key={id}>\n    //             <td><input type=\"radio\" name=\"object_id\" value={id} onClick={() => {this.selectedRow(id, publisher)}}/></td>\n    //             <td>{publisher}</td>\n    //         </tr>\n    //     )\n    // });\n\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container genres-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 25\n      }\n    }, \"Publishers\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genres-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger float-right my-1 item-control\",\n      onClick: this.onDeletePublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-warning float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#edit-publisher-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-pencil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-success float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#add-publisher-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"add-publisher-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onAddPublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new publisher here...\",\n      className: \"form-control\",\n      onChange: this.changeAddPublisher,\n      value: this.props.addPublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 41\n      }\n    }, \"Add\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"edit-publisher-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onEditPublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new genre here...\",\n      className: \"form-control\",\n      onChange: this.changeEditPublisher,\n      value: this.props.editPublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 37\n      }\n    }, \"Update\")))), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 33\n      }\n    }, \"Name\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 29\n      }\n    })))));\n  }\n\n}\n\nconst mapStateToProps = ({\n  publishersList\n}) => {\n  return {\n    publishers: publishersList.publishers,\n    loading: publishersList.loading,\n    error: publishersList.error,\n    addPublisher: publishersList.addPublisher,\n    editPublisher: publishersList.editPublisher,\n    selectedItem: publishersList.selectedItem\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onRequest: () => {\n      dispatch(publishersRequested());\n    },\n    onLoaded: newPublishers => {\n      dispatch(publishersLoaded(newPublishers));\n    },\n    onError: error => {\n      dispatch(publishersError(error));\n    },\n    changeAddField: value => {\n      dispatch(publishersUpdateAddField(value));\n    },\n    changeEditField: value => {\n      dispatch(publishersUpdateEditField(value));\n    },\n    changeItem: item => {\n      dispatch(publishersUpdateSelectedItem(item));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PublishersPage);","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/publishers-page/publishers-page.js"],"names":["React","Component","Header","axios","connect","Spinner","publishersRequested","publishersLoaded","publishersError","publishersUpdateAddField","publishersUpdateEditField","publishersUpdateSelectedItem","PublishersPage","getAllPublishers","get","then","response","data","props","onLoaded","changeAddPublisher","event","preventDefault","changeAddField","target","value","changeEditPublisher","changeEditField","onAddPublisher","publisher","addPublisher","post","onRequest","onEditPublisher","selectedItem","id","editPublisher","put","onDeletePublisher","delete","responce","selectedRow","text","changeItem","componentDidMount","render","loading","mapStateToProps","publishersList","publishers","error","mapDispatchToProps","dispatch","newPublishers","onError","item"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport \"./publisher-page.css\";\r\nimport Header from \"../header\";\r\nimport axios from 'axios';\r\nimport {connect} from \"react-redux\";\r\nimport Spinner from '../spinner';\r\nimport {\r\n    publishersRequested,\r\n    publishersLoaded,\r\n    publishersError,\r\n    publishersUpdateAddField,\r\n    publishersUpdateEditField,\r\n    publishersUpdateSelectedItem\r\n} from \"../../actions/publishers-action\";\r\n\r\nclass PublishersPage extends Component {\r\n\r\n    componentDidMount() {\r\n        this.props.onRequest();\r\n        this.getAllPublishers();\r\n    }\r\n\r\n    getAllPublishers = () => {\r\n\r\n        axios.get(\"http://localhost:8080/publishers\")\r\n            .then(response => {\r\n                if(response.data != null) {\r\n                    this.props.onLoaded(response.data);\r\n                }\r\n            })\r\n    };\r\n\r\n    changeAddPublisher = event => {\r\n        event.preventDefault();\r\n        this.props.changeAddField(event.target.value);\r\n    };\r\n\r\n    changeEditPublisher = event => {\r\n        event.preventDefault();\r\n        this.props.changeEditField(event.target.value);\r\n    };\r\n\r\n    onAddPublisher = async event => {\r\n        event.preventDefault();\r\n\r\n        const publisher = {\r\n            publisher : this.props.addPublisher\r\n        };\r\n\r\n        await axios.post(\"http://localhost:8080/publisher-add\", publisher)\r\n                    .then(response => {\r\n                        if(response.data != null) {\r\n                            this.props.onRequest();\r\n                            this.getAllPublishers();\r\n                        }\r\n                    });\r\n    };\r\n\r\n    onEditPublisher = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.props.selectedItem != null) {\r\n            const publisher = {\r\n                id : this.props.selectedItem,\r\n                publisher : this.props.editPublisher\r\n            };\r\n\r\n            await axios.put(\"http://localhost:8080/publisher-edit\", publisher)\r\n                .then(response => {\r\n                    if(response.data != null) {\r\n                        this.props.onRequest();\r\n                        this.getAllPublishers();\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    onDeletePublisher = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.props.selectedItem != null) {\r\n            await axios.delete(`http://localhost:8080/publisher-delete/${this.props.selectedItem}`)\r\n                .then(responce => {\r\n                    if(responce.data != null){\r\n                        this.props.onRequest();\r\n                        this.getAllPublishers();\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    selectedRow = (id, text) => {\r\n        this.props.changeItem({id, text});\r\n    };\r\n\r\n    render() {\r\n\r\n        if(this.props.loading) {\r\n            return <Spinner/>;\r\n        }\r\n\r\n        // const rows = this.props.publishers.map(({id, publisher}) => {\r\n        //     return (\r\n        //         <tr key={id}>\r\n        //             <td><input type=\"radio\" name=\"object_id\" value={id} onClick={() => {this.selectedRow(id, publisher)}}/></td>\r\n        //             <td>{publisher}</td>\r\n        //         </tr>\r\n        //     )\r\n        // });\r\n\r\n        return (\r\n            <div>\r\n                <Header/>\r\n\r\n                <main role=\"main\">\r\n\r\n                    <div className=\"container genres-page\">\r\n                        <h1>Publishers</h1>\r\n\r\n                        <div className=\"genres-tools\">\r\n                            <button className=\"btn btn-outline-danger float-right my-1 item-control\" onClick={this.onDeletePublisher}>\r\n                                <i className=\"fa fa-trash-o\"/>\r\n                            </button>\r\n\r\n                            <a className=\"btn btn-outline-warning float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#edit-publisher-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-pencil\"/>\r\n                            </a>\r\n\r\n                            <a className=\"btn btn-outline-success float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#add-publisher-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-plus\"/>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <br/>\r\n                        <br/>\r\n\r\n                        <div className=\"collapse\" id=\"add-publisher-block\">\r\n                            <div className=\"card card-body mb-2\">\r\n                                <form onSubmit={this.onAddPublisher}>\r\n                                    <div className=\"genre-form\">\r\n                                        <input type=\"text\" placeholder=\"Write new publisher here...\" className=\"form-control\" onChange={this.changeAddPublisher} value={this.props.addPublisher}/>\r\n                                        <button type=\"submit\" className=\"btn btn-info auth-button\">Add</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"collapse\" id=\"edit-publisher-block\">\r\n                            <div className=\"card card-body\">\r\n                                <form onSubmit={this.onEditPublisher}>\r\n                                    <input type=\"text\" placeholder=\"Write new genre here...\" className=\"form-control\" onChange={this.changeEditPublisher} value={this.props.editPublisher}/>\r\n                                    <button type=\"submit\" className=\"btn btn-info auth-button\">Update</button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Name</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {/*{rows}*/}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </main>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = ({publishersList}) => {\r\n    return {\r\n        publishers : publishersList.publishers,\r\n        loading : publishersList.loading,\r\n        error : publishersList.error,\r\n        addPublisher : publishersList.addPublisher,\r\n        editPublisher : publishersList.editPublisher,\r\n        selectedItem : publishersList.selectedItem\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onRequest : () => {dispatch(publishersRequested())},\r\n        onLoaded : (newPublishers) => {dispatch(publishersLoaded(newPublishers))},\r\n        onError : (error) => {dispatch(publishersError(error))},\r\n        changeAddField : (value) => {dispatch(publishersUpdateAddField(value))},\r\n        changeEditField : (value) => {dispatch(publishersUpdateEditField(value))},\r\n        changeItem : (item) => {dispatch(publishersUpdateSelectedItem(item))}\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PublishersPage);\r\n"]},"metadata":{},"sourceType":"module"}