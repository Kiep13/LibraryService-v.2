{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\books-page\\\\books-page.js\";\nimport React, { Component } from \"react\";\nimport Header from \"../header\";\nimport Spinner from \"../spinner\";\nimport { compose } from \"../../utils\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport withLibraryService from \"../../hoc\";\nimport { booksRequested, booksLoaded, booksShowAddWindow, booksShowEditWindow, booksUpdateAddTitleField, booksUpdateAddAuthorField, booksUpdateAddGenreField, booksUpdateAddYearField, booksUpdateAddPublisherField, booksUpdateAddPagesField, booksUpdateEditTitleField, booksUpdateEditAuthorField, booksUpdateEditGenreField, booksUpdateEditYearField, booksUpdateEditPublisherField, booksUpdateEditPagesField, booksUpdateSelectedItem } from \"../../actions/books-actions\";\nimport { authorsLoaded } from \"../../actions/authors-actions\";\nimport { genresLoaded } from \"../../actions/genres-actions\";\nimport { publishersLoaded } from \"../../actions/publishers-actions\";\nimport \"./books-page.css\";\n\nclass BooksPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isAddTitleError: false,\n      isAddYearError: false,\n      isAddPagesError: false,\n      isEditTitleError: false,\n      isEditYearError: false,\n      isEditPagesError: false\n    };\n    this.regExpNumber = new RegExp(\"^[0-9]+$\");\n    this.errorTitleMessage = \"The length of the book title must be at least 2\";\n    this.errorYearMessage = \"The year must be a four-digit integer no less than 1850 and no more than the current year\";\n    this.errorPagesMessage = \"The number of pages must be an integer no less than 5 and no more than 2000\";\n\n    this.validateWord = (word, isErrorField) => {\n      const isError = word.length < 3;\n      this.changeErrorState(isErrorField, isError);\n    };\n\n    this.validateYear = (year, isErrorField) => {\n      let isError = !this.regExpNumber.test(year);\n      const date = new Date();\n      isError = !isError ? year < 1850 || year > date.getFullYear() : isError;\n      this.changeErrorState(isErrorField, isError);\n    };\n\n    this.validatePages = (pages, isErrorField) => {\n      let isError = !this.regExpNumber.test(pages);\n      isError = !isError ? pages < 5 || pages > 2000 : isError;\n      this.changeErrorState(isErrorField, isError);\n    };\n\n    this.changeErrorState = (isErrorField, value) => {\n      this.setState({\n        [isErrorField]: value\n      });\n    };\n\n    this.getAllAuthors = async () => {\n      let authors = await this.props.libraryService.getAllAuthors();\n      this.props.onLoadedAuthors(authors);\n    };\n\n    this.getAllGenres = async () => {\n      let genres = await this.props.libraryService.getAllGenres();\n      this.props.onLoadedGenres(genres);\n    };\n\n    this.getAllPublishers = async () => {\n      let publishers = await this.props.libraryService.getAllPublishers();\n      this.props.onLoadedPublishers(publishers);\n    };\n\n    this.getAllBooks = async () => {\n      const books = await this.props.libraryService.getAllBooks();\n      this.props.onLoaded(books);\n    };\n\n    this.findAuthor = id => {\n      return this.props.authors.find(el => el.id === +id);\n    };\n\n    this.findGenre = id => {\n      return this.props.genres.find(el => el.id === +id);\n    };\n\n    this.findPublisher = id => {\n      return this.props.publishers.find(el => el.id === +id);\n    };\n\n    this.changeAddTitle = event => {\n      event.preventDefault();\n      this.validateWord(event.target.value, \"isAddTitleError\");\n      this.props.changeAddTitle(event.target.value);\n    };\n\n    this.changeAddAuthor = event => {\n      event.preventDefault();\n      this.props.changeAddAuthor(this.findAuthor(event.target.value));\n    };\n\n    this.changeAddGenre = event => {\n      event.preventDefault();\n      this.props.changeAddGenre(this.findGenre(event.target.value));\n    };\n\n    this.changeAddPublisher = event => {\n      event.preventDefault();\n      this.props.changeAddPublisher(this.findPublisher(event.target.value));\n    };\n\n    this.changeAddYear = event => {\n      event.preventDefault();\n      this.validateYear(event.target.value, \"isAddYearError\");\n      this.props.changeAddYear(event.target.value);\n    };\n\n    this.changeAddAmountOfPages = event => {\n      event.preventDefault();\n      this.validatePages(event.target.value, \"isAddPagesError\");\n      this.props.changeAddPages(event.target.value);\n    };\n\n    this.changeEditTitle = event => {\n      event.preventDefault();\n      this.validateWord(event.target.value, \"isEditTitleError\");\n      this.props.changeEditTitle(event.target.value);\n    };\n\n    this.changeEditAuthor = event => {\n      event.preventDefault();\n      this.props.changeEditAuthor(this.findAuthor(event.target.value));\n    };\n\n    this.changeEditGenre = event => {\n      event.preventDefault();\n      this.props.changeEditGenre(this.findGenre(event.target.value));\n    };\n\n    this.changeEditPublisher = event => {\n      event.preventDefault();\n      this.props.changeEditPublisher(this.findPublisher(event.target.value));\n    };\n\n    this.changeEditYear = event => {\n      event.preventDefault();\n      this.validateYear(event.target.value, \"isEditYearError\");\n      this.props.changeEditYear(event.target.value);\n    };\n\n    this.changeEditAmountOfPages = event => {\n      event.preventDefault();\n      this.validatePages(event.target.value, \"isEditPagesError\");\n      this.props.changeEditPages(event.target.value);\n    };\n\n    this.onAddClick = async event => {\n      event.preventDefault();\n\n      if (!this.props.isEditWindow) {\n        const value = this.props.isAddWindow;\n\n        if (value) {\n          this.changeErrorState(\"isAddTitleError\", \"\", false);\n          this.changeErrorState(\"isAddYearError\", \"\", false);\n          this.changeErrorState(\"isAddPagesError\", \"\", false);\n          this.props.changeAddTitle(\"\");\n          this.props.changeAddYear(\"\");\n          this.props.changeAddPages(\"\");\n          this.props.changeAddAuthor(this.props.authors[0]);\n          this.props.changeAddPublisher(this.props.publishers[0]);\n          this.props.changeAddGenre(this.props.genres[0]);\n        }\n\n        this.props.changeAddWindow(!value);\n      } else {\n        alert(\"You have opened edit window\");\n      }\n    };\n\n    this.onEditClick = async event => {\n      event.preventDefault();\n\n      if (!this.props.isAddWindow) {\n        if (this.props.selectedItem != null) {\n          const value = this.props.isEditWindow;\n          this.props.changeEditWindow(!value);\n        } else {\n          alert(\"You did not choose genre!\");\n        }\n      } else {\n        alert(\"You have opened add window\");\n      }\n    };\n\n    this.onDeleteClick = async event => {\n      event.preventDefault();\n\n      if (this.props.selectedItem != null) {\n        await this.props.libraryService.deleteBook(this.props.selectedItem);\n        this.props.onRequest();\n        this.getAllBooks();\n      } else {\n        alert(\"You did not choose genre!\");\n      }\n    };\n\n    this.addBook = async event => {\n      event.preventDefault();\n      const {\n        addTitle,\n        addAuthor,\n        addGenre,\n        addYear,\n        addPublisher,\n        addAmountOfPages\n      } = this.props.addBook;\n      await this.validateWord(addTitle, \"isAddTitleError\");\n      await this.validateWord(addYear, \"isAddYearError\");\n      await this.validateWord(addAmountOfPages, \"isAddPagesError\");\n      const isError = this.state.isAddTitleError || this.state.isAddYearError || this.state.isAddPagesError;\n      console.log(this.state.isAddTitleError, this.state.isAddYearError, this.state.isAddPagesError);\n      console.log(isError);\n\n      if (isError) {\n        const book = {\n          title: addTitle,\n          author: addAuthor,\n          genre: addGenre,\n          year: +addYear,\n          publisher: addPublisher,\n          amount_pages: +addAmountOfPages\n        };\n        await this.props.libraryService.addBook(book);\n        this.props.onRequest();\n        this.getAllBooks();\n      }\n    };\n\n    this.editBook = async event => {\n      event.preventDefault();\n      const isError = this.state.isEditTitleError || this.state.isEditYearsError || this.state.isEditPagesError;\n\n      if (!isError) {\n        const {\n          editTitle,\n          editAuthor,\n          editGenre,\n          editYear,\n          editPublisher,\n          editAmountOfPages\n        } = this.props.editBook;\n        const book = {\n          id: this.props.selectedItem,\n          title: editTitle,\n          author: editAuthor,\n          genre: editGenre,\n          year: +editYear,\n          publisher: editPublisher,\n          amount_pages: +editAmountOfPages\n        };\n        await this.props.libraryService.editBook(book);\n        this.props.onRequest();\n        this.getAllBooks();\n      }\n    };\n\n    this.selectedRow = item => {\n      const {\n        id,\n        ...data\n      } = item;\n      const book = {\n        editTitle: data.title,\n        editAuthor: data.author,\n        editGenre: data.genre,\n        editYear: data.year,\n        editPublisher: data.publisher,\n        editAmountOfPages: data.amount_pages\n      };\n      this.props.changeItem({\n        id,\n        book\n      });\n      this.changeErrorState(\"isEditTitleError\", \"\", false);\n      this.changeErrorState(\"isEditYearError\", \"\", false);\n      this.changeErrorState(\"isEditPagesError\", \"\", false);\n    };\n  }\n\n  componentDidMount() {\n    this.props.onRequest();\n    this.getAllAuthors();\n    this.getAllGenres();\n    this.getAllPublishers();\n    this.getAllBooks();\n  }\n\n  render() {\n    if (!this.props.isLoggedIn) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/authorization\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 20\n        }\n      });\n    }\n\n    if (this.props.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 20\n        }\n      });\n    }\n\n    const authors = this.props.authors.map(({\n      id,\n      surname,\n      name,\n      patronymic\n    }) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: id,\n        value: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 17\n        }\n      }, surname, \" \", name, \" \", patronymic);\n    });\n    const genres = this.props.genres.map(({\n      id,\n      name\n    }) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: id,\n        value: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 17\n        }\n      }, name);\n    });\n    const publishers = this.props.publishers.map(({\n      id,\n      publisher\n    }) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: id,\n        value: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 17\n        }\n      }, publisher);\n    });\n    const rows = this.props.books.map(el => {\n      const {\n        id,\n        title,\n        author,\n        genre,\n        year,\n        publisher,\n        amount_pages\n      } = el;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"object_id\",\n        value: id,\n        onClick: () => {\n          this.selectedRow(el);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 21\n        }\n      }, title), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 21\n        }\n      }, author.surname, \" \", author.name, \" \", author.patronymic), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 21\n        }\n      }, genre.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 21\n        }\n      }, year), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 21\n        }\n      }, publisher.publisher), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 21\n        }\n      }, amount_pages));\n    });\n    const {\n      addTitle,\n      addAuthor,\n      addGenre,\n      addYear,\n      addPublisher,\n      addAmountOfPages\n    } = this.props.addBook;\n    const {\n      editTitle,\n      editAuthor,\n      editGenre,\n      editYear,\n      editPublisher,\n      editAmountOfPages\n    } = this.props.editBook;\n    const styleAddTitle = this.state.isAddTitleError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\n    const styleAddYear = this.state.isAddYearError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\n    const styleAddPages = this.state.isAddPagesError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\n    const addWindow = !this.props.isAddWindow ? null : /*#__PURE__*/React.createElement(\"div\", {\n      id: \"add-book-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.addBook,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"books-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write title of new book here...\",\n      className: styleAddTitle,\n      onChange: this.changeAddTitle,\n      value: addTitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 29\n      }\n    }), this.state.isAddTitleError ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"red-text mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 59\n      }\n    }, this.errorTitleMessage) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown d-inline-block mb-2 form-label col ml-0 mr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"add-author-list\",\n      className: \"form-control\",\n      onChange: this.changeAddAuthor,\n      value: addAuthor.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 37\n      }\n    }, authors)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown d-inline-block mb-2 form-label col ml-1 mr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"add-genre-list\",\n      className: \"form-control\",\n      onChange: this.changeAddGenre,\n      value: addGenre.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 37\n      }\n    }, genres)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown d-inline-block mb-2 form-label col ml-1 mr-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"add-publisher-list\",\n      className: \"form-control\",\n      onChange: this.changeAddPublisher,\n      value: addPublisher.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 37\n      }\n    }, publishers))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write year of new book here...\",\n      className: styleAddYear,\n      onChange: this.changeAddYear,\n      value: addYear,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 29\n      }\n    }), this.state.isAddYearError ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"red-text mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 58\n      }\n    }, this.errorYearMessage) : null, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write amount of pages of new book here...\",\n      className: styleAddPages,\n      onChange: this.changeAddAmountOfPages,\n      value: addAmountOfPages,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 29\n      }\n    }), this.state.isAddPagesError ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"red-text mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 59\n      }\n    }, this.errorPagesMessage) : null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info form-button mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 29\n      }\n    }, \"Add\")))));\n    const styleEditTitle = this.state.isEditTitleError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\n    const styleEditYear = this.state.isEditYearError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\n    const styleEditPages = this.state.isEditPagesError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\n    const editWindow = !this.props.isEditWindow ? null : /*#__PURE__*/React.createElement(\"div\", {\n      id: \"edit-book-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.editBook,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"books-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write title of new book here...\",\n      className: styleEditTitle,\n      onChange: this.changeEditTitle,\n      value: editTitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 29\n      }\n    }), this.state.isEditTitleError ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"red-text mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 60\n      }\n    }, this.errorTitleMessage) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown d-inline-block mb-2 form-label col ml-0 mr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"edit-author-list\",\n      className: \"form-control\",\n      onChange: this.changeEditAuthor,\n      value: editAuthor.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 37\n      }\n    }, authors)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown d-inline-block mb-2 form-label col ml-1 mr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"edit-genre-list\",\n      className: \"form-control\",\n      onChange: this.changeEditGenre,\n      value: editGenre.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 37\n      }\n    }, genres)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown d-inline-block mb-2 form-label col ml-1 mr-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"edit-publisher-list\",\n      className: \"form-control\",\n      onChange: this.changeEditPublisher,\n      value: editPublisher.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 37\n      }\n    }, publishers))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write year of new book here...\",\n      className: styleEditYear,\n      onChange: this.changeEditYear,\n      value: editYear,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 29\n      }\n    }), this.state.isEditYearError ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"red-text mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 59\n      }\n    }, this.errorYearMessage) : null, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write amount of pages of new book here...\",\n      className: styleEditPages,\n      onChange: this.changeEditAmountOfPages,\n      value: editAmountOfPages,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 29\n      }\n    }), this.state.isEditPagesError ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"red-text mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 60\n      }\n    }, this.errorPagesMessage) : null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info form-button mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 29\n      }\n    }, \"Update\")))));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container books-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 25\n      }\n    }, \"Books\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"books-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger float-right my-1 item-control\",\n      onClick: this.onDeleteClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-warning float-right my-1 item-control\",\n      onClick: this.onEditClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-pencil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-success float-right my-1 item-control\",\n      onClick: this.onAddClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 25\n      }\n    }), addWindow, editWindow, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 33\n      }\n    }, \"Title\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 33\n      }\n    }, \"Author\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 33\n      }\n    }, \"Genre\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 33\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 33\n      }\n    }, \"Publisher\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 33\n      }\n    }, \"Amount of pages\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 29\n      }\n    }, rows)))));\n  }\n\n}\n\nconst mapStateToProps = ({\n  authorsList,\n  genresList,\n  publishersList,\n  booksList,\n  authorizationBlock\n}) => {\n  return {\n    isLoggedIn: authorizationBlock.isLoggedIn,\n    books: booksList.books,\n    loading: booksList.loading,\n    authors: authorsList.authors,\n    genres: genresList.genres,\n    publishers: publishersList.publishers,\n    isAddWindow: booksList.isAddWindow,\n    isEditWindow: booksList.isEditWindow,\n    addBook: booksList.addBook,\n    editBook: booksList.editBook,\n    selectedItem: booksList.selectedItem\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onRequest: () => {\n      dispatch(booksRequested());\n    },\n    onLoadedAuthors: newAuthors => {\n      dispatch(authorsLoaded(newAuthors));\n    },\n    onLoadedGenres: newGenres => {\n      dispatch(genresLoaded(newGenres));\n    },\n    onLoadedPublishers: newPublishers => {\n      dispatch(publishersLoaded(newPublishers));\n    },\n    onLoaded: newBooks => {\n      dispatch(booksLoaded(newBooks));\n    },\n    changeAddWindow: value => {\n      dispatch(booksShowAddWindow(value));\n    },\n    changeEditWindow: value => {\n      dispatch(booksShowEditWindow(value));\n    },\n    changeAddTitle: value => {\n      dispatch(booksUpdateAddTitleField(value));\n    },\n    changeAddAuthor: value => {\n      dispatch(booksUpdateAddAuthorField(value));\n    },\n    changeAddGenre: value => {\n      dispatch(booksUpdateAddGenreField(value));\n    },\n    changeAddYear: value => {\n      dispatch(booksUpdateAddYearField(value));\n    },\n    changeAddPublisher: value => {\n      dispatch(booksUpdateAddPublisherField(value));\n    },\n    changeAddPages: value => {\n      dispatch(booksUpdateAddPagesField(value));\n    },\n    changeEditTitle: value => {\n      dispatch(booksUpdateEditTitleField(value));\n    },\n    changeEditAuthor: value => {\n      dispatch(booksUpdateEditAuthorField(value));\n    },\n    changeEditGenre: value => {\n      dispatch(booksUpdateEditGenreField(value));\n    },\n    changeEditYear: value => {\n      dispatch(booksUpdateEditYearField(value));\n    },\n    changeEditPublisher: value => {\n      dispatch(booksUpdateEditPublisherField(value));\n    },\n    changeEditPages: value => {\n      dispatch(booksUpdateEditPagesField(value));\n    },\n    changeItem: item => {\n      dispatch(booksUpdateSelectedItem(item));\n    }\n  };\n};\n\nexport default compose(withLibraryService(), connect(mapStateToProps, mapDispatchToProps))(BooksPage);","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/books-page/books-page.js"],"names":["React","Component","Header","Spinner","compose","Redirect","connect","withLibraryService","booksRequested","booksLoaded","booksShowAddWindow","booksShowEditWindow","booksUpdateAddTitleField","booksUpdateAddAuthorField","booksUpdateAddGenreField","booksUpdateAddYearField","booksUpdateAddPublisherField","booksUpdateAddPagesField","booksUpdateEditTitleField","booksUpdateEditAuthorField","booksUpdateEditGenreField","booksUpdateEditYearField","booksUpdateEditPublisherField","booksUpdateEditPagesField","booksUpdateSelectedItem","authorsLoaded","genresLoaded","publishersLoaded","BooksPage","state","isAddTitleError","isAddYearError","isAddPagesError","isEditTitleError","isEditYearError","isEditPagesError","regExpNumber","RegExp","errorTitleMessage","errorYearMessage","errorPagesMessage","validateWord","word","isErrorField","isError","length","changeErrorState","validateYear","year","test","date","Date","getFullYear","validatePages","pages","value","setState","getAllAuthors","authors","props","libraryService","onLoadedAuthors","getAllGenres","genres","onLoadedGenres","getAllPublishers","publishers","onLoadedPublishers","getAllBooks","books","onLoaded","findAuthor","id","find","el","findGenre","findPublisher","changeAddTitle","event","preventDefault","target","changeAddAuthor","changeAddGenre","changeAddPublisher","changeAddYear","changeAddAmountOfPages","changeAddPages","changeEditTitle","changeEditAuthor","changeEditGenre","changeEditPublisher","changeEditYear","changeEditAmountOfPages","changeEditPages","onAddClick","isEditWindow","isAddWindow","changeAddWindow","alert","onEditClick","selectedItem","changeEditWindow","onDeleteClick","deleteBook","onRequest","addBook","addTitle","addAuthor","addGenre","addYear","addPublisher","addAmountOfPages","console","log","book","title","author","genre","publisher","amount_pages","editBook","isEditYearsError","editTitle","editAuthor","editGenre","editYear","editPublisher","editAmountOfPages","selectedRow","item","data","changeItem","componentDidMount","render","isLoggedIn","loading","map","surname","name","patronymic","rows","styleAddTitle","styleAddYear","styleAddPages","addWindow","styleEditTitle","styleEditYear","styleEditPages","editWindow","mapStateToProps","authorsList","genresList","publishersList","booksList","authorizationBlock","mapDispatchToProps","dispatch","newAuthors","newGenres","newPublishers","newBooks"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport Header from \"../header\";\r\nimport Spinner from \"../spinner\";\r\nimport {compose} from \"../../utils\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport withLibraryService from \"../../hoc\";\r\nimport {\r\n    booksRequested,\r\n    booksLoaded,\r\n    booksShowAddWindow,\r\n    booksShowEditWindow,\r\n    booksUpdateAddTitleField,\r\n    booksUpdateAddAuthorField,\r\n    booksUpdateAddGenreField,\r\n    booksUpdateAddYearField,\r\n    booksUpdateAddPublisherField,\r\n    booksUpdateAddPagesField,\r\n    booksUpdateEditTitleField,\r\n    booksUpdateEditAuthorField,\r\n    booksUpdateEditGenreField,\r\n    booksUpdateEditYearField,\r\n    booksUpdateEditPublisherField,\r\n    booksUpdateEditPagesField,\r\n    booksUpdateSelectedItem\r\n} from \"../../actions/books-actions\";\r\nimport {authorsLoaded} from \"../../actions/authors-actions\";\r\nimport {genresLoaded} from \"../../actions/genres-actions\";\r\nimport {publishersLoaded} from \"../../actions/publishers-actions\";\r\nimport \"./books-page.css\";\r\n\r\nclass BooksPage extends Component {\r\n\r\n    // necessary for error handling and pointless, in my opinion, for rendering to the global state\r\n    state = {\r\n        isAddTitleError : false,\r\n        isAddYearError : false,\r\n        isAddPagesError : false,\r\n        isEditTitleError : false,\r\n        isEditYearError : false,\r\n        isEditPagesError : false,\r\n    };\r\n\r\n    //regular expressions for checking entered data\r\n    regExpNumber = new RegExp(\"^[0-9]+$\");\r\n\r\n    //error messages\r\n    errorTitleMessage = \"The length of the book title must be at least 2\";\r\n    errorYearMessage = \"The year must be a four-digit integer no less than 1850 and no more than the current year\";\r\n    errorPagesMessage = \"The number of pages must be an integer no less than 5 and no more than 2000\";\r\n\r\n    componentDidMount() {\r\n        this.props.onRequest();\r\n        this.getAllAuthors();\r\n        this.getAllGenres();\r\n        this.getAllPublishers();\r\n        this.getAllBooks();\r\n    }\r\n\r\n    validateWord = (word, isErrorField) => {\r\n        const isError = word.length < 3;\r\n        this.changeErrorState(isErrorField, isError);\r\n    };\r\n\r\n    validateYear = (year, isErrorField) => {\r\n        let isError = !this.regExpNumber.test(year);\r\n        const date = new Date();\r\n        isError = !isError ? ((year < 1850) || (year > date.getFullYear())) : isError;\r\n        this.changeErrorState(isErrorField,  isError);\r\n    };\r\n\r\n    validatePages= (pages, isErrorField) => {\r\n        let isError = !this.regExpNumber.test(pages);\r\n        isError = !isError ? ((pages < 5) || (pages > 2000)) : isError;\r\n        this.changeErrorState(isErrorField,  isError);\r\n    };\r\n\r\n    changeErrorState = (isErrorField, value) => {\r\n        this.setState({\r\n            [isErrorField] : value\r\n        })\r\n    };\r\n\r\n    getAllAuthors = async () => {\r\n        let authors = await this.props.libraryService.getAllAuthors();\r\n        this.props.onLoadedAuthors(authors);\r\n    };\r\n\r\n    getAllGenres = async () => {\r\n        let genres = await this.props.libraryService.getAllGenres();\r\n        this.props.onLoadedGenres(genres);\r\n    };\r\n\r\n    getAllPublishers = async () => {\r\n        let publishers = await this.props.libraryService.getAllPublishers();\r\n        this.props.onLoadedPublishers(publishers);\r\n    };\r\n\r\n    getAllBooks = async () => {\r\n        const books = await this.props.libraryService.getAllBooks();\r\n        this.props.onLoaded(books);\r\n    };\r\n\r\n    findAuthor = (id) => {\r\n        return this.props.authors.find((el) => el.id === +id);\r\n    };\r\n\r\n    findGenre = (id) => {\r\n        return this.props.genres.find((el) => el.id === +id);\r\n    };\r\n\r\n    findPublisher = (id) => {\r\n        return this.props.publishers.find((el) => el.id === +id);\r\n    };\r\n\r\n    changeAddTitle = event => {\r\n        event.preventDefault();\r\n        this.validateWord(event.target.value, \"isAddTitleError\");\r\n        this.props.changeAddTitle(event.target.value);\r\n    };\r\n\r\n    changeAddAuthor = event => {\r\n        event.preventDefault();\r\n        this.props.changeAddAuthor(this.findAuthor(event.target.value));\r\n    };\r\n\r\n    changeAddGenre = event => {\r\n        event.preventDefault();\r\n        this.props.changeAddGenre(this.findGenre(event.target.value));\r\n    };\r\n\r\n    changeAddPublisher= event => {\r\n        event.preventDefault();\r\n        this.props.changeAddPublisher(this.findPublisher(event.target.value));\r\n    };\r\n\r\n    changeAddYear= event => {\r\n        event.preventDefault();\r\n        this.validateYear(event.target.value, \"isAddYearError\");\r\n        this.props.changeAddYear(event.target.value);\r\n    };\r\n\r\n    changeAddAmountOfPages = event => {\r\n        event.preventDefault();\r\n        this.validatePages(event.target.value, \"isAddPagesError\");\r\n        this.props.changeAddPages(event.target.value);\r\n    };\r\n\r\n    changeEditTitle = event => {\r\n        event.preventDefault();\r\n        this.validateWord(event.target.value, \"isEditTitleError\");\r\n        this.props.changeEditTitle(event.target.value);\r\n    };\r\n\r\n    changeEditAuthor = event => {\r\n        event.preventDefault();\r\n        this.props.changeEditAuthor(this.findAuthor(event.target.value));\r\n    };\r\n\r\n    changeEditGenre = event => {\r\n        event.preventDefault();\r\n        this.props.changeEditGenre(this.findGenre(event.target.value));\r\n    };\r\n\r\n    changeEditPublisher= event => {\r\n        event.preventDefault();\r\n        this.props.changeEditPublisher(this.findPublisher(event.target.value));\r\n    };\r\n\r\n    changeEditYear= event => {\r\n        event.preventDefault();\r\n        this.validateYear(event.target.value, \"isEditYearError\");\r\n        this.props.changeEditYear(event.target.value);\r\n    };\r\n\r\n    changeEditAmountOfPages = event => {\r\n        event.preventDefault();\r\n        this.validatePages(event.target.value, \"isEditPagesError\");\r\n        this.props.changeEditPages(event.target.value);\r\n    };\r\n\r\n    onAddClick = async event => {\r\n        event.preventDefault();\r\n        if(!this.props.isEditWindow) {\r\n            const value = this.props.isAddWindow;\r\n            if(value) {\r\n                this.changeErrorState(\"isAddTitleError\", \"\", false);\r\n                this.changeErrorState(\"isAddYearError\", \"\", false);\r\n                this.changeErrorState(\"isAddPagesError\", \"\", false);\r\n                this.props.changeAddTitle(\"\");\r\n                this.props.changeAddYear(\"\");\r\n                this.props.changeAddPages(\"\");\r\n                this.props.changeAddAuthor(this.props.authors[0]);\r\n                this.props.changeAddPublisher(this.props.publishers[0]);\r\n                this.props.changeAddGenre(this.props.genres[0]);\r\n            }\r\n            this.props.changeAddWindow(!value);\r\n        } else {\r\n            alert(\"You have opened edit window\");\r\n        }\r\n    };\r\n\r\n    onEditClick = async event => {\r\n        event.preventDefault();\r\n        if(!this.props.isAddWindow) {\r\n            if (this.props.selectedItem != null) {\r\n                const value = this.props.isEditWindow;\r\n                this.props.changeEditWindow(!value);\r\n            } else {\r\n                alert(\"You did not choose genre!\");\r\n            }\r\n        } else {\r\n            alert(\"You have opened add window\");\r\n        }\r\n    };\r\n\r\n    onDeleteClick = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.props.selectedItem != null) {\r\n            await this.props.libraryService.deleteBook(this.props.selectedItem);\r\n            this.props.onRequest();\r\n            this.getAllBooks();\r\n        } else {\r\n            alert(\"You did not choose genre!\");\r\n        }\r\n    };\r\n\r\n    addBook = async event => {\r\n        event.preventDefault();\r\n\r\n        const {addTitle, addAuthor, addGenre, addYear, addPublisher, addAmountOfPages} = this.props.addBook;\r\n        await this.validateWord(addTitle, \"isAddTitleError\");\r\n        await this.validateWord(addYear, \"isAddYearError\");\r\n        await this.validateWord(addAmountOfPages, \"isAddPagesError\");\r\n        const isError = this.state.isAddTitleError || this.state.isAddYearError || this.state.isAddPagesError;\r\n\r\n        console.log(this.state.isAddTitleError, this.state.isAddYearError, this.state.isAddPagesError);\r\n        console.log(isError);\r\n\r\n        if(isError) {\r\n            const book = {\r\n                title : addTitle,\r\n                author : addAuthor,\r\n                genre : addGenre,\r\n                year : +addYear,\r\n                publisher : addPublisher,\r\n                amount_pages : +addAmountOfPages\r\n            };\r\n\r\n            await this.props.libraryService.addBook(book);\r\n            this.props.onRequest();\r\n            this.getAllBooks();\r\n        }\r\n    };\r\n\r\n    editBook = async event => {\r\n        event.preventDefault();\r\n\r\n        const isError = this.state.isEditTitleError || this.state.isEditYearsError || this.state.isEditPagesError;\r\n\r\n        if(!isError) {\r\n            const { editTitle, editAuthor, editGenre, editYear, editPublisher, editAmountOfPages} = this.props.editBook;\r\n            const book = {\r\n                id : this.props.selectedItem,\r\n                title : editTitle,\r\n                author : editAuthor,\r\n                genre : editGenre,\r\n                year : +editYear,\r\n                publisher : editPublisher,\r\n                amount_pages : +editAmountOfPages\r\n            };\r\n\r\n            await this.props.libraryService.editBook(book);\r\n            this.props.onRequest();\r\n            this.getAllBooks();\r\n        }\r\n    };\r\n\r\n    selectedRow = (item) => {\r\n        const {id, ...data} = item;\r\n        const book = {\r\n            editTitle : data.title,\r\n            editAuthor : data.author,\r\n            editGenre : data.genre,\r\n            editYear : data.year,\r\n            editPublisher : data.publisher,\r\n            editAmountOfPages : data.amount_pages\r\n        };\r\n        this.props.changeItem({id, book});\r\n        this.changeErrorState(\"isEditTitleError\", \"\", false);\r\n        this.changeErrorState(\"isEditYearError\", \"\", false);\r\n        this.changeErrorState(\"isEditPagesError\", \"\", false);\r\n    };\r\n\r\n    render () {\r\n\r\n        if(!this.props.isLoggedIn) {\r\n            return <Redirect to='/authorization'/>\r\n        }\r\n\r\n        if(this.props.loading){\r\n            return <Spinner/>\r\n        }\r\n\r\n        const authors = this.props.authors.map(({id, surname, name, patronymic} )=> {\r\n            return (\r\n                <option key={id} value={id}>{surname} {name} {patronymic}</option>\r\n            )\r\n        });\r\n\r\n        const genres = this.props.genres.map(({id, name}) => {\r\n            return (\r\n                <option key={id} value={id}>{name}</option>\r\n            )\r\n        });\r\n\r\n        const publishers = this.props.publishers.map(({id, publisher}) => {\r\n            return (\r\n                <option key={id} value={id}>{publisher}</option>\r\n            )\r\n        });\r\n\r\n        const rows = this.props.books.map((el) => {\r\n\r\n            const {id, title, author, genre, year, publisher, amount_pages} = el;\r\n\r\n            return (\r\n                <tr key={id}>\r\n                    <td><input type=\"radio\" name=\"object_id\" value={id} onClick={() => {this.selectedRow(el)}}/></td>\r\n                    <td>{title}</td>\r\n                    <td>{author.surname} {author.name} {author.patronymic}</td>\r\n                    <td>{genre.name}</td>\r\n                    <td>{year}</td>\r\n                    <td>{publisher.publisher}</td>\r\n                    <td>{amount_pages}</td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        const {addTitle, addAuthor, addGenre, addYear, addPublisher, addAmountOfPages} = this.props.addBook;\r\n        const {editTitle, editAuthor, editGenre, editYear, editPublisher, editAmountOfPages} = this.props.editBook;\r\n\r\n        const styleAddTitle = this.state.isAddTitleError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\r\n        const styleAddYear = this.state.isAddYearError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\r\n        const styleAddPages = this.state.isAddPagesError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\r\n\r\n        const addWindow = !this.props.isAddWindow ? null :\r\n            <div id=\"add-book-block\">\r\n                <div className=\"card card-body mb-2\">\r\n                    <form onSubmit={this.addBook}>\r\n                        <div className=\"books-form\">\r\n                            <input type=\"text\" placeholder=\"Write title of new book here...\" className={styleAddTitle} onChange={this.changeAddTitle} value={addTitle}/>\r\n                            {this.state.isAddTitleError ? <div className=\"red-text mb-2\">{this.errorTitleMessage}</div> : null}\r\n                            <div className=\"row\">\r\n\r\n                                <div className=\"dropdown d-inline-block mb-2 form-label col ml-0 mr-1\">\r\n                                    <select id=\"add-author-list\" className=\"form-control\" onChange={this.changeAddAuthor} value={addAuthor.id}>\r\n                                        {authors}\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"dropdown d-inline-block mb-2 form-label col ml-1 mr-1\">\r\n                                    <select id=\"add-genre-list\" className=\"form-control\" onChange={this.changeAddGenre} value={addGenre.id}>\r\n                                        {genres}\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"dropdown d-inline-block mb-2 form-label col ml-1 mr-0\">\r\n                                    <select id=\"add-publisher-list\" className=\"form-control\" onChange={this.changeAddPublisher} value={addPublisher.id}>\r\n                                        {publishers}\r\n                                    </select>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                            <input type=\"text\" placeholder=\"Write year of new book here...\" className={styleAddYear} onChange={this.changeAddYear} value={addYear}/>\r\n                            {this.state.isAddYearError ? <div className=\"red-text mb-2\">{this.errorYearMessage}</div> : null}\r\n                            <input type=\"text\" placeholder=\"Write amount of pages of new book here...\" className={styleAddPages} onChange={this.changeAddAmountOfPages} value={addAmountOfPages}/>\r\n                            {this.state.isAddPagesError ? <div className=\"red-text mb-2\">{this.errorPagesMessage}</div> : null}\r\n                            <button type=\"submit\" className=\"btn btn-info form-button mt-2\">Add</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>;\r\n\r\n        const styleEditTitle = this.state.isEditTitleError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\r\n        const styleEditYear = this.state.isEditYearError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\r\n        const styleEditPages = this.state.isEditPagesError ? \"form-control mb-2 form-label red-box\" : \"form-control mb-2 form-label\";\r\n\r\n        const editWindow = !this.props.isEditWindow ? null :\r\n            <div id=\"edit-book-block\">\r\n                <div className=\"card card-body mb-2\">\r\n                    <form onSubmit={this.editBook}>\r\n                        <div className=\"books-form\">\r\n                            <input type=\"text\" placeholder=\"Write title of new book here...\" className={styleEditTitle}onChange={this.changeEditTitle} value={editTitle}/>\r\n                            {this.state.isEditTitleError ? <div className=\"red-text mb-2\">{this.errorTitleMessage}</div> : null}\r\n                            <div className=\"row\">\r\n                                <div className=\"dropdown d-inline-block mb-2 form-label col ml-0 mr-1\">\r\n                                    <select id=\"edit-author-list\" className=\"form-control\" onChange={this.changeEditAuthor} value={editAuthor.id}>\r\n                                        {authors}\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"dropdown d-inline-block mb-2 form-label col ml-1 mr-1\">\r\n                                    <select id=\"edit-genre-list\" className=\"form-control\" onChange={this.changeEditGenre} value={editGenre.id}>\r\n                                        {genres}\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"dropdown d-inline-block mb-2 form-label col ml-1 mr-0\">\r\n                                    <select id=\"edit-publisher-list\" className=\"form-control\" onChange={this.changeEditPublisher} value={editPublisher.id}>\r\n                                        {publishers}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <input type=\"text\" placeholder=\"Write year of new book here...\" className={styleEditYear} onChange={this.changeEditYear} value={editYear}/>\r\n                            {this.state.isEditYearError ? <div className=\"red-text mb-2\">{this.errorYearMessage}</div> : null}\r\n                            <input type=\"text\" placeholder=\"Write amount of pages of new book here...\" className={styleEditPages} onChange={this.changeEditAmountOfPages} value={editAmountOfPages}/>\r\n                            {this.state.isEditPagesError ? <div className=\"red-text mb-2\">{this.errorPagesMessage}</div> : null}\r\n                            <button type=\"submit\" className=\"btn btn-info form-button mt-2\">Update</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>;\r\n\r\n        return (\r\n            <div>\r\n                <Header/>\r\n\r\n                <main role=\"main\">\r\n\r\n                    <div className=\"container books-page\">\r\n                        <h1>Books</h1>\r\n\r\n                        <div className=\"books-tools\">\r\n                            <button className=\"btn btn-outline-danger float-right my-1 item-control\" onClick={this.onDeleteClick}>\r\n                                <i className=\"fa fa-trash-o\"/>\r\n                            </button>\r\n\r\n                            <button className=\"btn btn-outline-warning float-right my-1 item-control\" onClick={this.onEditClick}>\r\n                                <i className=\"fa fa-pencil\"/>\r\n                            </button>\r\n\r\n                            <button className=\"btn btn-outline-success float-right my-1 item-control\" onClick={this.onAddClick}>\r\n                                <i className=\"fa fa-plus\"/>\r\n                            </button>\r\n                        </div>\r\n\r\n                        <br/>\r\n                        <br/>\r\n\r\n                        {addWindow}\r\n\r\n                        {editWindow}\r\n\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Title</th>\r\n                                <th>Author</th>\r\n                                <th>Genre</th>\r\n                                <th>Year</th>\r\n                                <th>Publisher</th>\r\n                                <th>Amount of pages</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {rows}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </main>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({authorsList, genresList, publishersList, booksList, authorizationBlock}) => {\r\n    return {\r\n        isLoggedIn : authorizationBlock.isLoggedIn,\r\n        books : booksList.books,\r\n        loading : booksList.loading,\r\n        authors : authorsList.authors,\r\n        genres : genresList.genres,\r\n        publishers : publishersList.publishers,\r\n        isAddWindow : booksList.isAddWindow,\r\n        isEditWindow : booksList.isEditWindow,\r\n        addBook : booksList.addBook,\r\n        editBook : booksList.editBook,\r\n        selectedItem : booksList.selectedItem\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onRequest : () => {dispatch(booksRequested())},\r\n        onLoadedAuthors : (newAuthors) => {dispatch(authorsLoaded(newAuthors))},\r\n        onLoadedGenres : (newGenres) => {dispatch(genresLoaded(newGenres))},\r\n        onLoadedPublishers : (newPublishers) => {dispatch(publishersLoaded(newPublishers))},\r\n        onLoaded : (newBooks) => {dispatch(booksLoaded(newBooks))},\r\n        changeAddWindow : (value) => {dispatch(booksShowAddWindow(value))},\r\n        changeEditWindow : (value) => {dispatch(booksShowEditWindow(value))},\r\n        changeAddTitle : (value) => {dispatch(booksUpdateAddTitleField(value))},\r\n        changeAddAuthor : (value) => {dispatch(booksUpdateAddAuthorField(value))},\r\n        changeAddGenre : (value) => {dispatch(booksUpdateAddGenreField(value))},\r\n        changeAddYear : (value) => {dispatch(booksUpdateAddYearField(value))},\r\n        changeAddPublisher : (value) => {dispatch(booksUpdateAddPublisherField(value))},\r\n        changeAddPages : (value) => {dispatch(booksUpdateAddPagesField(value))},\r\n        changeEditTitle : (value) => {dispatch(booksUpdateEditTitleField(value))},\r\n        changeEditAuthor : (value) => {dispatch(booksUpdateEditAuthorField(value))},\r\n        changeEditGenre : (value) => {dispatch(booksUpdateEditGenreField(value))},\r\n        changeEditYear : (value) => {dispatch(booksUpdateEditYearField(value))},\r\n        changeEditPublisher : (value) => {dispatch(booksUpdateEditPublisherField(value))},\r\n        changeEditPages : (value) => {dispatch(booksUpdateEditPagesField(value))},\r\n        changeItem : (item) => {dispatch(booksUpdateSelectedItem(item))}\r\n    }\r\n};\r\n\r\nexport default compose(\r\n        withLibraryService(),\r\n        connect(mapStateToProps, mapDispatchToProps)\r\n    )(BooksPage);"]},"metadata":{},"sourceType":"module"}