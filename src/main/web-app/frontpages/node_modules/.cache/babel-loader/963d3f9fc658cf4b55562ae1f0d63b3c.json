{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\genres-page\\\\genres-page.js\";\nimport React, { Component } from 'react';\nimport './genres-page.css';\nimport Header from '../header';\nimport Spinner from '../spinner';\nimport { compose } from \"../../utils\";\nimport { connect } from \"react-redux\";\nimport withLibraryService from \"../../hoc\";\nimport { genresRequested, genresLoaded, genreShowAddWindow, genreShowEditWindow, genreUpdateAddField, genreUpdateEditField, genreUpdateSelectedItem } from \"../../actions/genres-actions\";\n\nclass GenresPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.getAllGenres = async () => {\n      const {\n        libraryService\n      } = this.props;\n      const genres = await libraryService.getAllGenres();\n      this.props.onLoaded(genres);\n    };\n\n    this.onAddGenreChange = event => {\n      event.preventDefault();\n      this.props.onAddFieldChange(event.target.value);\n    };\n\n    this.onEditGenreChange = event => {\n      event.preventDefault();\n      this.props.onEditFieldChange(event.target.value);\n    };\n\n    this.onAddButtonClick = async event => {\n      event.preventDefault();\n      const genre = {\n        name: this.props.addGenreField\n      };\n      await this.props.libraryService.addGenre(genre);\n      this.props.onRequest();\n      this.getAllGenres();\n    };\n\n    this.onEditButtonClick = async event => {\n      event.preventDefault();\n      const genre = {\n        id: this.props.selectedItem,\n        name: this.props.editGenreField\n      };\n      await this.props.libraryService.editGenre(genre);\n      this.props.onRequest();\n      this.getAllGenres();\n    };\n\n    this.onDeleteButtonClick = async event => {\n      event.preventDefault();\n\n      if (this.props.selectedItem != null) {\n        await this.props.libraryService.deleteGenre(this.props.selectedItem);\n        this.props.onRequest();\n        this.getAllGenres();\n      } else {\n        alert(\"You did not choose genre!\");\n      }\n    };\n\n    this.selectedRow = (id, text) => {\n      const item = {\n        id,\n        text\n      };\n      this.props.onItemChange(item);\n    };\n  }\n\n  componentDidMount() {\n    this.props.onRequest();\n    this.getAllGenres();\n  }\n\n  render() {\n    if (this.props.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 20\n        }\n      });\n    }\n\n    const rows = this.props.genres.map(({\n      id,\n      name\n    }) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"object_id\",\n        value: id,\n        onClick: () => {\n          this.selectedRow(id, name);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }\n      }, name));\n    });\n    const addWindow = !this.props.isAddWindow ? null : /*#__PURE__*/React.createElement(\"div\", {\n      id: \"add-genre-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onAddButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new genre here...\",\n      className: \"form-control\",\n      onChange: this.onAddGenreChange,\n      value: this.props.addGenreField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 29\n      }\n    }, \"Add\")))));\n    const editWindow = !this.props.isEditWindow ? null : /*#__PURE__*/React.createElement(\"div\", {\n      id: \"edit-genre-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onEditButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new genre here...\",\n      className: \"form-control\",\n      onChange: this.onEditGenreChange,\n      value: this.props.editGenreField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }\n    }, \"Update\"))));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container genres-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 25\n      }\n    }, \"Genres\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genres-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger float-right my-1 item-control\",\n      onClick: this.onDeleteButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-warning float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#edit-genre-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-pencil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-success float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#add-genre-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 25\n      }\n    }), addWindow, editWindow, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 33\n      }\n    }, \"Name\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 29\n      }\n    }, rows)))));\n  }\n\n}\n\nconst mapStateToProps = ({\n  genresList\n}) => {\n  return {\n    genres: genresList.genres,\n    loading: genresList.loading,\n    error: genresList.error,\n    isAddWindow: genresList.isAddWindow,\n    isEditWindow: genresList.isEditWindow,\n    addGenreField: genresList.addGenreField,\n    editGenreField: genresList.editGenreField,\n    selectedItem: genresList.selectedItem\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onRequest: () => {\n      dispatch(genresRequested());\n    },\n    onLoaded: newGenres => {\n      dispatch(genresLoaded(newGenres));\n    },\n    changeAddWindow: value => {\n      dispatch(genreShowAddWindow(value));\n    },\n    changeEditWindow: value => {\n      dispatch(genreShowEditWindow(value));\n    },\n    onAddFieldChange: value => {\n      dispatch(genreUpdateAddField(value));\n    },\n    onEditFieldChange: value => {\n      dispatch(genreUpdateEditField(value));\n    },\n    onItemChange: item => {\n      dispatch(genreUpdateSelectedItem(item));\n    }\n  };\n};\n\nexport default compose(withLibraryService(), connect(mapStateToProps, mapDispatchToProps))(GenresPage);","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/genres-page/genres-page.js"],"names":["React","Component","Header","Spinner","compose","connect","withLibraryService","genresRequested","genresLoaded","genreShowAddWindow","genreShowEditWindow","genreUpdateAddField","genreUpdateEditField","genreUpdateSelectedItem","GenresPage","getAllGenres","libraryService","props","genres","onLoaded","onAddGenreChange","event","preventDefault","onAddFieldChange","target","value","onEditGenreChange","onEditFieldChange","onAddButtonClick","genre","name","addGenreField","addGenre","onRequest","onEditButtonClick","id","selectedItem","editGenreField","editGenre","onDeleteButtonClick","deleteGenre","alert","selectedRow","text","item","onItemChange","componentDidMount","render","loading","rows","map","addWindow","isAddWindow","editWindow","isEditWindow","mapStateToProps","genresList","error","mapDispatchToProps","dispatch","newGenres","changeAddWindow","changeEditWindow"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport './genres-page.css';\r\n\r\nimport Header from '../header';\r\nimport Spinner from '../spinner';\r\nimport {compose} from \"../../utils\";\r\nimport {connect} from \"react-redux\";\r\nimport withLibraryService from \"../../hoc\";\r\nimport {genresRequested,\r\n        genresLoaded,\r\n        genreShowAddWindow,\r\n        genreShowEditWindow,\r\n        genreUpdateAddField,\r\n        genreUpdateEditField,\r\n        genreUpdateSelectedItem} from \"../../actions/genres-actions\";\r\n\r\nclass GenresPage extends Component{\r\n\r\n    componentDidMount() {\r\n        this.props.onRequest();\r\n        this.getAllGenres();\r\n    }\r\n\r\n    getAllGenres  = async () => {\r\n        const {libraryService} = this.props;\r\n        const genres = await libraryService.getAllGenres();\r\n        this.props.onLoaded(genres);\r\n    };\r\n\r\n    onAddGenreChange = event => {\r\n        event.preventDefault();\r\n        this.props.onAddFieldChange(event.target.value);\r\n    };\r\n\r\n    onEditGenreChange = event => {\r\n        event.preventDefault();\r\n        this.props.onEditFieldChange(event.target.value);\r\n    };\r\n\r\n    onAddButtonClick = async event => {\r\n        event.preventDefault();\r\n\r\n        const genre = {\r\n            name : this.props.addGenreField\r\n        };\r\n\r\n        await this.props.libraryService.addGenre(genre);\r\n        this.props.onRequest();\r\n        this.getAllGenres();\r\n    };\r\n\r\n    onEditButtonClick = async event => {\r\n        event.preventDefault();\r\n\r\n        const genre = {\r\n            id: this.props.selectedItem,\r\n            name: this.props.editGenreField\r\n        };\r\n\r\n        await this.props.libraryService.editGenre(genre);\r\n        this.props.onRequest();\r\n        this.getAllGenres();\r\n    };\r\n\r\n    onDeleteButtonClick = async event => {\r\n        event.preventDefault();\r\n\r\n\r\n        if (this.props.selectedItem != null) {\r\n            await this.props.libraryService.deleteGenre(this.props.selectedItem);\r\n            this.props.onRequest();\r\n            this.getAllGenres();\r\n        } else {\r\n            alert(\"You did not choose genre!\");\r\n        }\r\n    };\r\n\r\n    selectedRow = (id, text) => {\r\n        const item = {\r\n            id, text\r\n        };\r\n        this.props.onItemChange(item);\r\n    };\r\n\r\n    render () {\r\n\r\n        if(this.props.loading) {\r\n            return <Spinner/>\r\n        }\r\n\r\n        const rows = this.props.genres.map(({id, name}) => {\r\n            return (\r\n                <tr key={id}>\r\n                    <td><input type=\"radio\" name=\"object_id\" value={id} onClick={() => {this.selectedRow(id, name)}}/></td>\r\n                    <td>{name}</td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        const addWindow  = !this.props.isAddWindow ? null :\r\n            <div id=\"add-genre-block\">\r\n                <div className=\"card card-body mb-2\">\r\n                    <form onSubmit={this.onAddButtonClick}>\r\n                        <div className=\"genre-form\">\r\n                            <input type=\"text\" placeholder=\"Write new genre here...\" className=\"form-control\" onChange={this.onAddGenreChange} value={this.props.addGenreField}/>\r\n                            <button type=\"submit\" className=\"btn btn-info auth-button\">Add</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>;\r\n\r\n        const editWindow = !this.props.isEditWindow ? null :\r\n            <div id=\"edit-genre-block\">\r\n                <div className=\"card card-body\">\r\n                    <form onSubmit={this.onEditButtonClick}>\r\n                        <input type=\"text\" placeholder=\"Write new genre here...\" className=\"form-control\" onChange={this.onEditGenreChange} value={this.props.editGenreField}/>\r\n                        <button type=\"submit\" className=\"btn btn-info auth-button\">Update</button>\r\n                    </form>\r\n                </div>\r\n            </div>;\r\n\r\n        return (\r\n            <div>\r\n                <Header/>\r\n\r\n                <main role=\"main\">\r\n\r\n                    <div className=\"container genres-page\">\r\n                        <h1>Genres</h1>\r\n\r\n                        <div className=\"genres-tools\">\r\n                            <button className=\"btn btn-outline-danger float-right my-1 item-control\" onClick={this.onDeleteButtonClick}>\r\n                                <i className=\"fa fa-trash-o\"/>\r\n                            </button>\r\n\r\n                            <a className=\"btn btn-outline-warning float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#edit-genre-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-pencil\"/>\r\n                            </a>\r\n\r\n                            <a className=\"btn btn-outline-success float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#add-genre-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-plus\"/>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <br/>\r\n                        <br/>\r\n\r\n                        {addWindow}\r\n\r\n                        {editWindow}\r\n\r\n                        <table className=\"table mt-2\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Name</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {rows}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </main>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = ({genresList}) => {\r\n    return {\r\n        genres : genresList.genres,\r\n        loading : genresList.loading,\r\n        error : genresList.error,\r\n        isAddWindow :genresList.isAddWindow,\r\n        isEditWindow : genresList.isEditWindow,\r\n        addGenreField : genresList.addGenreField,\r\n        editGenreField: genresList.editGenreField,\r\n        selectedItem: genresList.selectedItem\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onRequest : () => {dispatch(genresRequested())},\r\n        onLoaded : (newGenres) => {dispatch(genresLoaded(newGenres))},\r\n        changeAddWindow : (value) => {dispatch(genreShowAddWindow(value))},\r\n        changeEditWindow : (value) => {dispatch(genreShowEditWindow(value))},\r\n        onAddFieldChange : (value) => {dispatch(genreUpdateAddField(value))},\r\n        onEditFieldChange : (value) => {dispatch(genreUpdateEditField(value))},\r\n        onItemChange : (item) => {dispatch(genreUpdateSelectedItem(item))}\r\n    }\r\n};\r\n\r\nexport default compose(\r\n    withLibraryService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n    )(GenresPage);"]},"metadata":{},"sourceType":"module"}