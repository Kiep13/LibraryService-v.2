{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\homepage\\\\homepage.js\";\nimport React, { Component } from 'react';\nimport './homepage.css';\nimport { Link } from 'react-router-dom';\nimport Spinner from \"../spinner\";\nimport { compose } from \"../../utils\";\nimport { connect } from \"react-redux\";\nimport withLibraryService from \"../../hoc\";\nimport { bookFundRequested, bookFundLoaded } from \"../../actions/book-fund-actions\";\nimport { librariesLoaded } from \"../../actions/libraries-actions\";\nimport { homePageClear, homePageUpdateTitleMask, homePageUpdateAuthorMask, homePageUpdateGenreMask, homePageUpdatePublisherMask, homePageUpdateLibraryId, homePageUpdateSortField, homePageUpdateSearchOptions, homePageClearSearchOptions, homePageUpdateSearchWindow } from \"../../actions/homepage-actions\";\n\nclass HomePage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.fieldsNames = [{\n      key: 'title',\n      value: 'Title'\n    }, {\n      key: 'author',\n      value: 'Author'\n    }, {\n      key: 'genre',\n      value: 'Genre'\n    }, {\n      key: 'year',\n      value: 'Year'\n    }, {\n      key: 'publisher',\n      value: 'Publisher'\n    }, {\n      key: 'pages',\n      value: 'Pages'\n    }, {\n      key: 'library',\n      value: 'Library'\n    }, {\n      key: 'address',\n      value: 'Address'\n    }, {\n      key: 'telephone',\n      value: 'Telephone'\n    }];\n\n    this.glueAuthor = author => {\n      const {\n        surname,\n        name,\n        patronymic\n      } = author;\n      return surname + \" \" + name + \" \" + patronymic;\n    };\n\n    this.solveTypeSorting = field => {\n      switch (field) {\n        case 'title':\n          return (a, b) => {\n            return a.book.title.localeCompare(b.book.title);\n          };\n\n        case 'author':\n          return (a, b) => {\n            const authorA = this.glueAuthor(a.book.author);\n            const authorB = this.glueAuthor(b.book.author);\n            return authorA.localeCompare(authorB);\n          };\n\n        case 'genre':\n          return (a, b) => {\n            const genreA = a.book.genre.name;\n            const genreB = b.book.genre.name;\n            return genreA.localeCompare(genreB);\n          };\n\n        case 'year':\n          return (a, b) => {\n            const yearA = +a.book.year;\n            const yearB = +b.book.year;\n            if (yearA > yearB) return 1;\n            if (yearA === yearB) return 0;\n            return -1;\n          };\n\n        case 'publisher':\n          return (a, b) => {\n            const publisherA = a.book.publisher.publisher;\n            const publisherB = b.book.publisher.publisher;\n            return publisherA.localeCompare(publisherB);\n          };\n\n        case 'pages':\n          return (a, b) => {\n            const pagesA = +a.book.amount_pages;\n            const pagesB = +b.book.amount_pages;\n            if (pagesA > pagesB) return 1;\n            if (pagesA === pagesB) return 0;\n            return -1;\n          };\n\n        case 'library':\n          return (a, b) => {\n            return a.library.name.localeCompare(b.library.name);\n          };\n\n        case 'address':\n          return (a, b) => {\n            return a.library.address.localeCompare(b.library.address);\n          };\n\n        case 'telephone':\n          return (a, b) => {\n            return a.library.telephone.localeCompare(b.library.telephone);\n          };\n\n        default:\n          return (a, b) => {\n            return a.book.title.localeCompare(b.book.title);\n          };\n      }\n    };\n\n    this.filterUsingSearchOptions = book_fund => {\n      console.log(this.props.officialSearchOptions);\n      const {\n        titleMask,\n        authorMask,\n        genreMask,\n        publisherMask\n      } = this.props.officialSearchOptions;\n      const title_mask = titleMask.toLowerCase();\n      const author_mask = authorMask.toLowerCase();\n      const genre_mask = genreMask.toLowerCase();\n      const publisher_mask = publisherMask.toLowerCase();\n      return book_fund.filter(({\n        book\n      }) => {\n        const author = book.author.surname + book.author.name + \" \" + book.author.patronymic;\n        return ~book.title.toLowerCase().indexOf(titleMask) && ~author.toLowerCase().indexOf(authorMask) && ~book.genre.name.toLowerCase().indexOf(genreMask) && ~book.publisher.publisher.toLowerCase().indexOf(publisherMask);\n      });\n    };\n\n    this.getLibraries = async () => {\n      const libraries = await this.props.libraryService.getAllLibraries();\n      this.props.onLoadedLibraries(libraries);\n    };\n\n    this.getBookFund = async () => {\n      const bookFund = await this.props.libraryService.getBookFund();\n      this.props.onLoaded(bookFund);\n    };\n\n    this.changeLibrary = event => {\n      event.preventDefault();\n      this.props.changeLibrary(event.target.value);\n    };\n\n    this.changeSortField = event => {\n      event.preventDefault();\n      this.props.changeSortField(event.target.value);\n    };\n\n    this.changeSearchWindow = event => {\n      event.preventDefault();\n      this.props.changeSearchWindow(!this.props.isSearchWindow);\n    };\n\n    this.changeTitleMask = event => {\n      event.preventDefault();\n      this.props.changeTitleMask(event.target.value);\n    };\n\n    this.changeAuthorMask = event => {\n      event.preventDefault();\n      this.props.changeAuthorMask(event.target.value);\n    };\n\n    this.changeGenreMask = event => {\n      event.preventDefault();\n      this.props.changeGenreMask(event.target.value);\n    };\n\n    this.changePublisherMask = event => {\n      event.preventDefault();\n      this.props.changePublisherMask(event.target.value);\n    };\n\n    this.changeSearchOptions = event => {\n      event.preventDefault();\n      this.props.changeSearchOptions();\n    };\n\n    this.clearSearchOptions = event => {\n      event.preventDefault();\n      this.props.clearSearchOptions();\n    };\n  }\n\n  componentDidMount() {\n    this.props.onRequest();\n    this.props.clear();\n    this.getLibraries();\n    this.getBookFund();\n  }\n\n  render() {\n    if (this.props.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 20\n        }\n      });\n    }\n\n    let book_fund = this.props.libraryId === \"all\" ? this.props.book_fund : this.props.book_fund.filter(el => {\n      return +el.library.id === +this.props.libraryId;\n    });\n    book_fund = this.filterUsingSearchOptions(book_fund);\n    book_fund.sort(this.solveTypeSorting(this.props.sortField));\n    const rows = book_fund.map(el => {\n      const {\n        id,\n        book,\n        library\n      } = el;\n      const {\n        title,\n        author,\n        genre,\n        year,\n        publisher,\n        amount_pages\n      } = book;\n      const {\n        name,\n        address,\n        telephone\n      } = library;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }\n      }, title), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }\n      }, author.surname, \" \", author.name, \" \", author.patronymic), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }\n      }, genre.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }\n      }, year), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }\n      }, publisher.publisher), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }\n      }, amount_pages), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }\n      }, name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }\n      }, address), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }\n      }, telephone));\n    });\n    const sortItems = this.fieldsNames.map(el => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: el.key,\n        value: el.key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 20\n        }\n      }, el.value);\n    });\n    let librariesList = this.props.libraries.map(library => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: library.id,\n        value: library.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 20\n        }\n      }, library.name);\n    });\n    librariesList = [/*#__PURE__*/React.createElement(\"option\", {\n      key: \"all\",\n      value: \"all\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 27\n      }\n    }, \"All\"), ...librariesList];\n    const {\n      titleMask,\n      authorMask,\n      genreMask,\n      publisherMask\n    } = this.props.searchOptions;\n    const searchWindow = !this.props.isSearchWindow ? null : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2 mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"home-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Specify title here...\",\n      className: \"form-control d-inline-block mb-2 form-label col ml-3 mr-2\",\n      onChange: this.changeTitleMask,\n      value: titleMask,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Specify author here...\",\n      className: \"form-control d-inline-block mb-2 form-label col ml-2 mr-3\",\n      onChange: this.changeAuthorMask,\n      value: authorMask,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Specify genre here...\",\n      className: \"form-control d-inline-block mb-2 form-label col ml-3 mr-2\",\n      onChange: this.changeGenreMask,\n      value: genreMask,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Specify publisher here...\",\n      className: \"form-control d-inline-block mb-2 form-label col ml-2 mr-3\",\n      onChange: this.changePublisherMask,\n      value: publisherMask,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-info form-button mt-2 float-left\",\n      onClick: this.clearSearchOptions,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 21\n      }\n    }, \"Clear options\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-info form-button mt-2\",\n      onClick: this.changeSearchOptions,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 21\n      }\n    }, \"Search\")));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"home-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"blog-header py-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-book home-logo large\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"my-0 mr-md-auto font-weight-normal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 29\n      }\n    }, \"LibraryService\"), /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"my-2 my-md-0 mr-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/authorization\",\n      className: \"p-2 text-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 33\n      }\n    }, \"Log in\"))))), /*#__PURE__*/React.createElement(\"main\", {\n      className: \"container home-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"home-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }\n    }, \"BookFund\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"home-tools d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"d-inline-block home-library align-baseline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 25\n      }\n    }, \"Library\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-ldropdown\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      onChange: this.changeLibrary,\n      value: this.props.libraryId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 29\n      }\n    }, librariesList)), /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"d-inline-block home-sort\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 25\n      }\n    }, \"Sort by\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-sdropdown mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      onChange: this.changeSortField,\n      value: this.props.sortField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 29\n      }\n    }, sortItems)), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-info search-button\",\n      onClick: this.changeSearchWindow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 25\n      }\n    }, \"Search options\")), searchWindow, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 29\n      }\n    }, \"Title\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 29\n      }\n    }, \"Author\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 29\n      }\n    }, \"Genre\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 29\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 29\n      }\n    }, \"Publisher\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 29\n      }\n    }, \"Pages\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 29\n      }\n    }, \"Library\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 29\n      }\n    }, \"Address\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 29\n      }\n    }, \"Telephone\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 25\n      }\n    }, rows))));\n  }\n\n}\n\nconst mapStateToProps = ({\n  bookFundList,\n  librariesList,\n  homePage\n}) => {\n  return {\n    book_fund: bookFundList.book_fund,\n    loading: bookFundList.loading,\n    libraries: librariesList.libraries,\n    libraryId: homePage.libraryId,\n    sortField: homePage.sortField,\n    isSearchWindow: homePage.isSearchWindow,\n    searchOptions: homePage.searchOptions,\n    officialSearchOptions: homePage.officialSearchOptions\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    clear: () => {\n      dispatch(homePageClear());\n    },\n    onRequest: () => {\n      dispatch(bookFundRequested());\n    },\n    onLoaded: newBookFund => {\n      dispatch(bookFundLoaded(newBookFund));\n    },\n    onLoadedLibraries: newLibraries => {\n      dispatch(librariesLoaded(newLibraries));\n    },\n    changeLibrary: value => {\n      dispatch(homePageUpdateLibraryId(value));\n    },\n    changeSortField: value => {\n      dispatch(homePageUpdateSortField(value));\n    },\n    changeSearchWindow: value => {\n      dispatch(homePageUpdateSearchWindow(value));\n    },\n    changeTitleMask: value => {\n      dispatch(homePageUpdateTitleMask(value));\n    },\n    changeAuthorMask: value => {\n      dispatch(homePageUpdateAuthorMask(value));\n    },\n    changeGenreMask: value => {\n      dispatch(homePageUpdateGenreMask(value));\n    },\n    changePublisherMask: value => {\n      dispatch(homePageUpdatePublisherMask(value));\n    },\n    changeSearchOptions: () => {\n      dispatch(homePageUpdateSearchOptions());\n    },\n    clearSearchOptions: () => {\n      dispatch(homePageClearSearchOptions());\n    }\n  };\n};\n\nexport default compose(withLibraryService(), connect(mapStateToProps, mapDispatchToProps))(HomePage);","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/homepage/homepage.js"],"names":["React","Component","Link","Spinner","compose","connect","withLibraryService","bookFundRequested","bookFundLoaded","librariesLoaded","homePageClear","homePageUpdateTitleMask","homePageUpdateAuthorMask","homePageUpdateGenreMask","homePageUpdatePublisherMask","homePageUpdateLibraryId","homePageUpdateSortField","homePageUpdateSearchOptions","homePageClearSearchOptions","homePageUpdateSearchWindow","HomePage","fieldsNames","key","value","glueAuthor","author","surname","name","patronymic","solveTypeSorting","field","a","b","book","title","localeCompare","authorA","authorB","genreA","genre","genreB","yearA","year","yearB","publisherA","publisher","publisherB","pagesA","amount_pages","pagesB","library","address","telephone","filterUsingSearchOptions","book_fund","console","log","props","officialSearchOptions","titleMask","authorMask","genreMask","publisherMask","title_mask","toLowerCase","author_mask","genre_mask","publisher_mask","filter","indexOf","getLibraries","libraries","libraryService","getAllLibraries","onLoadedLibraries","getBookFund","bookFund","onLoaded","changeLibrary","event","preventDefault","target","changeSortField","changeSearchWindow","isSearchWindow","changeTitleMask","changeAuthorMask","changeGenreMask","changePublisherMask","changeSearchOptions","clearSearchOptions","componentDidMount","onRequest","clear","render","loading","libraryId","el","id","sort","sortField","rows","map","sortItems","librariesList","searchOptions","searchWindow","mapStateToProps","bookFundList","homePage","mapDispatchToProps","dispatch","newBookFund","newLibraries"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport './homepage.css';\r\nimport {Link} from 'react-router-dom';\r\nimport Spinner from \"../spinner\";\r\nimport {compose} from \"../../utils\";\r\nimport {connect} from \"react-redux\";\r\nimport withLibraryService from \"../../hoc\";\r\nimport {\r\n    bookFundRequested,\r\n    bookFundLoaded\r\n} from \"../../actions/book-fund-actions\";\r\nimport {librariesLoaded} from \"../../actions/libraries-actions\";\r\nimport {homePageClear,\r\n        homePageUpdateTitleMask,\r\n        homePageUpdateAuthorMask,\r\n        homePageUpdateGenreMask,\r\n        homePageUpdatePublisherMask,\r\n        homePageUpdateLibraryId,\r\n        homePageUpdateSortField,\r\n        homePageUpdateSearchOptions,\r\n        homePageClearSearchOptions,\r\n        homePageUpdateSearchWindow} from \"../../actions/homepage-actions\";\r\n\r\n\r\nclass HomePage extends Component{\r\n\r\n    fieldsNames = [\r\n        {key : 'title', value : 'Title'},\r\n        {key : 'author', value : 'Author'},\r\n        {key : 'genre', value : 'Genre'},\r\n        {key : 'year', value : 'Year'},\r\n        {key : 'publisher', value : 'Publisher'},\r\n        {key : 'pages', value : 'Pages'},\r\n        {key : 'library', value : 'Library'},\r\n        {key : 'address', value : 'Address'},\r\n        {key : 'telephone', value : 'Telephone'},\r\n    ];\r\n\r\n    componentDidMount() {\r\n        this.props.onRequest();\r\n        this.props.clear();\r\n        this.getLibraries();\r\n        this.getBookFund();\r\n    }\r\n\r\n    glueAuthor = (author) => {\r\n        const { surname, name, patronymic} = author;\r\n        return surname + \" \" + name + \" \" + patronymic;\r\n    };\r\n\r\n    solveTypeSorting = (field) => {\r\n        switch(field) {\r\n            case 'title' :\r\n                return (a, b) => {\r\n                    return  a.book.title.localeCompare(b.book.title);\r\n                };\r\n            case 'author' :\r\n                return (a, b) => {\r\n                    const authorA = this.glueAuthor(a.book.author);\r\n                    const authorB = this.glueAuthor(b.book.author);\r\n                    return authorA.localeCompare(authorB);\r\n                };\r\n            case 'genre' :\r\n                return (a, b) => {\r\n                    const genreA = a.book.genre.name;\r\n                    const genreB = b.book.genre.name;\r\n                    return genreA.localeCompare(genreB);\r\n                };\r\n            case 'year' :\r\n                return (a, b) => {\r\n                    const yearA = +a.book.year;\r\n                    const yearB = +b.book.year;\r\n                    if(yearA > yearB) return 1;\r\n                    if(yearA === yearB) return 0;\r\n                    return -1;\r\n                };\r\n            case 'publisher' :\r\n                return (a, b) => {\r\n                    const publisherA = a.book.publisher.publisher;\r\n                    const publisherB = b.book.publisher.publisher;\r\n                    return publisherA.localeCompare(publisherB);\r\n                };\r\n            case 'pages' :\r\n                return (a, b) => {\r\n                    const pagesA = +a.book.amount_pages;\r\n                    const pagesB = +b.book.amount_pages;\r\n                    if(pagesA > pagesB) return 1;\r\n                    if(pagesA === pagesB) return 0;\r\n                    return -1;\r\n                };\r\n            case 'library' :\r\n                return (a, b) => {\r\n                    return  a.library.name.localeCompare(b.library.name);\r\n                };\r\n            case 'address' :\r\n                return (a, b) => {\r\n                    return  a.library.address.localeCompare(b.library.address);\r\n                };\r\n            case 'telephone' :\r\n                return (a, b) => {\r\n                    return  a.library.telephone.localeCompare(b.library.telephone);\r\n                };\r\n            default :\r\n                return (a, b) => {\r\n                    return a.book.title.localeCompare(b.book.title);\r\n                }\r\n        }\r\n    };\r\n\r\n    filterUsingSearchOptions = (book_fund) => {\r\n        console.log(this.props.officialSearchOptions);\r\n        const {titleMask, authorMask, genreMask, publisherMask} = this.props.officialSearchOptions;\r\n        const title_mask = titleMask.toLowerCase();\r\n        const author_mask = authorMask.toLowerCase();\r\n        const genre_mask = genreMask.toLowerCase();\r\n        const publisher_mask = publisherMask.toLowerCase();\r\n        return book_fund.filter(({book}) => {\r\n            const author = book.author.surname + book.author.name + \" \" + book.author.patronymic;\r\n            return ~book.title.toLowerCase().indexOf(titleMask) &&\r\n                   ~author.toLowerCase().indexOf(authorMask) &&\r\n                   ~book.genre.name.toLowerCase().indexOf(genreMask) &&\r\n                   ~book.publisher.publisher.toLowerCase().indexOf(publisherMask);\r\n\r\n        });\r\n    };\r\n\r\n    getLibraries = async () => {\r\n        const libraries = await this.props.libraryService.getAllLibraries();\r\n        this.props.onLoadedLibraries(libraries);\r\n    };\r\n\r\n    getBookFund = async () => {\r\n        const bookFund = await this.props.libraryService.getBookFund();\r\n        this.props.onLoaded(bookFund);\r\n    };\r\n\r\n    changeLibrary = event => {\r\n        event.preventDefault();\r\n        this.props.changeLibrary(event.target.value);\r\n    };\r\n\r\n    changeSortField = event => {\r\n        event.preventDefault();\r\n        this.props.changeSortField(event.target.value);\r\n    };\r\n\r\n    changeSearchWindow = event => {\r\n        event.preventDefault();\r\n        this.props.changeSearchWindow(!this.props.isSearchWindow)\r\n    };\r\n\r\n    changeTitleMask = event => {\r\n        event.preventDefault();\r\n        this.props.changeTitleMask(event.target.value);\r\n    };\r\n\r\n    changeAuthorMask = event => {\r\n        event.preventDefault();\r\n        this.props.changeAuthorMask(event.target.value);\r\n    };\r\n\r\n    changeGenreMask = event => {\r\n        event.preventDefault();\r\n        this.props.changeGenreMask(event.target.value);\r\n    };\r\n\r\n    changePublisherMask = event => {\r\n        event.preventDefault();\r\n        this.props.changePublisherMask(event.target.value);\r\n    };\r\n\r\n    changeSearchOptions = event => {\r\n        event.preventDefault();\r\n        this.props.changeSearchOptions();\r\n    };\r\n\r\n    clearSearchOptions = event => {\r\n        event.preventDefault();\r\n        this.props.clearSearchOptions();\r\n    }\r\n\r\n    render () {\r\n\r\n        if(this.props.loading){\r\n            return <Spinner/>\r\n        }\r\n\r\n        let book_fund = this.props.libraryId === \"all\" ? this.props.book_fund :\r\n            this.props.book_fund.filter((el) => {\r\n                return +el.library.id === +this.props.libraryId;\r\n            });\r\n\r\n        book_fund = this.filterUsingSearchOptions(book_fund);\r\n        book_fund.sort(this.solveTypeSorting(this.props.sortField));\r\n\r\n\r\n\r\n        const rows = book_fund.map((el) => {\r\n\r\n            const {id, book, library} = el;\r\n            const {title, author, genre, year, publisher, amount_pages } = book;\r\n            const {name, address, telephone} = library;\r\n\r\n            return (\r\n                <tr key={id}>\r\n                    <td>{title}</td>\r\n                    <td>{author.surname} {author.name} {author.patronymic}</td>\r\n                    <td>{genre.name}</td>\r\n                    <td>{year}</td>\r\n                    <td>{publisher.publisher}</td>\r\n                    <td>{amount_pages}</td>\r\n                    <td>{name}</td>\r\n                    <td>{address}</td>\r\n                    <td>{telephone}</td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        const sortItems = this.fieldsNames.map((el) => {\r\n            return <option key={el.key} value={el.key}>{el.value}</option>\r\n        });\r\n\r\n        let librariesList = this.props.libraries.map((library) => {\r\n            return <option key={library.id} value={library.id}>{library.name}</option>\r\n        });\r\n\r\n        librariesList = [ <option key=\"all\" value=\"all\">All</option>, ...librariesList];\r\n\r\n        const {titleMask, authorMask, genreMask, publisherMask} = this.props.searchOptions;\r\n\r\n        const searchWindow = !this.props.isSearchWindow ? null :\r\n            <div className=\"card card-body mb-2 mt-2\">\r\n                <div className=\"home-form\">\r\n                    <div className=\"row\">\r\n                        <input type=\"text\" placeholder=\"Specify title here...\" className=\"form-control d-inline-block mb-2 form-label col ml-3 mr-2\" onChange={this.changeTitleMask} value={titleMask}/>\r\n                        <input type=\"text\" placeholder=\"Specify author here...\" className=\"form-control d-inline-block mb-2 form-label col ml-2 mr-3\" onChange={this.changeAuthorMask} value={authorMask}/>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <input type=\"text\" placeholder=\"Specify genre here...\" className=\"form-control d-inline-block mb-2 form-label col ml-3 mr-2\" onChange={this.changeGenreMask} value={genreMask}/>\r\n                        <input type=\"text\" placeholder=\"Specify publisher here...\" className=\"form-control d-inline-block mb-2 form-label col ml-2 mr-3\" onChange={this.changePublisherMask} value={publisherMask}/>\r\n                    </div>\r\n                    <button className=\"btn btn-info form-button mt-2 float-left\" onClick={this.clearSearchOptions}>Clear options</button>\r\n                    <button className=\"btn btn-info form-button mt-2\" onClick={this.changeSearchOptions}>Search</button>\r\n                </div>\r\n            </div>;\r\n\r\n        return (\r\n            <div>\r\n\r\n                <div className=\"home-header\">\r\n                    <header className=\"blog-header py-3\">\r\n                        <div\r\n                            className=\"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm\">\r\n                            <i className=\"fa fa-book home-logo large\"/>\r\n                            <h5 className=\"my-0 mr-md-auto font-weight-normal\">LibraryService</h5>\r\n                            <nav className=\"my-2 my-md-0 mr-md-3\">\r\n                                <Link to=\"/authorization\" className=\"p-2 text-dark\">Log in</Link>\r\n                            </nav>\r\n                        </div>\r\n                    </header>\r\n                </div>\r\n\r\n\r\n                <main className=\"container home-content\">\r\n\r\n                    <h1 className=\"home-title\">BookFund</h1>\r\n\r\n                    <div className=\"home-tools d-flex\">\r\n\r\n                        <h5 className=\"d-inline-block home-library align-baseline\">Library</h5>\r\n\r\n                        <div className=\"dropdown home-dropdown d-inline-block home-ldropdown\">\r\n                            <select className=\"form-control\" onChange={this.changeLibrary} value={this.props.libraryId}>\r\n                                {librariesList}\r\n                            </select>\r\n                        </div>\r\n\r\n                        <h5 className=\"d-inline-block home-sort\">Sort by</h5>\r\n\r\n                        <div className=\"dropdown home-dropdown d-inline-block home-sdropdown mr-auto\">\r\n                            <select className=\"form-control\" onChange={this.changeSortField} value={this.props.sortField}>\r\n                                {sortItems}\r\n                            </select>\r\n                        </div>\r\n\r\n                        <button type=\"button\" className=\"btn btn-info search-button\" onClick={this.changeSearchWindow}>Search options</button>\r\n\r\n                    </div>\r\n\r\n                    {searchWindow}\r\n\r\n                    <table className=\"table mt-2\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th>Title</th>\r\n                            <th>Author</th>\r\n                            <th>Genre</th>\r\n                            <th>Year</th>\r\n                            <th>Publisher</th>\r\n                            <th>Pages</th>\r\n                            <th>Library</th>\r\n                            <th>Address</th>\r\n                            <th>Telephone</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {rows}\r\n                        </tbody>\r\n                    </table>\r\n\r\n                </main>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps =({bookFundList, librariesList, homePage}) => {\r\n    return {\r\n        book_fund : bookFundList.book_fund,\r\n        loading : bookFundList.loading,\r\n        libraries : librariesList.libraries,\r\n        libraryId : homePage.libraryId,\r\n        sortField: homePage.sortField,\r\n        isSearchWindow : homePage.isSearchWindow,\r\n        searchOptions : homePage.searchOptions,\r\n        officialSearchOptions: homePage.officialSearchOptions\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        clear : () => {dispatch(homePageClear())},\r\n        onRequest : () => {dispatch(bookFundRequested())},\r\n        onLoaded : (newBookFund) => {dispatch(bookFundLoaded(newBookFund))},\r\n        onLoadedLibraries : (newLibraries) => {dispatch(librariesLoaded(newLibraries))},\r\n        changeLibrary : (value) => {dispatch(homePageUpdateLibraryId(value))},\r\n        changeSortField : (value) => {dispatch(homePageUpdateSortField(value))},\r\n        changeSearchWindow : (value) => {dispatch(homePageUpdateSearchWindow(value))},\r\n        changeTitleMask : (value) => {dispatch(homePageUpdateTitleMask(value))},\r\n        changeAuthorMask : (value) => {dispatch(homePageUpdateAuthorMask(value))},\r\n        changeGenreMask : (value) => {dispatch(homePageUpdateGenreMask(value))},\r\n        changePublisherMask : (value) => {dispatch(homePageUpdatePublisherMask(value))},\r\n        changeSearchOptions : () => {dispatch(homePageUpdateSearchOptions())},\r\n        clearSearchOptions : () => {dispatch(homePageClearSearchOptions())}\r\n    }\r\n};\r\n\r\nexport default compose(\r\n    withLibraryService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(HomePage);"]},"metadata":{},"sourceType":"module"}