{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\authorization\\\\authorization-page.js\";\nimport React, { Component } from 'react';\nimport './authorization-page.css';\nimport { Link } from 'react-router-dom';\nimport withLibraryService from \"../../hoc\";\nimport { logIn, authorizationClearFields, authorizationUpdateLoginField, authorizationUpdatePasswordField } from \"../../actions/authorization-actions\";\nimport { withRouter } from \"react-router\";\nimport { compose } from \"../../utils\";\nimport { connect } from \"react-redux\";\n\nclass AuthorizationPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isLoginError: false,\n      isPasswordError: true\n    };\n    this.errorMessage = \"Too short value\";\n\n    this.checkInput = (field, errorNameField) => {\n      const isError = field.length < 4;\n      this.setState({\n        [errorNameField]: isError\n      });\n    };\n\n    this.loginChange = event => {\n      event.preventDefault();\n      this.checkInput(event.target.value, [\"isLoginError\"]);\n      this.props.changeLogin(event.target.value);\n    };\n\n    this.passwordChange = event => {\n      event.preventDefault();\n      this.checkInput(event.target.value, [\"isPasswordError\"]);\n      this.props.changePassword(event.target.value);\n    };\n\n    this.onLogInClick = async event => {\n      event.preventDefault();\n      await this.checkInput(this.props.loginField, [\"isLoginError\"]);\n      await this.checkInput(this.props.passwordField, [\"isPasswordError\"]);\n      const isError = this.state.isLoginError || this.state.isPasswordError;\n\n      if (!isError) {\n        const admin = {\n          login: this.props.loginField,\n          password: this.props.passwordField\n        };\n        const result = await this.props.libraryService.logIn(admin);\n\n        if (result) {\n          this.props.logIn();\n          this.props.history.push('/book-fund');\n        } else {\n          alert(\"Problems trying to log in\");\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.props.clearFields();\n  }\n\n  render() {\n    const styleLoginField = this.state.isLoginError ? \"form-control red-box\" : \"form-control\";\n    const stylePasswordField = this.state.isPasswordError ? \"form-control red-box\" : \"form-control\";\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"auth-screen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"auth-block align-middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"auth-header ml-4 pl-2 mr-5 pr-3 mt-2 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"btn btn-outline-dark float-left item-control\",\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-arrow-left\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"align-baseline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }, \"Authorization\")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onLogInClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"label-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }\n    }, \"Login\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"title\",\n      placeholder: \"...\",\n      className: styleLoginField,\n      onChange: this.loginChange,\n      value: this.props.loginField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 29\n      }\n    })), this.state.isLoginError ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"red-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 52\n      }\n    }, this.errorMessage) : null, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"label-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 25\n      }\n    }, \"Password\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      name: \"anons\",\n      placeholder: \"...\",\n      className: stylePasswordField,\n      onChange: this.passwordChange,\n      value: this.props.passwordField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }\n    })), this.state.isPasswordError ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"red-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 55\n      }\n    }, this.errorMessage) : null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button mt-3 ml-auto mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 25\n      }\n    }, \"Log in\")), /*#__PURE__*/React.createElement(Link, {\n      to: \"./registration\",\n      className: \"btn btn-info reg-button mb-3 mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, \"Registration\")));\n  }\n\n}\n\nconst mapStateToProps = ({\n  authorizationBlock\n}) => {\n  return {\n    loginField: authorizationBlock.loginField,\n    passwordField: authorizationBlock.passwordField\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    logIn: () => {\n      dispatch(logIn());\n    },\n    clearFields: () => {\n      dispatch(authorizationClearFields());\n    },\n    changeLogin: value => {\n      dispatch(authorizationUpdateLoginField(value));\n    },\n    changePassword: value => {\n      dispatch(authorizationUpdatePasswordField(value));\n    }\n  };\n};\n\nexport default compose(withRouter, withLibraryService(), connect(mapStateToProps, mapDispatchToProps))(AuthorizationPage);","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/authorization/authorization-page.js"],"names":["React","Component","Link","withLibraryService","logIn","authorizationClearFields","authorizationUpdateLoginField","authorizationUpdatePasswordField","withRouter","compose","connect","AuthorizationPage","state","isLoginError","isPasswordError","errorMessage","checkInput","field","errorNameField","isError","length","setState","loginChange","event","preventDefault","target","value","props","changeLogin","passwordChange","changePassword","onLogInClick","loginField","passwordField","admin","login","password","result","libraryService","history","push","alert","componentDidMount","clearFields","render","styleLoginField","stylePasswordField","mapStateToProps","authorizationBlock","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport './authorization-page.css';\r\n\r\nimport {Link} from 'react-router-dom';\r\nimport withLibraryService from \"../../hoc\";\r\nimport {\r\n    logIn,\r\n    authorizationClearFields,\r\n    authorizationUpdateLoginField,\r\n    authorizationUpdatePasswordField\r\n} from \"../../actions/authorization-actions\";\r\nimport { withRouter } from \"react-router\";\r\nimport {compose} from \"../../utils\";\r\nimport {connect} from \"react-redux\";\r\n\r\nclass AuthorizationPage extends Component {\r\n\r\n    // necessary for error handling and pointless, in my opinion, for rendering to the global state\r\n    state = {\r\n        isLoginError : false,\r\n        isPasswordError: true\r\n    };\r\n\r\n    //error message\r\n    errorMessage = \"Too short value\";\r\n\r\n    componentDidMount() {\r\n        this.props.clearFields();\r\n    }\r\n\r\n    checkInput= (field, errorNameField) => {\r\n      const isError = field.length < 4;\r\n      this.setState({\r\n          [errorNameField] : isError\r\n      })\r\n    };\r\n\r\n    loginChange = event => {\r\n        event.preventDefault();\r\n        this.checkInput(event.target.value, [\"isLoginError\"]);\r\n        this.props.changeLogin(event.target.value);\r\n    };\r\n\r\n    passwordChange = event => {\r\n        event.preventDefault();\r\n        this.checkInput(event.target.value, [\"isPasswordError\"]);\r\n        this.props.changePassword(event.target.value);\r\n    };\r\n\r\n    onLogInClick = async event => {\r\n        event.preventDefault();\r\n\r\n        await this.checkInput(this.props.loginField, [\"isLoginError\"]);\r\n        await this.checkInput(this.props.passwordField, [\"isPasswordError\"]);\r\n        const isError = this.state.isLoginError || this.state.isPasswordError;\r\n\r\n        if(!isError) {\r\n            const admin = {\r\n                login : this.props.loginField,\r\n                password : this.props.passwordField\r\n            };\r\n\r\n            const result = await this.props.libraryService.logIn(admin);\r\n            if(result) {\r\n                this.props.logIn();\r\n                this.props.history.push('/book-fund');\r\n            } else {\r\n                alert(\"Problems trying to log in\")\r\n            }\r\n        }\r\n    };\r\n\r\n    render () {\r\n\r\n        const styleLoginField = this.state.isLoginError ? \"form-control red-box\" : \"form-control\";\r\n        const stylePasswordField = this.state.isPasswordError ? \"form-control red-box\" : \"form-control\";\r\n\r\n        return (\r\n            <div className=\"auth-screen\">\r\n                <div className=\"auth-block align-middle\">\r\n\r\n                    <div className=\"auth-header ml-4 pl-2 mr-5 pr-3 mt-2 d-flex\">\r\n                        <Link className=\"btn btn-outline-dark float-left item-control\"\r\n                              to=\"/\">\r\n                            <i className=\"fa fa-arrow-left\" aria-hidden=\"true\"/>\r\n                        </Link>\r\n                        <h5 className=\"align-baseline\">Authorization</h5>\r\n                    </div>\r\n\r\n                    <form onSubmit={this.onLogInClick}>\r\n                        <label className=\"label-block\">\r\n                            Login\r\n                            <input type=\"text\" name=\"title\" placeholder=\"...\" className={styleLoginField} onChange={this.loginChange} value={this.props.loginField}/>\r\n                        </label>\r\n                        {this.state.isLoginError ? <div className=\"red-text\">{this.errorMessage}</div> : null}\r\n                        <label className=\"label-block\">\r\n                            Password\r\n                            <input type=\"password\" name=\"anons\" placeholder=\"...\" className={stylePasswordField} onChange={this.passwordChange} value={this.props.passwordField}/>\r\n                        </label>\r\n                        {this.state.isPasswordError ? <div className=\"red-text\">{this.errorMessage}</div> : null}\r\n                        <button type=\"submit\" className=\"btn btn-info auth-button mt-3 ml-auto mr-auto\">Log in</button>\r\n                    </form>\r\n                    <Link to=\"./registration\" className=\"btn btn-info reg-button mb-3 mt-3\">Registration</Link>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({authorizationBlock}) => {\r\n    return {\r\n        loginField : authorizationBlock.loginField,\r\n        passwordField : authorizationBlock.passwordField\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        logIn : () => {dispatch(logIn())},\r\n        clearFields : () => {dispatch(authorizationClearFields())},\r\n        changeLogin : (value) => {dispatch(authorizationUpdateLoginField(value))},\r\n        changePassword : (value) => {dispatch(authorizationUpdatePasswordField(value))}\r\n    }\r\n};\r\n\r\nexport default compose(\r\n    withRouter,\r\n    withLibraryService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(AuthorizationPage);"]},"metadata":{},"sourceType":"module"}