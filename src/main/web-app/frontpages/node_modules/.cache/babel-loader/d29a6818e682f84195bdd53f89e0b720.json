{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\authors-page\\\\authors-page.js\";\nimport React, { Component } from 'react';\nimport Header from \"../header\";\nimport Spinner from \"../spinner\";\nimport axios from \"axios\";\nimport { element } from \"prop-types\";\n\nclass AuthorsPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      authors: [],\n      loading: true,\n      error: false,\n      addAuthor: {\n        addSurname: \"\",\n        addName: \"\",\n        addPatronymic: \"\"\n      },\n      editAuthor: {\n        editSurname: \"\",\n        editName: \"\",\n        editPatronymic: \"\"\n      },\n      selectedItem: null\n    };\n\n    this.getAllAuthors = () => {\n      axios.get(\"http://localhost:8080/authors\").then(response => {\n        this.setState({ ...this.state,\n          authors: response.data,\n          loading: false\n        });\n      });\n    };\n\n    this.onChangeAddSurname = event => {\n      event.preventDefault();\n      this.setState({ ...this.state,\n        addAuthor: { ...this.state.addAuthor,\n          addSurname: event.target.value\n        }\n      });\n    };\n\n    this.onChangeAddName = event => {\n      event.preventDefault();\n      this.setState({ ...this.state,\n        addAuthor: { ...this.state.addAuthor,\n          addName: event.target.value\n        }\n      });\n    };\n\n    this.onChangeAddPatronymic = event => {\n      event.preventDefault();\n      this.setState({ ...this.state,\n        addAuthor: { ...this.state.addAuthor,\n          addPatronymic: event.target.value\n        }\n      });\n    };\n\n    this.onChangeEditSurname = event => {\n      event.preventDefault();\n      this.setState({ ...this.state,\n        editAuthor: { ...this.state.editAuthor,\n          editSurname: event.target.value\n        }\n      });\n    };\n\n    this.onChangeEditName = event => {\n      event.preventDefault();\n      this.setState({ ...this.state,\n        editAuthor: { ...this.state.editAuthor,\n          editName: event.target.value\n        }\n      });\n    };\n\n    this.onChangeEditPatronymic = event => {\n      event.preventDefault();\n      this.setState({ ...this.state,\n        editAuthor: { ...this.state.editAuthor,\n          editPatronymic: event.target.value\n        }\n      });\n    };\n\n    this.onAddAuthor = async event => {\n      event.preventDefault();\n      const {\n        addAuthor: {\n          addSurname,\n          addName,\n          addPatronymic\n        }\n      } = this.state;\n      const author = {\n        surname: addSurname,\n        name: addName,\n        patronymic: addPatronymic\n      };\n      await axios.post(\"http://localhost:8080/author-add\", author).then(responce => {\n        if (responce.data === \"\") {\n          console.log(responce.data);\n        }\n      });\n      this.getAllAuthors();\n    };\n\n    this.onEditAuthor = async event => {\n      event.preventDefault();\n      const {\n        editAuthor: {\n          editSurname,\n          editName,\n          editPatronymic\n        }\n      } = this.state;\n      const author = {\n        surname: editSurname,\n        name: editName,\n        patronymic: editPatronymic\n      };\n      console.log('edit');\n      await axios.put(\"http://localhost:8080/author-edit\", author).then(response => {\n        if (response.data === \"\") {\n          console.log(response.data);\n        }\n      });\n      this.getAllAuthors();\n    };\n\n    this.onDeleteAuthor = async event => {\n      event.preventDefault();\n\n      if (this.state.selectedItem != null) {\n        await axios.delete(`http://localhost:8080/author-delete/${this.state.selectedItem}`).then(responce => {\n          if (responce.data === \"\") {\n            console.log(responce.data);\n          }\n        });\n        this.setState({ ...this.state,\n          selectedItem: null\n        });\n        this.getAllAuthors();\n      }\n    };\n\n    this.selectedRow = (id, surname, name, patronymic) => {\n      this.setState({ ...this.state,\n        editAuthor: {\n          editSurname: surname,\n          editName: name,\n          editPatronymic: patronymic\n        },\n        selectedItem: id\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getAllAuthors();\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 20\n        }\n      });\n    }\n\n    const rows = this.state.authors.map(({\n      id,\n      surname,\n      name,\n      patronymic\n    }) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"object_id\",\n        value: id,\n        onClick: () => {\n          this.selectedRow(id, surname, name, patronymic);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 21\n        }\n      }, surname), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }\n      }, name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }\n      }, patronymic));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container genres-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 25\n      }\n    }, \"Authors\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genres-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-danger float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      role: \"button\",\n      onClick: this.onDeleteAuthor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-warning float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#edit-author-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-pencil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-success float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#add-author-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"add-author-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onAddAuthor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write surname here...\",\n      className: \"form-control mb-2\",\n      onChange: this.onChangeAddSurname,\n      value: this.state.addAuthor.addSurname,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write name here...\",\n      className: \"form-control mb-2\",\n      onChange: this.onChangeAddName,\n      value: this.state.addAuthor.addName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write patronymic here...\",\n      className: \"form-control\",\n      onChange: this.onChangeAddPatronymic,\n      value: this.state.addAuthor.addPatronymic,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 41\n      }\n    }, \"Add\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"edit-author-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onEditAuthor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write surname here...\",\n      className: \"form-control mb-2\",\n      onChange: this.onChangeEditSurname,\n      value: this.state.editAuthor.editSurname,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write name here...\",\n      className: \"form-control mb-2\",\n      onChange: this.onChangeEditName,\n      value: this.state.editAuthor.editName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write patronymic here...\",\n      className: \"form-control\",\n      onChange: this.onChangeEditPatronymic,\n      value: this.state.editAuthor.editPatronymic,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 37\n      }\n    }, \"Update\")))), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 33\n      }\n    }, \"Surname\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 33\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 33\n      }\n    }, \"Patronymic\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 29\n      }\n    }, rows)))));\n  }\n\n}\n\nexport default AuthorsPage;","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/authors-page/authors-page.js"],"names":["React","Component","Header","Spinner","axios","element","AuthorsPage","state","authors","loading","error","addAuthor","addSurname","addName","addPatronymic","editAuthor","editSurname","editName","editPatronymic","selectedItem","getAllAuthors","get","then","response","setState","data","onChangeAddSurname","event","preventDefault","target","value","onChangeAddName","onChangeAddPatronymic","onChangeEditSurname","onChangeEditName","onChangeEditPatronymic","onAddAuthor","author","surname","name","patronymic","post","responce","console","log","onEditAuthor","put","onDeleteAuthor","delete","selectedRow","id","componentDidMount","render","rows","map"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport Header from \"../header\";\r\nimport Spinner from \"../spinner\";\r\nimport axios from \"axios\";\r\nimport {element} from \"prop-types\";\r\n\r\nclass AuthorsPage extends Component {\r\n\r\n    state = {\r\n        authors : [],\r\n        loading : true,\r\n        error : false,\r\n        addAuthor : {\r\n            addSurname : \"\",\r\n            addName : \"\",\r\n            addPatronymic : \"\"\r\n        },\r\n        editAuthor : {\r\n            editSurname : \"\",\r\n            editName : \"\",\r\n            editPatronymic : \"\"\r\n        },\r\n        selectedItem : null\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.getAllAuthors();\r\n    }\r\n\r\n    getAllAuthors = () => {\r\n        axios.get(\"http://localhost:8080/authors\")\r\n            .then(response => {\r\n                this.setState({\r\n                    ...this.state,\r\n                    authors: response.data,\r\n                    loading: false\r\n                })});\r\n    };\r\n\r\n    onChangeAddSurname = event => {\r\n        event.preventDefault();\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            addAuthor : {\r\n                ...this.state.addAuthor,\r\n                addSurname : event.target.value\r\n            }\r\n        })\r\n    };\r\n\r\n    onChangeAddName = event => {\r\n        event.preventDefault();\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            addAuthor : {\r\n                ...this.state.addAuthor,\r\n                addName : event.target.value\r\n            }\r\n        })\r\n    };\r\n\r\n    onChangeAddPatronymic = event => {\r\n        event.preventDefault();\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            addAuthor : {\r\n                ...this.state.addAuthor,\r\n                addPatronymic : event.target.value\r\n            }\r\n        })\r\n    };\r\n\r\n    onChangeEditSurname = event => {\r\n        event.preventDefault();\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            editAuthor : {\r\n                ...this.state.editAuthor,\r\n                editSurname : event.target.value\r\n            }\r\n        })\r\n    };\r\n\r\n    onChangeEditName = event => {\r\n        event.preventDefault();\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            editAuthor : {\r\n                ...this.state.editAuthor,\r\n                editName : event.target.value\r\n            }\r\n        })\r\n    };\r\n\r\n    onChangeEditPatronymic = event => {\r\n        event.preventDefault();\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            editAuthor : {\r\n                ...this.state.editAuthor,\r\n                editPatronymic : event.target.value\r\n            }\r\n        })\r\n    };\r\n\r\n    onAddAuthor = async event => {\r\n        event.preventDefault();\r\n\r\n        const { addAuthor : {addSurname, addName, addPatronymic}} = this.state;\r\n\r\n        const author = {\r\n            surname : addSurname,\r\n            name : addName,\r\n            patronymic : addPatronymic\r\n        };\r\n\r\n        await axios.post(\"http://localhost:8080/author-add\", author)\r\n            .then(responce => {\r\n                if(responce.data === \"\") {\r\n                    console.log(responce.data);\r\n                }\r\n            });\r\n\r\n        this.getAllAuthors();\r\n\r\n    };\r\n\r\n    onEditAuthor = async event => {\r\n        event.preventDefault();\r\n\r\n        const {editAuthor : {editSurname, editName, editPatronymic}} = this.state;\r\n\r\n        const author = {\r\n            surname : editSurname,\r\n            name : editName,\r\n            patronymic : editPatronymic\r\n        };\r\n\r\n        console.log('edit')\r\n\r\n        await axios.put(\"http://localhost:8080/author-edit\", author)\r\n            .then((response => {\r\n                if(response.data === \"\") {\r\n                    console.log(response.data);\r\n                }\r\n            }));\r\n\r\n        this.getAllAuthors()\r\n\r\n    };\r\n\r\n    onDeleteAuthor = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.state.selectedItem != null) {\r\n            await axios.delete(`http://localhost:8080/author-delete/${this.state.selectedItem}`)\r\n                .then(responce => {\r\n                    if (responce.data === \"\") {\r\n                        console.log(responce.data);\r\n                    }\r\n                });\r\n\r\n            this.setState({\r\n                ...this.state,\r\n                selectedItem: null\r\n            });\r\n\r\n            this.getAllAuthors();\r\n        }\r\n\r\n    };\r\n\r\n    selectedRow = (id, surname, name, patronymic) => {\r\n        this.setState({\r\n            ...this.state,\r\n            editAuthor : {\r\n                editSurname: surname,\r\n                editName : name,\r\n                editPatronymic : patronymic\r\n            },\r\n            selectedItem : id\r\n        })\r\n    };\r\n\r\n    render() {\r\n\r\n        if(this.state.loading) {\r\n            return <Spinner/>\r\n        }\r\n\r\n        const rows = this.state.authors.map(({id, surname, name, patronymic}) => {\r\n            return (\r\n                <tr key={id}>\r\n                    <td><input type=\"radio\" name=\"object_id\" value={id} onClick={() => {this.selectedRow(id, surname, name, patronymic)}}/></td>\r\n                    <td>{surname}</td>\r\n                    <td>{name}</td>\r\n                    <td>{patronymic}</td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        return (\r\n\r\n            <div>\r\n                <Header/>\r\n\r\n                <main role=\"main\">\r\n\r\n                    <div className=\"container genres-page\">\r\n                        <h1>Authors</h1>\r\n\r\n                        <div className=\"genres-tools\">\r\n                            <a className=\"btn btn-outline-danger float-right my-1 item-control\" data-toggle=\"collapse\" role=\"button\" onClick={this.onDeleteAuthor}>\r\n                                <i className=\"fa fa-trash-o\"/>\r\n                            </a>\r\n\r\n                            <a className=\"btn btn-outline-warning float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#edit-author-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-pencil\"/>\r\n                            </a>\r\n\r\n                            <a className=\"btn btn-outline-success float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#add-author-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-plus\"/>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <br/>\r\n                        <br/>\r\n\r\n                        <div className=\"collapse\" id=\"add-author-block\">\r\n                            <div className=\"card card-body mb-2\">\r\n                                <form onSubmit={this.onAddAuthor}>\r\n                                    <div className=\"genre-form\">\r\n                                        <input type=\"text\" placeholder=\"Write surname here...\" className=\"form-control mb-2\" onChange={this.onChangeAddSurname} value={this.state.addAuthor.addSurname}/>\r\n                                        <input type=\"text\" placeholder=\"Write name here...\" className=\"form-control mb-2\" onChange={this.onChangeAddName} value={this.state.addAuthor.addName}/>\r\n                                        <input type=\"text\" placeholder=\"Write patronymic here...\" className=\"form-control\" onChange={this.onChangeAddPatronymic} value={this.state.addAuthor.addPatronymic}/>\r\n                                        <button type=\"submit\" className=\"btn btn-info auth-button\">Add</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"collapse\" id=\"edit-author-block\">\r\n                            <div className=\"card card-body\">\r\n                                <form onSubmit={this.onEditAuthor}>\r\n                                    <input type=\"text\" placeholder=\"Write surname here...\" className=\"form-control mb-2\" onChange={this.onChangeEditSurname} value={this.state.editAuthor.editSurname}/>\r\n                                    <input type=\"text\" placeholder=\"Write name here...\" className=\"form-control mb-2\" onChange={this.onChangeEditName} value={this.state.editAuthor.editName}/>\r\n                                    <input type=\"text\" placeholder=\"Write patronymic here...\" className=\"form-control\" onChange={this.onChangeEditPatronymic} value={this.state.editAuthor.editPatronymic}/>\r\n                                    <button type=\"submit\" className=\"btn btn-info auth-button\">Update</button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Surname</th>\r\n                                <th>Name</th>\r\n                                <th>Patronymic</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>{\r\n                                rows\r\n                            }\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </main>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default AuthorsPage;"]},"metadata":{},"sourceType":"module"}