{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\publishers-page\\\\publishers-page.js\";\nimport React, { Component } from \"react\";\nimport \"./publisher-page.css\";\nimport Header from \"../header\";\nimport { compose } from \"../../utils\";\nimport { connect } from \"react-redux\";\nimport withLibraryService from \"../../hoc\";\nimport Spinner from '../spinner';\nimport { publishersRequested, publishersLoaded, publishersShowAddWindow, publishersShowEditWindow, publishersUpdateAddField, publishersUpdateEditField, publishersUpdateSelectedItem } from \"../../actions/publishers-actions\";\n\nclass PublishersPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.getAllPublishers = async () => {\n      const publishers = await this.props.libraryService.getAllPublishers();\n      this.props.onLoaded(publishers);\n    };\n\n    this.changeAddPublisher = event => {\n      event.preventDefault();\n      this.props.changeAddField(event.target.value);\n    };\n\n    this.changeEditPublisher = event => {\n      event.preventDefault();\n      this.props.changeEditField(event.target.value);\n    };\n\n    this.onAddPublisher = async event => {\n      event.preventDefault();\n      const publisher = {\n        publisher: this.props.addPublisher\n      };\n      await this.props.libraryService.addPublisher(publisher);\n      this.props.onRequest();\n      this.getAllPublishers();\n    };\n\n    this.onEditPublisher = async event => {\n      event.preventDefault();\n\n      if (this.props.selectedItem != null) {\n        const publisher = {\n          id: this.props.selectedItem,\n          publisher: this.props.editPublisher\n        };\n        await this.props.libraryService.editPublisher(publisher);\n        this.props.onRequest();\n        this.getAllPublishers();\n      }\n    };\n\n    this.onDeletePublisher = async event => {\n      event.preventDefault();\n\n      if (this.props.selectedItem != null) {\n        await this.props.libraryService.deletePublisher(this.props.selectedItem);\n        this.props.onRequest();\n        this.getAllPublishers();\n      }\n    };\n\n    this.selectedRow = (id, text) => {\n      this.props.changeItem({\n        id,\n        text\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.onRequest();\n    this.getAllPublishers();\n  }\n\n  render() {\n    if (this.props.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 20\n        }\n      });\n    }\n\n    const rows = this.props.publishers.map(({\n      id,\n      publisher\n    }) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"object_id\",\n        value: id,\n        onClick: () => {\n          this.selectedRow(id, publisher);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }, publisher));\n    });\n    const addWindow = !this.props.isAddWindow ? null : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"add-publisher-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onAddPublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new publisher here...\",\n      className: \"form-control\",\n      onChange: this.changeAddPublisher,\n      value: this.props.addPublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 29\n      }\n    }, \"Add\")))));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container genres-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }\n    }, \"Publishers\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genres-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger float-right my-1 item-control\",\n      onClick: this.onDeletePublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-warning float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#edit-publisher-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-pencil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-success float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#add-publisher-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"add-publisher-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onAddPublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new publisher here...\",\n      className: \"form-control\",\n      onChange: this.changeAddPublisher,\n      value: this.props.addPublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 41\n      }\n    }, \"Add\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"edit-publisher-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onEditPublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new genre here...\",\n      className: \"form-control\",\n      onChange: this.changeEditPublisher,\n      value: this.props.editPublisher,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 37\n      }\n    }, \"Update\")))), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 33\n      }\n    }, \"Name\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 29\n      }\n    }, rows)))));\n  }\n\n}\n\nconst mapStateToProps = ({\n  publishersList\n}) => {\n  return {\n    publishers: publishersList.publishers,\n    loading: publishersList.loading,\n    isAddWindow: publishersList.isAddWindow,\n    isEditWindow: publishersList.isEditWindow,\n    addPublisher: publishersList.addPublisher,\n    editPublisher: publishersList.editPublisher,\n    selectedItem: publishersList.selectedItem\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onRequest: () => {\n      dispatch(publishersRequested());\n    },\n    onLoaded: newPublishers => {\n      dispatch(publishersLoaded(newPublishers));\n    },\n    changeAddWindow: value => {\n      dispatch(publishersShowAddWindow(value));\n    },\n    changeEditWindow: value => {\n      dispatch(publishersShowEditWindow(value));\n    },\n    changeAddField: value => {\n      dispatch(publishersUpdateAddField(value));\n    },\n    changeEditField: value => {\n      dispatch(publishersUpdateEditField(value));\n    },\n    changeItem: item => {\n      dispatch(publishersUpdateSelectedItem(item));\n    }\n  };\n};\n\nexport default compose(withLibraryService(), connect(mapStateToProps, mapDispatchToProps))(PublishersPage);","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/publishers-page/publishers-page.js"],"names":["React","Component","Header","compose","connect","withLibraryService","Spinner","publishersRequested","publishersLoaded","publishersShowAddWindow","publishersShowEditWindow","publishersUpdateAddField","publishersUpdateEditField","publishersUpdateSelectedItem","PublishersPage","getAllPublishers","publishers","props","libraryService","onLoaded","changeAddPublisher","event","preventDefault","changeAddField","target","value","changeEditPublisher","changeEditField","onAddPublisher","publisher","addPublisher","onRequest","onEditPublisher","selectedItem","id","editPublisher","onDeletePublisher","deletePublisher","selectedRow","text","changeItem","componentDidMount","render","loading","rows","map","addWindow","isAddWindow","mapStateToProps","publishersList","isEditWindow","mapDispatchToProps","dispatch","newPublishers","changeAddWindow","changeEditWindow","item"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport \"./publisher-page.css\";\r\nimport Header from \"../header\";\r\nimport {compose} from \"../../utils\";\r\nimport {connect} from \"react-redux\";\r\nimport withLibraryService from \"../../hoc\";\r\nimport Spinner from '../spinner';\r\nimport {\r\n    publishersRequested,\r\n    publishersLoaded,\r\n    publishersShowAddWindow,\r\n    publishersShowEditWindow,\r\n    publishersUpdateAddField,\r\n    publishersUpdateEditField,\r\n    publishersUpdateSelectedItem\r\n} from \"../../actions/publishers-actions\";\r\n\r\nclass PublishersPage extends Component {\r\n\r\n    componentDidMount() {\r\n        this.props.onRequest();\r\n        this.getAllPublishers();\r\n    }\r\n\r\n    getAllPublishers = async () => {\r\n        const publishers = await this.props.libraryService.getAllPublishers();\r\n        this.props.onLoaded(publishers);\r\n    };\r\n\r\n    changeAddPublisher = event => {\r\n        event.preventDefault();\r\n        this.props.changeAddField(event.target.value);\r\n    };\r\n\r\n    changeEditPublisher = event => {\r\n        event.preventDefault();\r\n        this.props.changeEditField(event.target.value);\r\n    };\r\n\r\n    onAddPublisher = async event => {\r\n        event.preventDefault();\r\n\r\n        const publisher = {\r\n            publisher : this.props.addPublisher\r\n        };\r\n\r\n        await this.props.libraryService.addPublisher(publisher);\r\n        this.props.onRequest();\r\n        this.getAllPublishers();\r\n    };\r\n\r\n    onEditPublisher = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.props.selectedItem != null) {\r\n            const publisher = {\r\n                id : this.props.selectedItem,\r\n                publisher : this.props.editPublisher\r\n            };\r\n\r\n            await this.props.libraryService.editPublisher(publisher);\r\n            this.props.onRequest();\r\n            this.getAllPublishers();\r\n        }\r\n    };\r\n\r\n    onDeletePublisher = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.props.selectedItem != null) {\r\n            await this.props.libraryService.deletePublisher(this.props.selectedItem);\r\n            this.props.onRequest();\r\n            this.getAllPublishers();\r\n        }\r\n    };\r\n\r\n    selectedRow = (id, text) => {\r\n        this.props.changeItem({id, text});\r\n    };\r\n\r\n    render() {\r\n\r\n        if(this.props.loading) {\r\n            return <Spinner/>;\r\n        }\r\n\r\n        const rows = this.props.publishers.map(({id, publisher}) => {\r\n            return (\r\n                <tr key={id}>\r\n                    <td><input type=\"radio\" name=\"object_id\" value={id} onClick={() => {this.selectedRow(id, publisher)}}/></td>\r\n                    <td>{publisher}</td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        const addWindow = !this.props.isAddWindow ? null :\r\n            <div className=\"collapse\" id=\"add-publisher-block\">\r\n                <div className=\"card card-body mb-2\">\r\n                    <form onSubmit={this.onAddPublisher}>\r\n                        <div className=\"genre-form\">\r\n                            <input type=\"text\" placeholder=\"Write new publisher here...\" className=\"form-control\" onChange={this.changeAddPublisher} value={this.props.addPublisher}/>\r\n                            <button type=\"submit\" className=\"btn btn-info auth-button\">Add</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>;\r\n\r\n\r\n\r\n        return (\r\n            <div>\r\n                <Header/>\r\n\r\n                <main role=\"main\">\r\n\r\n                    <div className=\"container genres-page\">\r\n                        <h1>Publishers</h1>\r\n\r\n                        <div className=\"genres-tools\">\r\n                            <button className=\"btn btn-outline-danger float-right my-1 item-control\" onClick={this.onDeletePublisher}>\r\n                                <i className=\"fa fa-trash-o\"/>\r\n                            </button>\r\n\r\n                            <a className=\"btn btn-outline-warning float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#edit-publisher-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-pencil\"/>\r\n                            </a>\r\n\r\n                            <a className=\"btn btn-outline-success float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#add-publisher-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-plus\"/>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <br/>\r\n                        <br/>\r\n\r\n                        <div className=\"collapse\" id=\"add-publisher-block\">\r\n                            <div className=\"card card-body mb-2\">\r\n                                <form onSubmit={this.onAddPublisher}>\r\n                                    <div className=\"genre-form\">\r\n                                        <input type=\"text\" placeholder=\"Write new publisher here...\" className=\"form-control\" onChange={this.changeAddPublisher} value={this.props.addPublisher}/>\r\n                                        <button type=\"submit\" className=\"btn btn-info auth-button\">Add</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"collapse\" id=\"edit-publisher-block\">\r\n                            <div className=\"card card-body\">\r\n                                <form onSubmit={this.onEditPublisher}>\r\n                                    <input type=\"text\" placeholder=\"Write new genre here...\" className=\"form-control\" onChange={this.changeEditPublisher} value={this.props.editPublisher}/>\r\n                                    <button type=\"submit\" className=\"btn btn-info auth-button\">Update</button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Name</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {rows}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </main>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = ({publishersList}) => {\r\n    return {\r\n        publishers : publishersList.publishers,\r\n        loading : publishersList.loading,\r\n        isAddWindow : publishersList.isAddWindow,\r\n        isEditWindow : publishersList.isEditWindow,\r\n        addPublisher : publishersList.addPublisher,\r\n        editPublisher : publishersList.editPublisher,\r\n        selectedItem : publishersList.selectedItem\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onRequest : () => {dispatch(publishersRequested())},\r\n        onLoaded : (newPublishers) => {dispatch(publishersLoaded(newPublishers))},\r\n        changeAddWindow : (value) => {dispatch(publishersShowAddWindow(value))},\r\n        changeEditWindow : (value) => {dispatch(publishersShowEditWindow(value))},\r\n        changeAddField : (value) => {dispatch(publishersUpdateAddField(value))},\r\n        changeEditField : (value) => {dispatch(publishersUpdateEditField(value))},\r\n        changeItem : (item) => {dispatch(publishersUpdateSelectedItem(item))}\r\n    }\r\n};\r\n\r\nexport default compose(\r\n        withLibraryService(),\r\n        connect(mapStateToProps, mapDispatchToProps)\r\n    )(PublishersPage);\r\n"]},"metadata":{},"sourceType":"module"}