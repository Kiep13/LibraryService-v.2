{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\bookfund-page\\\\bookfund-page.js\";\nimport React, { Component } from \"react\";\nimport \"./bookfund-page.css\";\nimport Spinner from \"../spinner\";\nimport Header from \"../header\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { bookFundRequested, bookFundLoaded, bookFundUpdateAddBookField, bookFundUpdateAddLibraryField, bookFundUpdateAddAmountField, bookFundUpdateEditBookField, bookFundUpdateEditLibraryField, bookFundUpdateEditAmountField, booksFundUpdateSelectedItem } from \"../../actions/book-fund-actions\";\nimport { booksLoaded } from \"../../actions/books-actions\";\nimport { librariesLoaded } from \"../../actions/libraries-actions\";\n\nclass BookFundPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.getAllBooks = async () => {\n      await axios.get(\"http://localhost:8080/books\").then(response => {\n        if (response.data != null) {\n          this.props.onLoadedBooks(response.data);\n        }\n      });\n    };\n\n    this.getAllLibraries = async () => {\n      await axios.get(\"http://localhost:8080/libraries\").then(response => {\n        if (response.data != null) {\n          this.props.onLoadedLibraries(response.data);\n        }\n      });\n    };\n\n    this.getBookFund = async () => {\n      await axios.get(\"http://localhost:8080/bookfund\").then(response => {\n        if (response.data != null) {\n          this.props.onLoaded(response.data);\n        }\n      });\n    };\n\n    this.findBook = id => {\n      return this.props.books.find(el => el.id === +id);\n    };\n\n    this.findLibrary = id => {\n      return this.props.libraries.find(el => el.id === +id);\n    };\n\n    this.onAddBook = event => {\n      event.preventDefault();\n      this.props.changeAddBook(this.findBook(event.target.value));\n    };\n\n    this.onAddLibrary = event => {\n      event.preventDefault();\n      this.props.changeAddLibrary(this.findLibrary(event.target.value));\n    };\n\n    this.onAddAmount = event => {\n      event.preventDefault();\n      this.props.changeAddAmount(event.target.value);\n    };\n\n    this.onEditBook = event => {\n      event.preventDefault();\n      this.props.changeEditBook(this.findBook(event.target.value));\n    };\n\n    this.onEditLibrary = event => {\n      event.preventDefault();\n      this.props.changeEditLibrary(this.findLibrary(event.target.value));\n    };\n\n    this.onEditAmount = event => {\n      event.preventDefault();\n      this.props.changeEditAmount(event.target.value);\n    };\n\n    this.onAddBookFund = async event => {\n      event.preventDefault();\n      const bookFund = {\n        book: this.state.addBookFund.addBook,\n        library: this.state.addBookFund.addLibrary,\n        amount: +this.state.addBookFund.addAmount\n      };\n      await axios.post(\"http://localhost:8080/bookfund-add\", bookFund).then(response => {\n        if (response.data != null) {\n          this.props.onRequest();\n          this.getBookFund();\n        }\n      });\n    };\n\n    this.onEditBookFund = async event => {\n      event.preventDefault();\n\n      if (this.props.selectedItem != null) {\n        const {\n          editBook,\n          editLibrary,\n          editAmount\n        } = this.props.editBookFund;\n        const bookFund = {\n          id: this.props.selectedItem,\n          book: editBook,\n          library: editLibrary,\n          amount: +editAmount\n        };\n        await axios.put(\"http://localhost:8080/bookfund-edit\", bookFund).then(response => {\n          if (response.data != null) {\n            this.props.onRequest();\n            this.getBookFund();\n          }\n        });\n      }\n    };\n\n    this.onDeleteBookFund = async event => {\n      event.preventDefault();\n\n      if (this.props.selectedItem != null) {\n        await axios.delete(`http://localhost:8080/bookfund-delete/${this.props.selectedItem}`).then(response => {\n          if (response.data != null) {\n            this.props.onRequest();\n            this.getBookFund();\n          }\n        });\n      }\n    };\n\n    this.selectedRow = ({\n      id,\n      book,\n      library,\n      amount\n    }) => {\n      const book_fund = {\n        editBook: book,\n        editLibrary: library,\n        editAmount: amount\n      };\n      this.props.changeItem({\n        id,\n        book_fund\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.onRequest();\n    this.getAllBooks();\n    this.getAllLibraries();\n    this.getBookFund();\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 20\n        }\n      });\n    }\n\n    console.log(this.state.addBookFund);\n    const books = this.state.books.map(({\n      id,\n      title,\n      year\n    }) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: id,\n        value: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 17\n        }\n      }, title, \" (\", year, \")\");\n    });\n    const libraries = this.state.libraries.map(({\n      id,\n      name\n    }) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: id,\n        value: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 17\n        }\n      }, name);\n    });\n    const rows = this.state.book_fund.map(el => {\n      const {\n        id,\n        book,\n        library\n      } = el;\n      const {\n        title,\n        author,\n        genre,\n        year,\n        publisher,\n        amount_pages\n      } = book;\n      const {\n        name,\n        address,\n        telephone\n      } = library;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"object_id\",\n        value: id,\n        onClick: () => {\n          this.selectedRow(el);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }\n      }, title), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }\n      }, author.surname, \" \", author.name, \" \", author.patronymic), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 21\n        }\n      }, genre.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }\n      }, year), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }\n      }, publisher.publisher), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 21\n        }\n      }, amount_pages), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }\n      }, name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }\n      }, address), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }\n      }, telephone));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container genres-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 25\n      }\n    }, \"BookFund\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genres-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger float-right my-1 item-control\",\n      onClick: this.onDeleteBookFund,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-warning float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#edit-book-fund-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-pencil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-success float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#add-book-fund-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"add-book-fund-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onAddBookFund,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-ldropdown mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"add-books-list\",\n      onChange: this.onAddBook,\n      value: this.state.addBookFund.addBook.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 45\n      }\n    }, books)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-ldropdown mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"add-libraries-list\",\n      onChange: this.onAddLibrary,\n      value: this.state.addBookFund.addLibrary.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 45\n      }\n    }, libraries)), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write year of new book here...\",\n      className: \"form-control mb-2\",\n      onChange: this.onAddAmount,\n      value: this.state.addBookFund.addAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 41\n      }\n    }, \"Add\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"edit-book-fund-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onEditBookFund,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-ldropdown mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"edit-books-list\",\n      onChange: this.onEditBook,\n      value: this.state.editBookFund.editBook.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 45\n      }\n    }, books)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-ldropdown mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"edit-libraries-list\",\n      onChange: this.onEditLibrary,\n      value: this.state.editBookFund.editLibrary.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 45\n      }\n    }, libraries)), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write year of new book here...\",\n      className: \"form-control mb-2\",\n      onChange: this.onEditAmount,\n      value: this.state.editBookFund.editAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 41\n      }\n    }, \"Update\"))))), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 33\n      }\n    }, \"Title\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 33\n      }\n    }, \"Author\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 33\n      }\n    }, \"Genre\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 33\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 33\n      }\n    }, \"Publisher\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 33\n      }\n    }, \"Amount of pages\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 33\n      }\n    }, \"Library\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 33\n      }\n    }, \"Address\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 33\n      }\n    }, \"Telephone\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 29\n      }\n    }, rows)))));\n  }\n\n}\n\nconst mapStateToProps = ({\n  bookList,\n  librariesList,\n  bookFundList\n}) => {\n  return {\n    book_fund: bookFundList.book_fund,\n    books: bookList.books,\n    libraries: librariesList.libraries,\n    loading: bookFundList.loading,\n    error: bookFundList.error,\n    addBookFund: bookFundList.addBookFund,\n    editBookFund: bookFundList.editBookFund,\n    selectedItem: bookFundList.selectedItem\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onRequest: () => {\n      dispatch(bookFundRequested());\n    },\n    onLoadedBooks: newBooks => {\n      dispatch(booksLoaded(newBooks));\n    },\n    onLoadedLibraries: newLibraries => {\n      dispatch(librariesLoaded(newLibraries));\n    },\n    onLoaded: newBookFund => {\n      dispatch(bookFundLoaded(newBookFund));\n    },\n    changeAddBook: value => {\n      dispatch(bookFundUpdateAddBookField(value));\n    },\n    changeAddLibrary: value => {\n      dispatch(bookFundUpdateAddLibraryField(value));\n    },\n    changeAddAmount: value => {\n      dispatch(bookFundUpdateAddAmountField(value));\n    },\n    changeEditBook: value => {\n      dispatch(bookFundUpdateEditBookField(value));\n    },\n    changeEditLibrary: value => {\n      dispatch(bookFundUpdateEditLibraryField(value));\n    },\n    changeEditAmount: value => {\n      dispatch(bookFundUpdateEditAmountField(value));\n    },\n    changeItem: item => {\n      dispatch(booksFundUpdateSelectedItem(item));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BookFundPage);","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/bookfund-page/bookfund-page.js"],"names":["React","Component","Spinner","Header","axios","connect","bookFundRequested","bookFundLoaded","bookFundUpdateAddBookField","bookFundUpdateAddLibraryField","bookFundUpdateAddAmountField","bookFundUpdateEditBookField","bookFundUpdateEditLibraryField","bookFundUpdateEditAmountField","booksFundUpdateSelectedItem","booksLoaded","librariesLoaded","BookFundPage","getAllBooks","get","then","response","data","props","onLoadedBooks","getAllLibraries","onLoadedLibraries","getBookFund","onLoaded","findBook","id","books","find","el","findLibrary","libraries","onAddBook","event","preventDefault","changeAddBook","target","value","onAddLibrary","changeAddLibrary","onAddAmount","changeAddAmount","onEditBook","changeEditBook","onEditLibrary","changeEditLibrary","onEditAmount","changeEditAmount","onAddBookFund","bookFund","book","state","addBookFund","addBook","library","addLibrary","amount","addAmount","post","onRequest","onEditBookFund","selectedItem","editBook","editLibrary","editAmount","editBookFund","put","onDeleteBookFund","delete","selectedRow","book_fund","changeItem","componentDidMount","render","loading","console","log","map","title","year","name","rows","author","genre","publisher","amount_pages","address","telephone","surname","patronymic","mapStateToProps","bookList","librariesList","bookFundList","error","mapDispatchToProps","dispatch","newBooks","newLibraries","newBookFund","item"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport \"./bookfund-page.css\";\r\nimport Spinner from \"../spinner\";\r\nimport Header from \"../header\";\r\nimport axios from \"axios\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    bookFundRequested,\r\n    bookFundLoaded,\r\n    bookFundUpdateAddBookField,\r\n    bookFundUpdateAddLibraryField,\r\n    bookFundUpdateAddAmountField,\r\n    bookFundUpdateEditBookField,\r\n    bookFundUpdateEditLibraryField,\r\n    bookFundUpdateEditAmountField,\r\n    booksFundUpdateSelectedItem\r\n} from \"../../actions/book-fund-actions\";\r\nimport {booksLoaded} from \"../../actions/books-actions\";\r\nimport {librariesLoaded} from \"../../actions/libraries-actions\";\r\n\r\nclass BookFundPage extends Component {\r\n\r\n    componentDidMount() {\r\n        this.props.onRequest();\r\n        this.getAllBooks();\r\n        this.getAllLibraries();\r\n        this.getBookFund();\r\n    }\r\n\r\n    getAllBooks = async () => {\r\n        await axios.get(\"http://localhost:8080/books\")\r\n            .then(response => {\r\n                if(response.data != null){\r\n                    this.props.onLoadedBooks(response.data);\r\n                }\r\n            })\r\n    };\r\n\r\n    getAllLibraries = async () => {\r\n        await axios.get(\"http://localhost:8080/libraries\")\r\n            .then(response => {\r\n                if(response.data != null) {\r\n                    this.props.onLoadedLibraries(response.data);\r\n                }\r\n            })\r\n    };\r\n\r\n    getBookFund = async () => {\r\n        await axios.get(\"http://localhost:8080/bookfund\")\r\n            .then(response => {\r\n                if(response.data != null) {\r\n                    this.props.onLoaded(response.data);\r\n                }\r\n            })\r\n    };\r\n\r\n    findBook = (id) => {\r\n        return this.props.books.find((el) => el.id === +id);\r\n    };\r\n\r\n    findLibrary = (id) => {\r\n        return this.props.libraries.find((el) => el.id === +id);\r\n    };\r\n\r\n    onAddBook= event => {\r\n        event.preventDefault();\r\n        this.props.changeAddBook(this.findBook(event.target.value));\r\n    };\r\n\r\n    onAddLibrary = event => {\r\n        event.preventDefault();\r\n        this.props.changeAddLibrary(this.findLibrary(event.target.value));\r\n    };\r\n\r\n    onAddAmount = event => {\r\n        event.preventDefault();\r\n        this.props.changeAddAmount(event.target.value);\r\n    };\r\n\r\n    onEditBook= event => {\r\n        event.preventDefault();\r\n        this.props.changeEditBook(this.findBook(event.target.value));\r\n    };\r\n\r\n    onEditLibrary = event => {\r\n        event.preventDefault();\r\n        this.props.changeEditLibrary(this.findLibrary(event.target.value));\r\n    };\r\n\r\n    onEditAmount = event => {\r\n        event.preventDefault();\r\n        this.props.changeEditAmount(event.target.value);\r\n    };\r\n\r\n    onAddBookFund = async event => {\r\n        event.preventDefault();\r\n\r\n        const bookFund = {\r\n            book : this.state.addBookFund.addBook,\r\n            library : this.state.addBookFund.addLibrary,\r\n            amount : +this.state.addBookFund.addAmount\r\n        };\r\n\r\n        await axios.post(\"http://localhost:8080/bookfund-add\", bookFund)\r\n            .then(response => {\r\n                if(response.data != null){\r\n                    this.props.onRequest();\r\n                    this.getBookFund();\r\n                }\r\n            });\r\n    };\r\n\r\n    onEditBookFund = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.props.selectedItem != null) {\r\n            const { editBook, editLibrary, editAmount } = this.props.editBookFund;\r\n\r\n            const bookFund = {\r\n                id : this.props.selectedItem,\r\n                book : editBook,\r\n                library: editLibrary,\r\n                amount : +editAmount\r\n            };\r\n\r\n            await axios.put(\"http://localhost:8080/bookfund-edit\", bookFund)\r\n                .then(response => {\r\n                    if(response.data != null) {\r\n                        this.props.onRequest();\r\n                        this.getBookFund();\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    onDeleteBookFund = async event => {\r\n        event.preventDefault();\r\n\r\n        if(this.props.selectedItem != null) {\r\n            await axios.delete(`http://localhost:8080/bookfund-delete/${this.props.selectedItem}`)\r\n                .then(response => {\r\n                    if(response.data != null) {\r\n                        this.props.onRequest();\r\n                        this.getBookFund();\r\n                    }\r\n                });\r\n        }\r\n    };\r\n\r\n    selectedRow = ({id, book, library, amount}) => {\r\n        const book_fund = {\r\n            editBook : book,\r\n            editLibrary: library,\r\n            editAmount: amount\r\n        };\r\n        this.props.changeItem({id, book_fund})\r\n    };\r\n\r\n    render() {\r\n        if(this.state.loading){\r\n            return <Spinner/>\r\n        }\r\n\r\n        console.log(this.state.addBookFund);\r\n\r\n        const books = this.state.books.map(({id, title, year} )=> {\r\n            return (\r\n                <option key={id} value={id}>{title} ({year})</option>\r\n            )\r\n        });\r\n\r\n        const libraries = this.state.libraries.map(({id, name}) => {\r\n            return (\r\n                <option key={id} value={id}>{name}</option>\r\n            )\r\n        });\r\n\r\n        const rows = this.state.book_fund.map((el) => {\r\n\r\n            const {id, book, library} = el;\r\n            const {title, author, genre, year, publisher, amount_pages } = book;\r\n            const {name, address, telephone} = library;\r\n\r\n            return (\r\n                <tr key={id}>\r\n                    <td><input type=\"radio\" name=\"object_id\" value={id} onClick={() => {this.selectedRow(el)}}/></td>\r\n                    <td>{title}</td>\r\n                    <td>{author.surname} {author.name} {author.patronymic}</td>\r\n                    <td>{genre.name}</td>\r\n                    <td>{year}</td>\r\n                    <td>{publisher.publisher}</td>\r\n                    <td>{amount_pages}</td>\r\n                    <td>{name}</td>\r\n                    <td>{address}</td>\r\n                    <td>{telephone}</td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <Header/>\r\n\r\n                <main role=\"main\">\r\n\r\n                    <div className=\"container genres-page\">\r\n                        <h1>BookFund</h1>\r\n\r\n                        <div className=\"genres-tools\">\r\n                            <button className=\"btn btn-outline-danger float-right my-1 item-control\" onClick={this.onDeleteBookFund}>\r\n                                <i className=\"fa fa-trash-o\"/>\r\n                            </button>\r\n\r\n                            <a className=\"btn btn-outline-warning float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#edit-book-fund-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-pencil\"/>\r\n                            </a>\r\n\r\n                            <a className=\"btn btn-outline-success float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#add-book-fund-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-plus\"/>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <br/>\r\n                        <br/>\r\n\r\n                        <div className=\"collapse\" id=\"add-book-fund-block\">\r\n                            <div className=\"card card-body mb-2\">\r\n                                <form onSubmit={this.onAddBookFund}>\r\n                                    <div className=\"genre-form\">\r\n                                        <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">\r\n                                            <select id=\"add-books-list\" onChange={this.onAddBook} value={this.state.addBookFund.addBook.id}>\r\n                                                {books}\r\n                                            </select>\r\n                                        </div>\r\n                                        <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">\r\n                                            <select id=\"add-libraries-list\" onChange={this.onAddLibrary} value={this.state.addBookFund.addLibrary.id}>\r\n                                                {libraries}\r\n                                            </select>\r\n                                        </div>\r\n                                        <input type=\"text\" placeholder=\"Write year of new book here...\" className=\"form-control mb-2\" onChange={this.onAddAmount} value={this.state.addBookFund.addAmount}/>\r\n                                        <button type=\"submit\" className=\"btn btn-info auth-button\">Add</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"collapse\" id=\"edit-book-fund-block\">\r\n                            <div className=\"card card-body mb-2\">\r\n                                <form onSubmit={this.onEditBookFund}>\r\n                                    <div className=\"genre-form\">\r\n                                        <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">\r\n                                            <select id=\"edit-books-list\" onChange={this.onEditBook} value={this.state.editBookFund.editBook.id}>\r\n                                                {books}\r\n                                            </select>\r\n                                        </div>\r\n                                        <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">\r\n                                            <select id=\"edit-libraries-list\" onChange={this.onEditLibrary} value={this.state.editBookFund.editLibrary.id}>\r\n                                                {libraries}\r\n                                            </select>\r\n                                        </div>\r\n                                        <input type=\"text\" placeholder=\"Write year of new book here...\" className=\"form-control mb-2\" onChange={this.onEditAmount} value={this.state.editBookFund.editAmount}/>\r\n                                        <button type=\"submit\" className=\"btn btn-info auth-button\">Update</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Title</th>\r\n                                <th>Author</th>\r\n                                <th>Genre</th>\r\n                                <th>Year</th>\r\n                                <th>Publisher</th>\r\n                                <th>Amount of pages</th>\r\n                                <th>Library</th>\r\n                                <th>Address</th>\r\n                                <th>Telephone</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {rows}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </main>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({bookList, librariesList, bookFundList}) => {\r\n    return {\r\n        book_fund : bookFundList.book_fund,\r\n        books : bookList.books,\r\n        libraries : librariesList.libraries,\r\n        loading : bookFundList.loading,\r\n        error : bookFundList.error,\r\n        addBookFund : bookFundList.addBookFund,\r\n        editBookFund : bookFundList.editBookFund,\r\n        selectedItem : bookFundList.selectedItem\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onRequest : () => {dispatch(bookFundRequested())},\r\n        onLoadedBooks : (newBooks) => {dispatch(booksLoaded(newBooks))},\r\n        onLoadedLibraries : (newLibraries) => {dispatch(librariesLoaded(newLibraries))},\r\n        onLoaded : (newBookFund) => {dispatch(bookFundLoaded(newBookFund))},\r\n        changeAddBook : (value) => {dispatch(bookFundUpdateAddBookField(value))},\r\n        changeAddLibrary : (value) => {dispatch(bookFundUpdateAddLibraryField(value))},\r\n        changeAddAmount : (value) => {dispatch(bookFundUpdateAddAmountField(value))},\r\n        changeEditBook : (value) => {dispatch(bookFundUpdateEditBookField(value))},\r\n        changeEditLibrary : (value) => {dispatch(bookFundUpdateEditLibraryField(value))},\r\n        changeEditAmount : (value) => {dispatch(bookFundUpdateEditAmountField(value))},\r\n        changeItem : (item) => {dispatch(booksFundUpdateSelectedItem(item))}\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BookFundPage);"]},"metadata":{},"sourceType":"module"}