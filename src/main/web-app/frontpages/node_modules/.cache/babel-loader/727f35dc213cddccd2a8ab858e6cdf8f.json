{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\genres-page\\\\genres-page.js\";\nimport React, { Component } from 'react';\nimport './genres-page.css';\nimport Header from '../header';\nimport Spinner from '../spinner';\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport { genresRequested, genresLoaded, genresError, genreUpdateAddField, genreUpdateEditField, genreUpdateSelectedItem } from \"../../actions\";\n\nclass GenresPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      genres: [],\n      loading: true,\n      error: false,\n      addGenreField: \"\",\n      editGenreField: \"\",\n      selectedGenre: null\n    };\n\n    this.getAllGenres = () => {\n      axios.get(\"http://localhost:8080/genres\").then(response => {\n        this.setState({ ...this.state,\n          genres: response.data,\n          loading: false\n        });\n      });\n      console.log(this.state.genres);\n    };\n\n    this.onAddGenreChange = event => {\n      event.preventDefault();\n      this.setState({ ...this.state,\n        addGenreField: event.target.value\n      });\n    };\n\n    this.onEditGenreChange = event => {\n      event.preventDefault();\n      this.setState({ ...this.state,\n        editGenreField: event.target.value\n      });\n    };\n\n    this.onAddButtonClick = async event => {\n      event.preventDefault();\n      const genre = {\n        name: this.state.addGenreField\n      };\n      await axios.post(\"http://localhost:8080/genre-add\", genre).then(responce => {\n        if (responce.data === \"\") {\n          console.log(responce.data);\n        }\n      });\n      this.setState({ ...this.state,\n        addGenreField: \"\"\n      });\n      this.getAllGenres();\n    };\n\n    this.onEditButtonClick = async event => {\n      event.preventDefault();\n      const genre = {\n        id: this.state.selectedGenre,\n        name: this.state.editGenreField\n      };\n      await axios.put(\"http://localhost:8080/genre-edit\", genre).then(responce => {\n        if (responce.data === \"\") {\n          console.log(responce.data);\n        }\n      });\n      this.getAllGenres();\n    };\n\n    this.onDeleteButtonClick = async event => {\n      event.preventDefault();\n\n      if (this.state.selectedGenre != null) {\n        await axios.delete(`http://localhost:8080/genre-delete/${this.state.selectedGenre}`).then(responce => {\n          if (responce.data === \"\") {\n            console.log(responce.data);\n          }\n        });\n        this.setState({ ...this.state,\n          selectedGenre: null\n        });\n        this.getAllGenres();\n      }\n    };\n\n    this.selectedRow = (id, text) => {\n      console.log(id);\n      this.setState({ ...this.state,\n        selectedGenre: id,\n        editGenreField: text\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getAllGenres();\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 20\n        }\n      });\n    }\n\n    const rows = this.state.genres.map(({\n      id,\n      name\n    }) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"object_id\",\n        value: id,\n        onClick: () => {\n          this.selectedRow(id, name);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }\n      }, name));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container genres-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 25\n      }\n    }, \"Genres\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genres-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger float-right my-1 item-control\",\n      onClick: this.onDeleteButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-warning float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#edit-genre-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-pencil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-success float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#add-genre-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"add-genre-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onAddButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new genre here...\",\n      className: \"form-control\",\n      onChange: this.onAddGenreChange,\n      value: this.state.addGenreField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 41\n      }\n    }, \"Add\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"edit-genre-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onEditButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write new genre here...\",\n      className: \"form-control\",\n      onChange: this.onEditGenreChange,\n      value: this.state.editGenreField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 37\n      }\n    }, \"Update\")))), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 33\n      }\n    }, \"Name\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 29\n      }\n    }, rows)))));\n  }\n\n}\n\nconst mapStateToProps = ({\n  genresList\n}) => {\n  return {\n    genres: genresList.genres,\n    loading: genresList.loading,\n    error: genresList.error,\n    addGenreField: genresList.addGenreField,\n    editGenreField: genresList.editTelephone,\n    selectedItem: genresList.selectedItem\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onRequest: () => {\n      dispatch(genresRequested());\n    },\n    onLoaded: () => {\n      dispatch(genresLoaded());\n    },\n    onError: error => {\n      dispatch(genresError(error));\n    },\n    onAddFieldChange: value => {\n      dispatch(genreUpdateAddField(value));\n    },\n    onEditFieldChange: value => {\n      dispatch(genreUpdateEditField(value));\n    },\n    onItemChange: item => {\n      dispatch(genreUpdateSelectedItem(item));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GenresPage);","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/genres-page/genres-page.js"],"names":["React","Component","Header","Spinner","axios","connect","genresRequested","genresLoaded","genresError","genreUpdateAddField","genreUpdateEditField","genreUpdateSelectedItem","GenresPage","state","genres","loading","error","addGenreField","editGenreField","selectedGenre","getAllGenres","get","then","response","setState","data","console","log","onAddGenreChange","event","preventDefault","target","value","onEditGenreChange","onAddButtonClick","genre","name","post","responce","onEditButtonClick","id","put","onDeleteButtonClick","delete","selectedRow","text","componentDidMount","render","rows","map","mapStateToProps","genresList","editTelephone","selectedItem","mapDispatchToProps","dispatch","onRequest","onLoaded","onError","onAddFieldChange","onEditFieldChange","onItemChange","item"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport './genres-page.css';\r\n\r\nimport Header from '../header';\r\nimport Spinner from '../spinner';\r\nimport axios from 'axios';\r\nimport {connect} from \"react-redux\";\r\nimport {genresRequested,\r\n    genresLoaded,\r\n    genresError,\r\n    genreUpdateAddField,\r\n    genreUpdateEditField,\r\n    genreUpdateSelectedItem} from \"../../actions\";\r\n\r\nclass GenresPage extends Component{\r\n\r\n    state = {\r\n        genres : [],\r\n        loading : true,\r\n        error : false,\r\n        addGenreField : \"\",\r\n        editGenreField : \"\",\r\n        selectedGenre : null\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.getAllGenres();\r\n    }\r\n\r\n    getAllGenres  = () => {\r\n        axios.get(\"http://localhost:8080/genres\")\r\n            .then(response => {\r\n                this.setState({\r\n                    ...this.state,\r\n                    genres: response.data,\r\n                    loading: false\r\n                })});\r\n        console.log(this.state.genres);\r\n\r\n    };\r\n\r\n    onAddGenreChange = event => {\r\n        event.preventDefault();\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            addGenreField : event.target.value\r\n        })\r\n    };\r\n\r\n    onEditGenreChange = event => {\r\n        event.preventDefault();\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            editGenreField : event.target.value,\r\n        })\r\n    };\r\n\r\n    onAddButtonClick = async event => {\r\n        event.preventDefault();\r\n\r\n        const genre = {\r\n            name : this.state.addGenreField\r\n        };\r\n\r\n        await axios.post(\"http://localhost:8080/genre-add\", genre)\r\n            .then(responce => {\r\n                if(responce.data === \"\") {\r\n                    console.log(responce.data);\r\n                }\r\n            });\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            addGenreField : \"\"\r\n        });\r\n\r\n        this.getAllGenres();\r\n\r\n    };\r\n\r\n    onEditButtonClick = async event => {\r\n        event.preventDefault();\r\n\r\n        const genre = {\r\n            id : this.state.selectedGenre,\r\n            name : this.state.editGenreField\r\n        };\r\n\r\n        await axios.put(\"http://localhost:8080/genre-edit\", genre)\r\n            .then(responce => {\r\n                if(responce.data === \"\") {\r\n                    console.log(responce.data);\r\n                }\r\n            });\r\n\r\n        this.getAllGenres();\r\n\r\n    };\r\n\r\n    onDeleteButtonClick = async event => {\r\n        event.preventDefault();\r\n\r\n        if (this.state.selectedGenre != null) {\r\n            await axios.delete(`http://localhost:8080/genre-delete/${this.state.selectedGenre}`)\r\n                .then(responce => {\r\n                    if (responce.data === \"\") {\r\n                        console.log(responce.data);\r\n                    }\r\n                });\r\n\r\n            this.setState({\r\n                ...this.state,\r\n                selectedGenre: null\r\n            });\r\n\r\n            this.getAllGenres();\r\n\r\n        }\r\n\r\n    };\r\n\r\n    selectedRow = (id, text) => {\r\n        console.log(id);\r\n        this.setState({\r\n            ...this.state,\r\n            selectedGenre : id,\r\n            editGenreField : text\r\n        })\r\n    };\r\n\r\n    render () {\r\n\r\n        if(this.state.loading) {\r\n            return <Spinner/>\r\n        }\r\n\r\n        const rows = this.state.genres.map(({id, name}) => {\r\n            return (\r\n                <tr key={id}>\r\n                    <td><input type=\"radio\" name=\"object_id\" value={id} onClick={() => {this.selectedRow(id, name)}}/></td>\r\n                    <td>{name}</td>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <Header/>\r\n\r\n                <main role=\"main\">\r\n\r\n                    <div className=\"container genres-page\">\r\n                        <h1>Genres</h1>\r\n\r\n                        <div className=\"genres-tools\">\r\n                            <button className=\"btn btn-outline-danger float-right my-1 item-control\" onClick={this.onDeleteButtonClick}>\r\n                                <i className=\"fa fa-trash-o\"/>\r\n                            </button>\r\n\r\n                            <a className=\"btn btn-outline-warning float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#edit-genre-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-pencil\"/>\r\n                            </a>\r\n\r\n                            <a className=\"btn btn-outline-success float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#add-genre-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-plus\"/>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <br/>\r\n                        <br/>\r\n\r\n                        <div className=\"collapse\" id=\"add-genre-block\">\r\n                            <div className=\"card card-body mb-2\">\r\n                                <form onSubmit={this.onAddButtonClick}>\r\n                                    <div className=\"genre-form\">\r\n                                        <input type=\"text\" placeholder=\"Write new genre here...\" className=\"form-control\" onChange={this.onAddGenreChange} value={this.state.addGenreField}/>\r\n                                        <button type=\"submit\" className=\"btn btn-info auth-button\">Add</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"collapse\" id=\"edit-genre-block\">\r\n                            <div className=\"card card-body\">\r\n                                <form onSubmit={this.onEditButtonClick}>\r\n                                    <input type=\"text\" placeholder=\"Write new genre here...\" className=\"form-control\" onChange={this.onEditGenreChange} value={this.state.editGenreField}/>\r\n                                    <button type=\"submit\" className=\"btn btn-info auth-button\">Update</button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Name</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {rows}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </main>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = ({genresList}) => {\r\n    return {\r\n        genres : genresList.genres,\r\n        loading : genresList.loading,\r\n        error : genresList.error,\r\n        addGenreField : genresList.addGenreField,\r\n        editGenreField: genresList.editTelephone,\r\n        selectedItem: genresList.selectedItem\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onRequest : () => {dispatch(genresRequested())},\r\n        onLoaded : () => {dispatch(genresLoaded())},\r\n        onError : (error) => {dispatch(genresError(error))},\r\n        onAddFieldChange : (value) => {dispatch(genreUpdateAddField(value))},\r\n        onEditFieldChange : (value) => {dispatch(genreUpdateEditField(value))},\r\n        onItemChange : (item) => {dispatch(genreUpdateSelectedItem(item))}\r\n    }\r\n\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(GenresPage);"]},"metadata":{},"sourceType":"module"}