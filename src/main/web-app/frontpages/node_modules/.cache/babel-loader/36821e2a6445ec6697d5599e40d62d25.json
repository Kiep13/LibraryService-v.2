{"ast":null,"code":"var _jsxFileName = \"D:\\\\libraryservice\\\\frontpages\\\\src\\\\components\\\\bookfund-page\\\\bookfund-page.js\";\nimport React, { Component } from \"react\";\nimport \"./bookfund-page.css\";\nimport Spinner from \"../spinner\";\nimport Header from \"../header\";\nimport axios from \"axios\";\n\nclass BookFundPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      book_fund: [],\n      books: [],\n      libraries: [],\n      loading: true,\n      error: false,\n      addBookFund: {\n        addBook: {},\n        addLibrary: {},\n        addAmount: \"\"\n      },\n      editBookFund: {\n        editBook: {},\n        editLibrary: {},\n        editAmount: \"\"\n      },\n      selectedItem: null\n    };\n\n    this.getAllBooks = async () => {\n      await axios.get(\"http://localhost:8080/books\").then(response => {\n        if (response.data != null) {\n          this.setState({ ...this.state,\n            books: response.data,\n            addBookFund: { ...this.state.addBookFund,\n              addBook: response.data[0]\n            }\n          });\n        }\n      });\n    };\n\n    this.getAllLibraries = async () => {\n      await axios.get(\"http://localhost:8080/libraries\").then(response => {\n        if (response.data != null) {\n          this.setState({ ...this.state,\n            libraries: response.data,\n            addBookFund: { ...this.state.addBookFund,\n              addLibrary: response.data[0]\n            }\n          });\n        }\n      });\n    };\n\n    this.getBookFund = async () => {\n      await axios.get(\"http://localhost:8080/bookfund\").then(response => {\n        if (response.data != null) {\n          this.setState({ ...this.state,\n            book_fund: response.data\n          });\n        }\n      });\n    };\n\n    this.findBook = id => {\n      return this.state.books.find(el => el.id === +id);\n    };\n\n    this.findLibrary = id => {\n      return this.state.library.find(el => el.id === +id);\n    };\n\n    this.onAddBook = event => {\n      this.setState({ ...this.state,\n        addBookFund: { ...this.state.addBookFund,\n          addBook: this.findBook(event.target.value)\n        }\n      });\n    };\n\n    this.onAddLibrary = event => {\n      this.setState({ ...this.state,\n        addBookFund: { ...this.state.addBookFund,\n          addLibrary: this.findLibrary(event.target.value)\n        }\n      });\n    };\n\n    this.onAddBookFund = async event => {\n      event.preventDefault();\n      await axios.post(\"http://localhost:8080/bookfund-add\").then(response => {\n        if (response.data != null) {\n          this.setState({ ...this.state,\n            addBookFund: {\n              addBook: this.state.books[0],\n              addLibrary: this.state.libraries[0],\n              addAmount: \"\"\n            }\n          });\n        }\n      });\n      this.getBookFund();\n    };\n\n    this.selectedRow = (id, book, library, amount) => {\n      this.setState({ ...this.state,\n        editBookFund: {\n          editBook: book,\n          editLibrary: library,\n          editAmount: amount\n        },\n        selectedItem: id\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getAllBooks();\n    this.getAllLibraries();\n    this.getBookFund();\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 20\n        }\n      });\n    }\n\n    const books = this.state.books.map(({\n      id,\n      title,\n      year\n    }) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: id,\n        value: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }\n      }, title, \" (\", year, \")\");\n    });\n    const libraries = this.state.libraries.map(({\n      id,\n      name\n    }) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        key: id,\n        value: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 17\n        }\n      }, name);\n    });\n    const rows = this.state.books.map(el => {\n      const {\n        id,\n        book,\n        library,\n        amount\n      } = el;\n      const {\n        title,\n        author,\n        genre,\n        year,\n        publisher,\n        amount_pages\n      } = book;\n      const {\n        name,\n        address,\n        telephone\n      } = library;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"object_id\",\n        value: id,\n        onClick: () => {\n          this.selectedRow(el);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }\n      }, title), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }\n      }, author.surname, \" \", author.name, \" \", author.patronymic), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }\n      }, genre.name), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }\n      }, year), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }\n      }, publisher.publisher), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }\n      }, amount_pages), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }\n      }, name), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }\n      }, address), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }\n      }, telephone));\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container genres-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 25\n      }\n    }, \"BookFund\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genres-tools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger float-right my-1 item-control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-trash-o\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-warning float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#edit-book-fund-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-pencil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"btn btn-outline-success float-right my-1 item-control\",\n      \"data-toggle\": \"collapse\",\n      href: \"#add-book-fund-block\",\n      role: \"button\",\n      \"aria-expanded\": \"false\",\n      \"aria-controls\": \"collapseExample\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"collapse\",\n      id: \"add-book-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onAddBookFund,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"genre-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-ldropdown mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"add-author-list\",\n      onChange: this.onAddBook,\n      value: this.state.addBookFund.addBook,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 45\n      }\n    }, books)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown home-dropdown d-inline-block home-ldropdown mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"add-genre-list\",\n      onChange: this.onAddLibrary,\n      value: this.state.addBookFund.addLibrary,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 45\n      }\n    }, libraries)), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Write year of new book here...\",\n      className: \"form-control mb-2\",\n      onChange: this.addBookFund,\n      value: this.state.addBookFund.addAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-info auth-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 41\n      }\n    }, \"Add\"))))), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 33\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 33\n      }\n    }, \"Title\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 33\n      }\n    }, \"Author\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 33\n      }\n    }, \"Genre\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 33\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 33\n      }\n    }, \"Publisher\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 33\n      }\n    }, \"Amount of pages\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 33\n      }\n    }, \"Library\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 33\n      }\n    }, \"Address\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 33\n      }\n    }, \"Telephone\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 29\n      }\n    })))));\n  }\n\n}\n\nexport default BookFundPage;","map":{"version":3,"sources":["D:/libraryservice/frontpages/src/components/bookfund-page/bookfund-page.js"],"names":["React","Component","Spinner","Header","axios","BookFundPage","state","book_fund","books","libraries","loading","error","addBookFund","addBook","addLibrary","addAmount","editBookFund","editBook","editLibrary","editAmount","selectedItem","getAllBooks","get","then","response","data","setState","getAllLibraries","getBookFund","findBook","id","find","el","findLibrary","library","onAddBook","event","target","value","onAddLibrary","onAddBookFund","preventDefault","post","selectedRow","book","amount","componentDidMount","render","map","title","year","name","rows","author","genre","publisher","amount_pages","address","telephone","surname","patronymic"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport \"./bookfund-page.css\";\r\nimport Spinner from \"../spinner\";\r\nimport Header from \"../header\";\r\nimport axios from \"axios\";\r\n\r\nclass BookFundPage extends Component {\r\n\r\n    state = {\r\n        book_fund : [],\r\n        books : [],\r\n        libraries : [],\r\n        loading : true,\r\n        error : false,\r\n        addBookFund : {\r\n            addBook : {},\r\n            addLibrary : {},\r\n            addAmount : \"\"\r\n        },\r\n        editBookFund : {\r\n            editBook : {},\r\n            editLibrary : {},\r\n            editAmount : \"\"\r\n        },\r\n        selectedItem : null\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.getAllBooks();\r\n        this.getAllLibraries();\r\n        this.getBookFund();\r\n    }\r\n\r\n    getAllBooks = async () => {\r\n        await axios.get(\"http://localhost:8080/books\")\r\n            .then(response => {\r\n                if(response.data != null){\r\n                    this.setState({\r\n                        ...this.state,\r\n                        books : response.data,\r\n                        addBookFund : {\r\n                            ...this.state.addBookFund,\r\n                            addBook: response.data[0]\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n    };\r\n\r\n    getAllLibraries = async () => {\r\n        await axios.get(\"http://localhost:8080/libraries\")\r\n            .then(response => {\r\n                if(response.data != null) {\r\n                    this.setState({\r\n                        ...this.state,\r\n                        libraries : response.data,\r\n                        addBookFund : {\r\n                            ...this.state.addBookFund,\r\n                            addLibrary : response.data[0]\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n    };\r\n\r\n    getBookFund = async () => {\r\n        await axios.get(\"http://localhost:8080/bookfund\")\r\n            .then(response => {\r\n                if(response.data != null) {\r\n                    this.setState({\r\n                        ...this.state,\r\n                        book_fund : response.data\r\n                    })\r\n                }\r\n            })\r\n    };\r\n\r\n    findBook = (id) => {\r\n        return this.state.books.find((el) => el.id === +id);\r\n    };\r\n\r\n    findLibrary = (id) => {\r\n        return this.state.library.find((el) => el.id === +id);\r\n    };\r\n\r\n    onAddBook= event => {\r\n        this.setState({\r\n            ...this.state,\r\n            addBookFund : {\r\n                ...this.state.addBookFund,\r\n                addBook : this.findBook(event.target.value)\r\n            }\r\n        });\r\n    };\r\n\r\n    onAddLibrary = event => {\r\n        this.setState({\r\n            ...this.state,\r\n            addBookFund : {\r\n                ...this.state.addBookFund,\r\n                addLibrary : this.findLibrary(event.target.value)\r\n            }\r\n        });\r\n    };\r\n\r\n    onAddBookFund = async event => {\r\n        event.preventDefault();\r\n\r\n        await axios.post(\"http://localhost:8080/bookfund-add\")\r\n            .then(response => {\r\n                if(response.data != null){\r\n                    this.setState({\r\n                        ...this.state,\r\n                        addBookFund : {\r\n                            addBook : this.state.books[0],\r\n                            addLibrary : this.state.libraries[0],\r\n                            addAmount: \"\"\r\n                        }\r\n                    })\r\n                }\r\n            });\r\n\r\n        this.getBookFund();\r\n    };\r\n\r\n    selectedRow = (id, book, library, amount) => {\r\n        this.setState({\r\n            ...this.state,\r\n            editBookFund : {\r\n                editBook : book,\r\n                editLibrary: library,\r\n                editAmount: amount\r\n            },\r\n            selectedItem : id\r\n        })\r\n    };\r\n\r\n    render() {\r\n        if(this.state.loading){\r\n            return <Spinner/>\r\n        }\r\n\r\n        const books = this.state.books.map(({id, title, year} )=> {\r\n            return (\r\n                <option key={id} value={id}>{title} ({year})</option>\r\n            )\r\n        });\r\n\r\n        const libraries = this.state.libraries.map(({id, name}) => {\r\n            return (\r\n                <option key={id} value={id}>{name}</option>\r\n            )\r\n        });\r\n\r\n        const rows = this.state.books.map((el) => {\r\n\r\n            const {id, book, library, amount} = el;\r\n            const {title, author, genre, year, publisher, amount_pages } = book;\r\n            const {name, address, telephone} = library;\r\n\r\n            return (\r\n                <tr key={id}>\r\n                    <td><input type=\"radio\" name=\"object_id\" value={id} onClick={() => {this.selectedRow(el)}}/></td>\r\n                    <th>{title}</th>\r\n                    <th>{author.surname} {author.name} {author.patronymic}</th>\r\n                    <th>{genre.name}</th>\r\n                    <th>{year}</th>\r\n                    <th>{publisher.publisher}</th>\r\n                    <th>{amount_pages}</th>\r\n                    <th>{name}</th>\r\n                    <th>{address}</th>\r\n                    <th>{telephone}</th>\r\n                </tr>\r\n            )\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <Header/>\r\n\r\n                <main role=\"main\">\r\n\r\n                    <div className=\"container genres-page\">\r\n                        <h1>BookFund</h1>\r\n\r\n                        <div className=\"genres-tools\">\r\n                            <button className=\"btn btn-outline-danger float-right my-1 item-control\">\r\n                                <i className=\"fa fa-trash-o\"/>\r\n                            </button>\r\n\r\n                            <a className=\"btn btn-outline-warning float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#edit-book-fund-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-pencil\"/>\r\n                            </a>\r\n\r\n                            <a className=\"btn btn-outline-success float-right my-1 item-control\" data-toggle=\"collapse\" href=\"#add-book-fund-block\" role=\"button\"\r\n                               aria-expanded=\"false\" aria-controls=\"collapseExample\">\r\n                                <i className=\"fa fa-plus\"/>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <br/>\r\n                        <br/>\r\n\r\n                        <div className=\"collapse\" id=\"add-book-block\">\r\n                            <div className=\"card card-body mb-2\">\r\n                                <form onSubmit={this.onAddBookFund}>\r\n                                    <div className=\"genre-form\">\r\n                                        <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">\r\n                                            <select id=\"add-author-list\" onChange={this.onAddBook} value={this.state.addBookFund.addBook}>\r\n                                                {books}\r\n                                            </select>\r\n                                        </div>\r\n                                        <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">\r\n                                            <select id=\"add-genre-list\" onChange={this.onAddLibrary} value={this.state.addBookFund.addLibrary}>\r\n                                                {libraries}\r\n                                            </select>\r\n                                        </div>\r\n                                        <input type=\"text\" placeholder=\"Write year of new book here...\" className=\"form-control mb-2\" onChange={this.addBookFund} value={this.state.addBookFund.addAmount}/>\r\n                                        <button type=\"submit\" className=\"btn btn-info auth-button\">Add</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/*<div className=\"collapse\" id=\"edit-book-block\">*/}\r\n                        {/*    <div className=\"card card-body mb-2\">*/}\r\n                        {/*        <form onSubmit={this.onEditBook}>*/}\r\n                        {/*            <div className=\"genre-form\">*/}\r\n                        {/*                <input type=\"text\" placeholder=\"Write title of new book here...\" className=\"form-control mb-2\" onChange={this.onEditTitle} value={this.state.editBook.editTitle}/>*/}\r\n                        {/*                <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">*/}\r\n                        {/*                    <select id=\"edit-author-list\" onChange={this.onEditAuthor} value={this.state.editBook.editAuthor}>*/}\r\n                        {/*                        {authors}*/}\r\n                        {/*                    </select>*/}\r\n                        {/*                </div>*/}\r\n                        {/*                <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">*/}\r\n                        {/*                    <select id=\"edit-genre-list\" onChange={this.onEditGenre} value={this.state.editBook.editGenre}>*/}\r\n                        {/*                        {genres}*/}\r\n                        {/*                    </select>*/}\r\n                        {/*                </div>*/}\r\n                        {/*                <div className=\"dropdown home-dropdown d-inline-block home-ldropdown mb-2\">*/}\r\n                        {/*                    <select id=\"edit-publisher-list\" onChange={this.onEditPublisher} value={this.state.editBook.editPublisher}>*/}\r\n                        {/*                        {publishers}*/}\r\n                        {/*                    </select>*/}\r\n                        {/*                </div>*/}\r\n                        {/*                <input type=\"text\" placeholder=\"Write year of new book here...\" className=\"form-control mb-2\" onChange={this.onEditYear} value={this.state.editBook.editYear}/>*/}\r\n                        {/*                <input type=\"text\" placeholder=\"Write amount of pages of new book here...\" className=\"form-control mb-2\" onChange={this.onEditAmountOfPages} value={this.state.editBook.editAmountOfPages}/>*/}\r\n                        {/*                <button type=\"submit\" className=\"btn btn-info auth-button\">Update</button>*/}\r\n                        {/*            </div>*/}\r\n                        {/*        </form>*/}\r\n                        {/*    </div>*/}\r\n                        {/*</div>*/}\r\n\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Title</th>\r\n                                <th>Author</th>\r\n                                <th>Genre</th>\r\n                                <th>Year</th>\r\n                                <th>Publisher</th>\r\n                                <th>Amount of pages</th>\r\n                                <th>Library</th>\r\n                                <th>Address</th>\r\n                                <th>Telephone</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                </main>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BookFundPage;"]},"metadata":{},"sourceType":"module"}